
#include <linux/kernel.h>
#include <common.h>
#include <asm/arch/ddr.h>
#include <asm/arch/ddr_phy.h>

#ifdef CONFIG_X2_LPDDR4_3200
#include "lpddr4_3200.h"

unsigned int g_ddr_rate = 3200;
#endif /* CONFIG_X2_LPDDR4_3200 */

#ifdef CONFIG_X2_LPDDR4_2133
#include "lpddr4_2133.h"

unsigned int g_ddr_rate = 2133;
#endif /* CONFIG_X2_LPDDR4_2133 */

#ifdef CONFIG_X2_LPDDR4_2666
#include "lpddr4_2666.h"

unsigned int g_ddr_rate = 2666;
#endif /* CONFIG_X2_LPDDR4_2666 */

#ifdef CONFIG_X2_LPDDR4_2400
#include "lpddr4_2400.h"

unsigned int g_ddr_rate = 2400;
#endif /* CONFIG_X2_LPDDR4_2400 */

static unsigned int lpddr4_cali_regs[] = {
	DDRC_DRAMTMG2,
	DDRC_DFITMG1,

	DDRP_MASTER0_ACX4ANIBDIS,
	DDRP_MASTER0_CALMISC2,
	DDRP_MASTER0_CALOFFSETS,
	DDRP_MASTER0_PLLCTRL4_P0,
	DDRP_APBONLY0_MICROCONTMUXSEL,

	DDRP_MASTER0_PLLCTRL3,
	DDRP_DBYTE0_RXPBDLYTG0_R0,
	DDRP_DBYTE0_RXPBDLYTG0_R1,
	DDRP_DBYTE0_RXPBDLYTG0_R2,
	DDRP_DBYTE0_RXPBDLYTG0_R3,
	DDRP_DBYTE0_RXPBDLYTG0_R4,
	DDRP_DBYTE0_RXPBDLYTG0_R5,
	DDRP_DBYTE0_RXPBDLYTG0_R6,
	DDRP_DBYTE0_RXPBDLYTG0_R7,
	DDRP_DBYTE0_RXPBDLYTG0_R8,
	DDRP_DBYTE0_PPTCTLSTATIC,
	DDRP_DBYTE0_TRAININGINCDECDTSMEN_R0,
	DDRP_DBYTE0_TSMBYTE0,
	DDRP_DBYTE1_RXPBDLYTG0_R0,
	DDRP_DBYTE1_RXPBDLYTG0_R1,
	DDRP_DBYTE1_RXPBDLYTG0_R2,
	DDRP_DBYTE1_RXPBDLYTG0_R3,
	DDRP_DBYTE1_RXPBDLYTG0_R4,
	DDRP_DBYTE1_RXPBDLYTG0_R5,
	DDRP_DBYTE1_RXPBDLYTG0_R6,
	DDRP_DBYTE1_RXPBDLYTG0_R7,
	DDRP_DBYTE1_RXPBDLYTG0_R8,
	DDRP_DBYTE1_PPTCTLSTATIC,
	DDRP_DBYTE1_TRAININGINCDECDTSMEN_R0,
	DDRP_DBYTE1_TSMBYTE0,
	DDRP_DBYTE2_RXPBDLYTG0_R0,
	DDRP_DBYTE2_RXPBDLYTG0_R1,
	DDRP_DBYTE2_RXPBDLYTG0_R2,
	DDRP_DBYTE2_RXPBDLYTG0_R3,
	DDRP_DBYTE2_RXPBDLYTG0_R4,
	DDRP_DBYTE2_RXPBDLYTG0_R5,
	DDRP_DBYTE2_RXPBDLYTG0_R6,
	DDRP_DBYTE2_RXPBDLYTG0_R7,
	DDRP_DBYTE2_RXPBDLYTG0_R8,
	DDRP_DBYTE2_PPTCTLSTATIC,
	DDRP_DBYTE2_TRAININGINCDECDTSMEN_R0,
	DDRP_DBYTE2_TSMBYTE0,
	DDRP_DBYTE3_RXPBDLYTG0_R0,
	DDRP_DBYTE3_RXPBDLYTG0_R1,
	DDRP_DBYTE3_RXPBDLYTG0_R2,
	DDRP_DBYTE3_RXPBDLYTG0_R3,
	DDRP_DBYTE3_RXPBDLYTG0_R4,
	DDRP_DBYTE3_RXPBDLYTG0_R5,
	DDRP_DBYTE3_RXPBDLYTG0_R6,
	DDRP_DBYTE3_RXPBDLYTG0_R7,
	DDRP_DBYTE3_RXPBDLYTG0_R8,
	DDRP_DBYTE3_PPTCTLSTATIC,
	DDRP_DBYTE3_TRAININGINCDECDTSMEN_R0,
	DDRP_DBYTE3_TSMBYTE0,
	DDRP_ANIB0_ATXDLY_P0,
	DDRP_ANIB1_ATXDLY_P0,
	DDRP_ANIB2_ATXDLY_P0,
	DDRP_ANIB3_ATXDLY_P0,
	DDRP_ANIB4_ATXDLY_P0,
	DDRP_ANIB5_ATXDLY_P0,
	DDRP_ANIB6_ATXDLY_P0,
	DDRP_ANIB7_ATXDLY_P0,
	DDRP_ANIB8_ATXDLY_P0,
	DDRP_ANIB9_ATXDLY_P0,
	DDRP_DBYTE0_DFIMRL_P0,
	DDRP_DBYTE0_RXENDLYTG0_U0_P0,
	DDRP_DBYTE0_TXDQSDLYTG0_U0_P0,
	DDRP_DBYTE0_RXCLKDLYTG0_U0_P0,
	DDRP_DBYTE0_RXENDLYTG0_U1_P0,
	DDRP_DBYTE0_TXDQSDLYTG0_U1_P0,
	DDRP_DBYTE0_RXCLKDLYTG0_U1_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R0_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R1_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R2_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R3_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R4_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R5_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R6_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R7_P0,
	DDRP_DBYTE0_TXDQDLYTG0_R8_P0,
	DDRP_DBYTE0_PPTDQSCNTINVTRNTG0_P0,
	DDRP_DBYTE1_DFIMRL_P0,
	DDRP_DBYTE1_RXENDLYTG0_U0_P0,
	DDRP_DBYTE1_TXDQSDLYTG0_U0_P0,
	DDRP_DBYTE1_RXCLKDLYTG0_U0_P0,
	DDRP_DBYTE1_RXENDLYTG0_U1_P0,
	DDRP_DBYTE1_TXDQSDLYTG0_U1_P0,
	DDRP_DBYTE1_RXCLKDLYTG0_U1_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R0_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R1_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R2_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R3_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R4_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R5_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R6_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R7_P0,
	DDRP_DBYTE1_TXDQDLYTG0_R8_P0,
	DDRP_DBYTE1_PPTDQSCNTINVTRNTG0_P0,
	DDRP_DBYTE2_DFIMRL_P0,
	DDRP_DBYTE2_RXENDLYTG0_U0_P0,
	DDRP_DBYTE2_TXDQSDLYTG0_U0_P0,
	DDRP_DBYTE2_RXCLKDLYTG0_U0_P0,
	DDRP_DBYTE2_RXENDLYTG0_U1_P0,
	DDRP_DBYTE2_TXDQSDLYTG0_U1_P0,
	DDRP_DBYTE2_RXCLKDLYTG0_U1_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R0_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R1_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R2_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R3_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R4_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R5_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R6_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R7_P0,
	DDRP_DBYTE2_TXDQDLYTG0_R8_P0,
	DDRP_DBYTE2_PPTDQSCNTINVTRNTG0_P0,
	DDRP_DBYTE3_DFIMRL_P0,
	DDRP_DBYTE3_RXENDLYTG0_U0_P0,
	DDRP_DBYTE3_TXDQSDLYTG0_U0_P0,
	DDRP_DBYTE3_RXCLKDLYTG0_U0_P0,
	DDRP_DBYTE3_RXENDLYTG0_U1_P0,
	DDRP_DBYTE3_TXDQSDLYTG0_U1_P0,
	DDRP_DBYTE3_RXCLKDLYTG0_U1_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R0_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R1_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R2_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R3_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R4_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R5_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R6_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R7_P0,
	DDRP_DBYTE3_TXDQDLYTG0_R8_P0,
	DDRP_DBYTE3_PPTDQSCNTINVTRNTG0_P0,
	DDRP_INITENG0_SEQ0BGPR1_P0,
	DDRP_INITENG0_SEQ0BGPR2_P0,
	DDRP_INITENG0_SEQ0BGPR3_P0,
	DDRP_INITENG0_SEQ0BGPR5_P0,
	DDRP_INITENG0_SEQ0BGPR6_P0,
	DDRP_INITENG0_SEQ0BGPR7_P0,
	DDRP_INITENG0_SEQ0BGPR8_P0,
	DDRP_MASTER0_HWTMRL_P0,
	DDRP_MASTER0_HWTCAMODE,
	DDRP_MASTER0_HWTLPCSENA,
	DDRP_MASTER0_HWTLPCSENB,
	DDRP_ACSM0_ACSMCTRL23,
	DDRP_DBYTE0_VREFDAC0_R0,
	DDRP_DBYTE0_VREFDAC0_R1,
	DDRP_DBYTE0_VREFDAC0_R2,
	DDRP_DBYTE0_VREFDAC0_R3,
	DDRP_DBYTE0_VREFDAC0_R4,
	DDRP_DBYTE0_VREFDAC0_R5,
	DDRP_DBYTE0_VREFDAC0_R6,
	DDRP_DBYTE0_VREFDAC0_R7,
	DDRP_DBYTE0_VREFDAC0_R8,
	DDRP_DBYTE1_VREFDAC0_R0,
	DDRP_DBYTE1_VREFDAC0_R1,
	DDRP_DBYTE1_VREFDAC0_R2,
	DDRP_DBYTE1_VREFDAC0_R3,
	DDRP_DBYTE1_VREFDAC0_R4,
	DDRP_DBYTE1_VREFDAC0_R5,
	DDRP_DBYTE1_VREFDAC0_R6,
	DDRP_DBYTE1_VREFDAC0_R7,
	DDRP_DBYTE1_VREFDAC0_R8,
	DDRP_DBYTE2_VREFDAC0_R0,
	DDRP_DBYTE2_VREFDAC0_R1,
	DDRP_DBYTE2_VREFDAC0_R2,
	DDRP_DBYTE2_VREFDAC0_R3,
	DDRP_DBYTE2_VREFDAC0_R4,
	DDRP_DBYTE2_VREFDAC0_R5,
	DDRP_DBYTE2_VREFDAC0_R6,
	DDRP_DBYTE2_VREFDAC0_R7,
	DDRP_DBYTE2_VREFDAC0_R8,
	DDRP_DBYTE3_VREFDAC0_R0,
	DDRP_DBYTE3_VREFDAC0_R1,
	DDRP_DBYTE3_VREFDAC0_R2,
	DDRP_DBYTE3_VREFDAC0_R3,
	DDRP_DBYTE3_VREFDAC0_R4,
	DDRP_DBYTE3_VREFDAC0_R5,
	DDRP_DBYTE3_VREFDAC0_R6,
	DDRP_DBYTE3_VREFDAC0_R7,
	DDRP_DBYTE3_VREFDAC0_R8,
};

/* lpddr4 timing config params on EVK board */
struct dram_timing_info dram_timing = {
	.ddrc_cfg = lpddr4_ddrc_cfg,
	.ddrc_cfg_num = ARRAY_SIZE(lpddr4_ddrc_cfg),
	.ddrphy_cfg = lpddr4_ddrphy_cfg,
	.ddrphy_cfg_num = ARRAY_SIZE(lpddr4_ddrphy_cfg),
	.fsp_msg = NULL,
	.fsp_msg_num = 0,
	.ddrphy_pie = lpddr4_phy_pie,
	.ddrphy_pie_num = ARRAY_SIZE(lpddr4_phy_pie),

	.ddrphy_cali_table = lpddr4_cali_regs,
	.ddrphy_cali_num = ARRAY_SIZE(lpddr4_cali_regs),
};

