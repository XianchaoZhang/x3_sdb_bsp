<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6.2. 环境安装 &mdash; X3 用户手册 1.0.1 文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/horizon_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/horizon.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/hobot.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="6.3. 快速体验" href="quickstart.html" />
    <link rel="prev" title="6.1. 简介" href="preface_toolchain_overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> X3 用户手册
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface/index.html">1. 前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/index.html">2. 快速入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samples/index.html">3. Demo使用指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsp_develop/index.html">4. BSP开发指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mpp_develop/index.html">5. 多媒体开发指南</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">6. 量化工具链开发指南</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="preface_toolchain_overview.html">6.1. 简介</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">6.2. 环境安装</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">6.2.1. 交付物使用说明</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">6.2.1.1. 源码目录结构说明</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id4">6.2.2. 开发机部署</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">6.2.2.1. 开发机准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker">6.2.2.2. 使用Docker环境</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">6.2.2.3. 手工安装环境</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id8">6.2.3. 开发板部署</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">6.2.3.1. 补充文件准备</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id11">6.2.4. 版本管理工具使用说明</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ddk-vcs-list">6.2.4.1. ddk_vcs list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ddk-vcs-install">6.2.4.2. ddk_vcs install</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ddk-vcs-uninstall">6.2.4.3. ddk_vcs uninstall</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ddk-vcs-patch">6.2.4.4. ddk_vcs patch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ddk-vcs-show">6.2.4.5. ddk_vcs show</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">6.3. 快速体验</a></li>
<li class="toctree-l2"><a class="reference internal" href="horizon_ai_toolchain_user_guide/index.html">6.4. 训练后量化(PTQ)使用说明</a></li>
<li class="toctree-l2"><a class="reference internal" href="horizon_runtime_samples/index.html">6.5. 上板运行(runtime)应用开发说明</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pc_tools/index.html">7. PC工具使用指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQs/index.html">8. FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feedback.html">9. 建议反馈</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">X3 用户手册</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">6. </span>量化工具链开发指南</a> &raquo;</li>
      <li><span class="section-number">6.2. </span>环境安装</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="preface_toolchain_overview.html" class="btn btn-neutral float-left" title="6.1. 简介" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="quickstart.html" class="btn btn-neutral float-right" title="6.3. 快速体验" accesskey="n">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1><span class="section-number">6.2. </span>环境安装<a class="headerlink" href="#id1" title="永久链接至标题"></a></h1>
<p>本章节主要介绍使用量化工具链前必须的环境准备工作。</p>
<section id="id2">
<h2><span class="section-number">6.2.1. </span>交付物使用说明<a class="headerlink" href="#id2" title="永久链接至标题"></a></h2>
<p>在进行量化工具链使用环境部署前，请提前解压地平线提供的整体SDK交付包，在 <code class="docutils literal notranslate"><span class="pre">ai_toolchain_package</span></code> 目录下找到量化工具链SDK的网盘下载链接，并将量化工具链SDK包下载到Linux开发机环境中。</p>
<section id="id3">
<h3><span class="section-number">6.2.1.1. </span>源码目录结构说明<a class="headerlink" href="#id3" title="永久链接至标题"></a></h3>
<p>解压量化工具链SDK源码包：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar -xvf Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X.tar.xz
</pre></div>
</div>
<p>解压后的目录结构如下：</p>
<ul class="simple">
<li><p><strong>ai_benchmark</strong>: 目录下提供了常见的分类、检测和分割模型的评测示例，包括性能评测和精度评测两部分。</p></li>
<li><p><strong>ai_toolchain</strong>: 目录下提供了一些模型算法的一系列示例。</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">horizon_model_convert_sample</span></code> 文件夹下为浮点模型转定点模型的转换示例。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">horizon_runtime_sample</span></code> 文件夹下为定点模型的上板示例。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model_zoo</span></code> 文件夹下是一个模型库，包含了工具链示例模型编译的源模型和runtime模型。</p></li>
</ol>
</li>
<li><p><strong>package</strong>: 目录下包含了发布物运行的一些基础库和组件</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">board</span></code> 文件夹下为板端可执行程序。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">host</span></code> 文件夹下为x86开发环境下的环境依赖、工具依赖以及模型推理相关的libdnn库和头文件。</p></li>
</ol>
</li>
</ul>
</section>
</section>
<section id="id4">
<h2><span class="section-number">6.2.2. </span>开发机部署<a class="headerlink" href="#id4" title="永久链接至标题"></a></h2>
<p>对于开发机的环境部署，地平线支持使用Docker和手工安装两种方式，您只需要选择其中一种即可。</p>
<div class="admonition hint">
<p class="admonition-title">提示</p>
<p>地平线强烈建议您使用Docker方式，以避免在安装过程中出现问题。</p>
</div>
<section id="id5">
<h3><span class="section-number">6.2.2.1. </span>开发机准备<a class="headerlink" href="#id5" title="永久链接至标题"></a></h3>
<p>为了顺利地使用量化工具链，地平线建议您选择的开发机应满足以下要求：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>硬件/操作系统</p></th>
<th class="head"><p>要求</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPU</p></td>
<td><p>CPU I3以上或者同级别E3/E5的处理器</p></td>
</tr>
<tr class="row-odd"><td><p>内存</p></td>
<td><p>16G或以上级别</p></td>
</tr>
<tr class="row-even"><td><p>GPU(可选)</p></td>
<td><p>CUDA11、驱动版本Linux:&gt;= 450.80.02*</p>
<p>适配显卡包括但不限于：</p>
<p>1)GeForce RTX 3090</p>
<p>2)GeForce RTX 2080 Ti</p>
<p>3)NVIDIA TITAN V</p>
<p>4)Tesla V100S-PCIE-32GB</p>
</td>
</tr>
<tr class="row-odd"><td><p>系统</p></td>
<td><p>CentOS 7、Ubuntu 18.04及以上</p></td>
</tr>
</tbody>
</table>
<p>更多关于CUDA与显卡的兼容性问题请参考 <a class="reference external" href="https://docs.nvidia.com/deploy/cuda-compatibility/">NVIDIA官网信息</a> 。</p>
</section>
<section id="docker">
<h3><span class="section-number">6.2.2.2. </span>使用Docker环境<a class="headerlink" href="#docker" title="永久链接至标题"></a></h3>
<p>为了帮助您快速使用量化工具链，地平线提供了包含完整开发环境的Docker镜像，大大简化了环境的部署过程。</p>
<p>在阅读此部分内容前，我们希望您的开发机中已经预装好了Docker的基础环境。
地平线要求的Docker基础环境信息如下：</p>
<ul class="simple">
<li><p>Docker（&gt;=1.12 建议安装18.03.0-ce）, 安装手册 <a class="reference external" href="https://docs.docker.com/install/">https://docs.docker.com/install/</a>。</p></li>
<li><p>NVIDIA Docker（2.0.3），安装手册 <a class="reference external" href="https://github.com/nvidia/nvidia-docker/wiki">NVIDIA/nvidia-docker</a>。</p></li>
</ul>
<p>完成Docker环境安装后，需要将无root权限的用户添加到Docker用户组中。参考如下命令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupadd docker
sudo gpasswd -a <span class="si">${</span><span class="nv">USER</span><span class="si">}</span> docker
sudo systemctl restart docker  <span class="c1"># CentOS7/Ubuntu</span>
<span class="c1"># re-login</span>
</pre></div>
</div>
<p>请从 <a class="reference external" href="https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/">地平线天工开物cpu docker hub</a> ，获取模型转换编译需要使用的Docker镜像。
Docker镜像文件命名形式为 <code class="docutils literal notranslate"><span class="pre">openexplorer/ai_toolchain_centos_7_xj3:{version}</span></code>。</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>执行命令时将 <code class="docutils literal notranslate"><span class="pre">{version}</span></code> 替换为您获取到的量化工具链SDK包版本号，例如： <code class="docutils literal notranslate"><span class="pre">ai_toolchain_package/Ai_Toolchain_Package-release-v1.16.4-OE-v2.2.3a/</span></code> ，{version}= <code class="docutils literal notranslate"><span class="pre">v2.2.3a</span></code> 。</p>
<p>本地Docker镜像包版本，可以联系地平线技术支持团队获取。</p>
<p>开发机并不是必须含有GPU卡，一般使用CPU开发机加载Docker镜像即可做模型转换！</p>
</div>
<p>每个镜像文件在第一次使用前，需要拉取镜像。</p>
<ul>
<li><p>镜像拉取命令为：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker pull openexplorer/ai_toolchain_centos_7_xj3:<span class="o">{</span>version<span class="o">}</span>
</pre></div>
</div>
</li>
</ul>
<p>然后执行以下命令运行Docker容器。</p>
<ul>
<li><p>CPU开发机Docker容器执行以下命令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>// 运行 docker 镜像的命令

<span class="nb">export</span> <span class="nv">version</span><span class="o">=</span>v2.2.3a

<span class="nb">export</span> <span class="nv">ai_toolchain_package_path</span><span class="o">=</span>/home/users/xxx/SDK/ai_toolchain_package

<span class="nb">export</span> <span class="nv">dataset_path</span><span class="o">=</span>/home/users/xxx/data/

docker run -it --rm <span class="se">\</span>
  -v <span class="s2">&quot;</span><span class="nv">$ai_toolchain_package_path</span><span class="s2">&quot;</span>:/open_explorer <span class="se">\</span>
  -v <span class="s2">&quot;</span><span class="nv">$dataset_path</span><span class="s2">&quot;</span>:/data <span class="se">\</span>
  openexplorer/ai_toolchain_centos_7_xj3:<span class="s2">&quot;</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</li>
<li><p>GPU开发机 Docker容器执行以下命令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>// 运行 docker 镜像的命令

<span class="nb">export</span> <span class="nv">version</span><span class="o">=</span>v2.2.3a

<span class="nb">export</span> <span class="nv">ai_toolchain_package_path</span><span class="o">=</span>/home/users/xxx/SDK/ai_toolchain_package

<span class="nb">export</span> <span class="nv">dataset_path</span><span class="o">=</span>/home/users/xxx/data/

docker run -it --runtime<span class="o">=</span>nvidia -e <span class="nv">NVIDIA_DRIVER_CAPABILITIES</span><span class="o">=</span>compute,utility <span class="se">\</span>
  -e <span class="nv">NVIDIA_VISIBLE_DEVICES</span><span class="o">=</span>all --rm --shm-size<span class="o">=</span><span class="s2">&quot;15g&quot;</span> <span class="se">\</span>
  -v <span class="s2">&quot;</span><span class="nv">$ai_toolchain_package_path</span><span class="s2">&quot;</span>:/open_explorer <span class="se">\</span>
  -v <span class="s2">&quot;</span><span class="nv">$dataset_path</span><span class="s2">&quot;</span>:/data <span class="se">\</span>
  openexplorer/ai_toolchain_centos_7_xj3:<span class="s2">&quot;</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>在执行上述命令时：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_path</span></code> 为数据集文件目录，如果该目录不存在会导致加载问题，需要创建好后再运行命令。
您可以从 <code class="docutils literal notranslate"><span class="pre">ftp://vrftp.horizon.ai/Open_Explorer/eval_dataset</span></code> 获取数据集，然后创建该路径。</p></li>
</ul>
</div>
<p>至此，您已经成功通过Docker镜像进入完整的量化工具链开发环境。
您可以键入 <code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">--help</span></code> 命令验证是否可以正常得到帮助信息：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@d67382e74eea open_explorer<span class="o">]</span><span class="c1"># hb_mapper --help</span>
Usage: hb_mapper <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...

  hb_mapper is an offline model transform tool provided by horizon.

Options:
  --version  Show the version and exit.
  --help     Show this message and exit.

Commands:
  checker    check whether the model meet the requirements.
  infer      inference and dump output feature as float vector.
  makertbin  transform caffe model to quantization model, generate runtime...
</pre></div>
</div>
<p>若hb_mapper工具已正常输出日志， 说明环境已安装部署完成，请到 <strong>开发板部署</strong> 章节，进行开发板的环境安装。</p>
</section>
<section id="id6">
<h3><span class="section-number">6.2.2.3. </span>手工安装环境<a class="headerlink" href="#id6" title="永久链接至标题"></a></h3>
<div class="admonition hint">
<p class="admonition-title">提示</p>
<p>一般不推荐使用手工安装方式部署环境，强烈建议使用Docker镜像环境！</p>
</div>
<p>在执行手动安装前，地平线建议您选择的开发机需满足 <strong>开发机准备</strong> 章节的环境要求外，同时也需要满足以下软件环境要求：</p>
<ul class="simple">
<li><p>Python3.6</p></li>
<li><p>libpython3.6</p></li>
<li><p>python3-devel</p></li>
<li><p>python3-pip</p></li>
<li><p>gcc&amp;c++: 5.4.0</p></li>
<li><p>graphviz</p></li>
</ul>
<p>确认满足以上条件后，手工安装过程需要您依次完成： <strong>交叉编译器安装</strong> 、 <strong>AI和其他开发工具安装</strong> 两个步骤。</p>
<ol class="arabic simple">
<li><p><strong>交叉编译器安装</strong></p></li>
</ol>
<blockquote>
<div><p>gcc交叉编译器安装请阅读 <a class="reference external" href="../../bsp_develop/Bsp_Develop.html#id1">安装交叉编译工具链</a> 章节内容。</p>
<p>解压安装完成后，另外您需要在环境中新增一个变量 <code class="docutils literal notranslate"><span class="pre">LINARO_GCC_ROOT</span></code>，给其复制为交叉编译器的完整路径，命令如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LINARO_GCC_ROOT</span><span class="o">=</span>/opt/gcc-ubuntu-9.3.0-2020.03-x86_64-aarch64-linux-gnu/
</pre></div>
</div>
<p>要想 LINARO_GCC_ROOT 的配置永久生效，需要把以上命令添加到环境变量文件 “~/.bashrc” 的最后一行, 然后执行“source ~/.bashrc”命令，激活配置。</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><strong>AI和其他开发工具安装</strong></p></li>
</ol>
<blockquote>
<div><p>手动安装环境包请根据对应的版本下载， <code class="docutils literal notranslate"><span class="pre">version</span></code> 为您实际获取到的发布包版本。例如： <code class="docutils literal notranslate"><span class="pre">Ai_Toolchain_Package-release-v1.16.4-OE-v2.2.3a/</span></code>  version=v2.2.3a。</p>
<p>进入安装包 <code class="docutils literal notranslate"><span class="pre">Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/host/</span></code>，执行以下命令启动安装：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash install.sh
</pre></div>
</div>
<p>安装脚本会自动检查相应的环境，缺少相应依赖或配置会中断安装过程，并给出修正建议如下图。</p>
<img alt="../_images/ai_tool_installation.png" src="../_images/ai_tool_installation.png" />
<p>请您根据建议补充依赖后，重新执行install脚本即可。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果修正建议指出是gcc/g++版本不符合要求，在安装完指定版本之后，您需要进入gcc/g++的安装目录下(一般在/usr/bin目录下)重新建立gcc和g++软链接：ln -s gcc-5.4.0 gcc 和 ln -s g++-5.4.0 g++</p>
</div>
</div></blockquote>
<p>在顺利完成安装后，您可以键入 <code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">--help</span></code> 命令验证是否可以正常得到帮助信息：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@d67382e74eea open_explorer<span class="o">]</span><span class="c1"># hb_mapper --help</span>
Usage: hb_mapper <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...

  hb_mapper is an offline model transform tool provided by horizon.

Options:
  --version  Show the version and exit.
  --help     Show this message and exit.

Commands:
  checker    check whether the model meet the requirements.
  infer      inference and dump output feature as float vector.
  makertbin  transform caffe model to quantization model, generate runtime...
</pre></div>
</div>
<p>若hb_mapper工具已正常输出日志， 说明环境已安装部署完成，请到 <strong>开发板部署</strong> 章节，进行开发板的环境安装。</p>
</section>
</section>
<section id="id8">
<h2><span class="section-number">6.2.3. </span>开发板部署<a class="headerlink" href="#id8" title="永久链接至标题"></a></h2>
<p>开发板部署需要您按照刷机说明，升级开发板的系统镜像到地平线整包交付物SDK对应的版本。开发板刷机步骤请阅读章节  <a class="reference external" href="../quick_start/Firmware_Update.html">镜像升级方法</a>，刷机完成后，再将相关补充文件拷贝到开发板中即可。</p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>开发板使用的系统镜像版本一定要和量化工具链SDK版本匹配，均使用地平线整包交付物SDK版本</p>
</div>
<section id="id10">
<h3><span class="section-number">6.2.3.1. </span>补充文件准备<a class="headerlink" href="#id10" title="永久链接至标题"></a></h3>
<p>量化工具链的部分补充工具未包含在系统镜像中，这些工具已经放置在 <code class="docutils literal notranslate"><span class="pre">Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/</span></code> 安装包中，
进入到 <code class="docutils literal notranslate"><span class="pre">Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/board</span></code> 执行install脚本。
执行命令如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash install.sh <span class="si">${</span><span class="nv">board_ip</span><span class="si">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>其中，<code class="docutils literal notranslate"><span class="pre">${board_ip}</span></code> 是您为开发板设置的IP地址，请确保在开发机上可以访问该IP。
成功安装后，重新启动开发板，在开发板上执行 <code class="docutils literal notranslate"><span class="pre">hrt_model_exec</span></code> 可以验证安装是否成功。</p>
</div>
</section>
</section>
<section id="id11">
<h2><span class="section-number">6.2.4. </span>版本管理工具使用说明<a class="headerlink" href="#id11" title="永久链接至标题"></a></h2>
<p>本章节主要介绍ddk_vcs版本管理工具的使用说明，便于开发者了解当前开发机环境中量化工具链依赖包的版本情况。</p>
<p>工具包括以下功能：</p>
<ul class="simple">
<li><p>ddk_vcs list;</p></li>
<li><p>ddk_vcs install;</p></li>
<li><p>ddk_vcs uninstall;</p></li>
<li><p>ddk_vcs patch;</p></li>
<li><p>ddk_vcs show;</p></li>
</ul>
<section id="ddk-vcs-list">
<h3><span class="section-number">6.2.4.1. </span>ddk_vcs list<a class="headerlink" href="#ddk-vcs-list" title="永久链接至标题"></a></h3>
<p>ddk_vcs list 用于列出已安装的软件包。</p>
<p>不加参数执行此命令时，结果会展示当前已安装的各个模块的信息。使用示例如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>horizon@gpu-dev067 ai_toolchain<span class="o">]</span>$ ddk_vcs list
Host package version: v2.0.3
The following packages versions
Platform        Package         Version MD5
--------------- --------------- ------- -------------
aarch_64        appsdk          <span class="m">032419</span>  093e13b44e
aarch_64        dnn             <span class="m">1</span>.8.1g  aff0f6f4de
x86_64_gcc5.4.0 dnn_x86         <span class="m">1</span>.8.1g  e8e6bf9ed5
x86             horizon-nn      <span class="m">0</span>.13.3  origin:0.13.3
x86             horizon-nn-gpu  <span class="m">0</span>.13.3  origin:N/A
x86             horizon-tc-ui   <span class="m">1</span>.6.4   origin:1.6.4
x86             hbdk            <span class="m">3</span>.28.3  origin:3.28.3
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>最后几行的origin信息会在每次使用OE包内的install脚本进行安装后更新为当前环境下的版本，
后续在使用ddk_vcs进行安装时则不会改变，只会改变Version的值。</p>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">-p</span></code> 参数以后会显示当前可以安装的模块版本情况，可以通过 <code class="docutils literal notranslate"><span class="pre">ddk_vcs</span> <span class="pre">install</span></code> 进行安装，使用示例如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>horizon@gpu-dev004<span class="o">]</span>$ ddk_vcs list -p
Host package version: <span class="m">1</span>.5.1
The following packages versions
Platform        Local Package                 Version MD5
--------------- ----------------------------- ------- ----------
aarch_64        appsdk_1.9.0.tar.gz           <span class="m">1</span>.9.0   bf01140c9d
aarch_64        bpu_predict_1.10.2.tar.gz     <span class="m">1</span>.10.2  5b6e5dd6c5
aarch_64        dnn_1.1.2a.tar.gz             <span class="m">1</span>.1.2a  fdb5729f4f
x86_64_gcc5.4.0 bpu_predict_1.10.2.tar.gz     <span class="m">1</span>.10.2  4dbdd980a7
x86_64_gcc5.4.0 dnn_x86_1.1.2a.tar.gz         <span class="m">1</span>.1.2a  5bf5fcd4fe
</pre></div>
</div>
</section>
<section id="ddk-vcs-install">
<h3><span class="section-number">6.2.4.2. </span>ddk_vcs install<a class="headerlink" href="#ddk-vcs-install" title="永久链接至标题"></a></h3>
<p>ddk_vcs install 用于对安装包进行安装。
用户可以直接通过 <code class="docutils literal notranslate"><span class="pre">ddk_vcs</span> <span class="pre">install</span></code> 将对应的模块tar包进行安装。安装时需要指定对应的platform。使用示例如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>horizon@gpu-dev004<span class="o">]</span>$ ddk_vcs install bpu_predict_1.10.2.tar.gz -p aarch_64
bpu_predict installed successfully, version: <span class="m">1</span>.10.2, platform: aarch_64
<span class="o">[</span>horizon@gpu-dev067 ai_toolchain<span class="o">]</span>$ ddk_vcs install hbdk-3.28.3-py3-none-linux_x86_64.whl  horizon_nn-0.13.3-py3-none-any.whl
hbdk-3.28.3-py3-none-linux_x86_64.whl installed successfully
horizon_nn-0.13.3-py3-none-any.whl installed successfully
</pre></div>
</div>
<p>在使用 <code class="docutils literal notranslate"><span class="pre">ddk_vcs</span> <span class="pre">list</span> <span class="pre">-p</span></code> 后用户可以得到自己当前host package中各个模块包的版本信息，
然后使用 <code class="docutils literal notranslate"><span class="pre">ddk_vcs</span> <span class="pre">install</span></code> 可以很方便地切换各个版本，使用示例如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>horizon@gpu-dev004<span class="o">]</span>$ ddk_vcs install <span class="nv">bpu_predict</span><span class="o">==</span><span class="m">1</span>.7.2  --platform aarch_64
bpu_predict installed successfully, version: <span class="m">1</span>.7.2, platform: aarch_64
</pre></div>
</div>
<p>如果本地没有对应版本可以指定安装包位置进行安装。</p>
</section>
<section id="ddk-vcs-uninstall">
<h3><span class="section-number">6.2.4.3. </span>ddk_vcs uninstall<a class="headerlink" href="#ddk-vcs-uninstall" title="永久链接至标题"></a></h3>
<p>ddk_vcs uninstall 用于卸载指定模块。使用示例如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>horizon@gpu-dev004<span class="o">]</span>$ ddk_vcs uninstall bpu_predict --platform aarch_64
Start to uninstall modules, platform: aarch_64
bpu_predict uninstalled successfully, version: <span class="m">1</span>.10.2, platform: aarch_64
</pre></div>
</div>
</section>
<section id="ddk-vcs-patch">
<h3><span class="section-number">6.2.4.4. </span>ddk_vcs patch<a class="headerlink" href="#ddk-vcs-patch" title="永久链接至标题"></a></h3>
<p>使用 <code class="docutils literal notranslate"><span class="pre">ddk_vcs</span> <span class="pre">patch</span> <span class="pre">ddk_patch.tar.gz</span></code> 可以安装预先制作好的patch包。使用示例如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>horizon@gpu-dev004<span class="o">]</span>$ ddk_vcs patch ddk_patch.tar.gz
bpu_predict installed successfully, version: <span class="m">1</span>.7.2_patch0, platform: aarch64
</pre></div>
</div>
</section>
<section id="ddk-vcs-show">
<h3><span class="section-number">6.2.4.5. </span>ddk_vcs show<a class="headerlink" href="#ddk-vcs-show" title="永久链接至标题"></a></h3>
<p>ddk_vcs show 用于显示有关已安装软件包的信息。使用 <code class="docutils literal notranslate"><span class="pre">ddk_vcs</span> <span class="pre">show</span> <span class="pre">[模块名]</span></code> ，可以展示对应模块的信息。使用示例如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>horizon@gpu-dev004<span class="o">]</span>$ ddk_vcs show bpu_predict
Host package version <span class="m">1</span>.5.1
The following packages versions
Platform        Package     Version       MD5
--------------- ----------- ------------- ----------
aarch_64        bpu_predict <span class="m">1</span>.10.2        5b6e5dd6c5
x86_64_gcc5.4.0 bpu_predict <span class="m">1</span>.10.2_patch1 d4f8e37921
</pre></div>
</div>
<p>如果2个架构内有同名依赖，可以使用 <code class="docutils literal notranslate"><span class="pre">-p/--platform</span></code> 指定架构名进行过滤。使用示例如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>horizon@gpu-dev004<span class="o">]</span>$ ddk_vcs show bpu_predict -p aarch_64
Host package version <span class="m">1</span>.5.1
The following packages versions
Platform Package     Version MD5
-------- ----------- ------- ----------
aarch_64 bpu_predict <span class="m">1</span>.10.2  5b6e5dd6c5
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="preface_toolchain_overview.html" class="btn btn-neutral float-left" title="6.1. 简介" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="quickstart.html" class="btn btn-neutral float-right" title="6.3. 快速体验" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, Horizon Robotics.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>