<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.4. ISP图像系统 &mdash; X3 用户手册 1.0.1 文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/horizon_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/horizon.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/hobot.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="5.5. 视频处理" href="5-Video_Processing_zh_CN.html" />
    <link rel="prev" title="5.3. 视频输入" href="3-Video_Input_zh_CN.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> X3 用户手册
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface/index.html">1. 前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/index.html">2. 快速入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samples/index.html">3. Demo使用指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsp_develop/index.html">4. BSP开发指南</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">5. 多媒体开发指南</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-Overview_zh_CN.html">5.1. 系统概述</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-System_Control_zh_CN.html">5.2. 系统控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-Video_Input_zh_CN.html">5.3. 视频输入</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.4. ISP图像系统</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">5.4.1. 概述</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ae">5.4.1.1. AE</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id2">重要概念</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id3">基本原理</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#awb">5.4.1.2. AWB</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id4">重要概念</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id5">基本原理</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#demosaic">5.4.1.3. Demosaic</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sharpen">5.4.1.4. Sharpen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gamma">5.4.1.5. Gamma</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iridix">5.4.1.6. Iridix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cnr">5.4.1.7. CNR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ccm">5.4.1.8. CCM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sinter">5.4.1.9. Sinter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#temper">5.4.1.10. Temper</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mesh-shading">5.4.1.11. Mesh Shading</a></li>
<li class="toctree-l4"><a class="reference internal" href="#radial-shading">5.4.1.12. Radial Shading</a></li>
<li class="toctree-l4"><a class="reference internal" href="#color-space-conversion">5.4.1.13. Color Space Conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">5.4.1.14. 统计信息</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id7">AWB统计信息</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id8">AE统计信息</a></li>
<li class="toctree-l5"><a class="reference internal" href="#bin">5-bin直方图</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id9">1024-bin直方图</a></li>
<li class="toctree-l5"><a class="reference internal" href="#af">AF统计信息</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id10">AF度量数据计算</a></li>
<li class="toctree-l5"><a class="reference internal" href="#auto-level">Auto Level统计信息</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id11">平均亮度和平均亮度方差统计信息</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id12">5.4.2. 功能描述</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">5.4.2.1. 交互数据</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#isp-firmware">算法库与ISP Firmware交互框图</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id14">算法库与ISP Firmware交互数据</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#a">5.4.2.2. 3A开发说明</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id15">AE算法注册</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id16">AWB算法注册</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id17">AF算法注册</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id18">算法注册举例</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#api">5.4.3. API参考</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setfwstate-hb-isp-getfwstate">5.4.3.1. HB_ISP_SetFWState/HB_ISP_GetFWState</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setregister-hb-isp-getregister">5.4.3.2. HB_ISP_SetRegister/HB_ISP_GetRegister</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setmodulecontrol-hb-isp-getmodulecontrol">5.4.3.3. HB_ISP_SetModuleControl/ HB_ISP_GetModuleControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-switchscence">5.4.3.4. HB_ISP_SwitchScence</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-starti2cbus-hb-isp-stopi2cbus">5.4.3.5. HB_ISP_StartI2CBus/HB_ISP_StopI2CBus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-sendi2cdata">5.4.3.6. HB_ISP_SendI2CData</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-aelibregcallback">5.4.3.7. HB_ISP_AELibRegCallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awblibregcallback">5.4.3.8. HB_ISP_AWBLibRegCallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-aflibregcallback">5.4.3.9. HB_ISP_AFLibRegCallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-aelibunregcallback">5.4.3.10. HB_ISP_AELibUnRegCallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awblibunregcallback">5.4.3.11. HB_ISP_AWBLibUnRegCallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-aflibunregcallback">5.4.3.12. HB_ISP_AFLibUnRegCallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getsetinit-hb-isp-getsetexit">5.4.3.13. HB_ISP_GetSetInit/HB_ISP_GetSetExit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setaeattr-hb-isp-getaeattr">5.4.3.14. HB_ISP_SetAeAttr/HB_ISP_GetAeAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setafattr-hb-isp-getafattr">5.4.3.15. HB_ISP_SetAfAttr/HB_ISP_GetAfAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbattr-hb-isp-getawbattr">5.4.3.16. HB_ISP_SetAwbAttr/HB_ISP_GetAwbAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setblacklevelattr-hb-isp-getblacklevelattr">5.4.3.17. HB_ISP_SetBlackLevelAttr/HB_ISP_GetBlackLevelAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setdemosaicattr-hb-isp-getdemosaicattr">5.4.3.18. HB_ISP_SetDemosaicAttr/HB_ISP_GetDemosaicAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setsharpenattr-hb-isp-getsharpenattr">5.4.3.19. HB_ISP_SetSharpenAttr/HB_ISP_GetSharpenAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setgammaattr-hb-isp-getgammaattr">5.4.3.20. HB_ISP_SetGammaAttr/HB_ISP_GetGammaAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setiridixattr-hb-isp-getiridixattr">5.4.3.21. HB_ISP_SetIridixAttr/HB_ISP_GetIridixAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setiridixstrengthlevel-hb-isp-getiridixstrengthlevel">5.4.3.22. HB_ISP_SetIridixStrengthLevel/HB_ISP_GetIridixStrengthLevel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setcnrattr-hb-isp-getcnrattr">5.4.3.23. HB_ISP_SetCnrAttr/HB_ISP_GetCnrAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setsinterattr-hb-isp-getsinterattr">5.4.3.24. HB_ISP_SetSinterAttr/HB_ISP_GetSinterAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-settemperattr-hb-isp-gettemperattr">5.4.3.25. HB_ISP_SetTemperAttr/HB_ISP_GetTemperAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setmeshshadingattr-hb-isp-getmeshshadingattr">5.4.3.26. HB_ISP_SetMeshShadingAttr/HB_ISP_GetMeshShadingAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setmeshshadinglut-hb-isp-getmeshshadinglut">5.4.3.27. HB_ISP_SetMeshShadingLUT/HB_ISP_GetMeshShadingLUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setradialshadingattr-hb-isp-getradialshadingattr">5.4.3.28. HB_ISP_SetRadialShadingAttr/HB_ISP_GetRadialShadingAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setradialshadinglut-hb-isp-getradialshadinglut">5.4.3.29. HB_ISP_SetRadialShadingLUT/HB_ISP_GetRadialShadingLUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setcscattr-hb-isp-getcscattr">5.4.3.30. HB_ISP_SetCSCAttr/HB_ISP_GetCSCAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setscenemodesattr-hb-isp-getscenemodesattr">5.4.3.31. HB_ISP_SetSceneModesAttr/HB_ISP_GetSceneModesAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbzoneinfo-hb-isp-getawbzoneinfo">5.4.3.32. HB_ISP_SetAwbZoneInfo/HB_ISP_GetAwbZoneInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setafzoneinfo-hb-isp-getafzoneinfo">5.4.3.33. HB_ISP_SetAfZoneInfo/HB_ISP_GetAfZoneInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setae5binzoneinfo-hb-isp-getae5binzoneinfo">5.4.3.34. HB_ISP_SetAe5binZoneInfo/HB_ISP_GetAe5binZoneInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setafkernelinfo-hb-isp-getafkernelinfo">5.4.3.35. HB_ISP_SetAfKernelInfo/HB_ISP_GetAfKernelInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setaeparam-hb-isp-getaeparam">5.4.3.36. HB_ISP_SetAeParam/HB_ISP_GetAeParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setaeroiinfo-hb-isp-getaeroiinfo">5.4.3.37. HB_ISP_SetAeRoiInfo/HB_ISP_GetAeRoiInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbstatareaattr-hb-isp-getawbstatareaattr">5.4.3.38. HB_ISP_SetAwbStatAreaAttr/HB_ISP_GetAwbStatAreaAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getaefullhist">5.4.3.39. HB_ISP_GetAeFullHist</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getawbzonehist">5.4.3.40. HB_ISP_GetAwbZoneHist</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getae5binzonehist">5.4.3.41. HB_ISP_GetAe5binZoneHist</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getafzonehist">5.4.3.42. HB_ISP_GetAfZoneHist</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getmeteringdata">5.4.3.43. HB_ISP_GetMeteringData</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getvdttimeout">5.4.3.44. HB_ISP_GetVDTTimeOut</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getlumazonehist">5.4.3.45. HB_ISP_GetLumaZoneHist</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setaecontrol-hb-isp-getaecontrol">5.4.3.46. HB_ISP_SetAEControl/ HB_ISP_GetAEControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setaecorrection-hb-isp-getaecorrection">5.4.3.47. HB_ISP_SetAECorrection/ HB_ISP_GetAECorrection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-set-ae-5bin-hist-hb-isp-get-ae-5bin-hist">5.4.3.48. HB_ISP_Set_AE_5bin_Hist/ HB_ISP_Get_AE_5bin_Hist</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setexposureratioadjustment-hb-isp-getexposureratioadjustment">5.4.3.49. HB_ISP_SetExposureRatioAdjustment/ HB_ISP_GetExposureRatioAdjustment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setexposurepartitionluts-hb-isp-getexposurepartitionluts">5.4.3.50. HB_ISP_SetExposurePartitionLuts/ HB_ISP_GetExposurePartitionLuts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbbgmaxgain-hb-isp-getawbbgmaxgain">5.4.3.51. HB_ISP_SetAwbBgMaxGain/HB_ISP_GetAwbBgMaxGain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setccmsaturationstrength-hb-isp-getccmsaturationstrength">5.4.3.52. HB_ISP_SetCcmSaturationStrength/ HB_ISP_GetCcmSaturationStrength</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setccmmtls-hb-isp-getccmmtls">5.4.3.53. HB_ISP_SetCcmMtLs/ HB_ISP_GetCcmMtLs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setccmattr-hb-isp-getccmattr">5.4.3.54. HB_ISP_SetCcmAttr/HB_ISP_GetCcmAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setgammaev1-hb-isp-getgammaev1">5.4.3.55. HB_ISP_SetGammaEv1/HB_ISP_GetGammaEv1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setgammaev2-hb-isp-getgammaev2">5.4.3.56. HB_ISP_SetGammaEv2/HB_ISP_GetGammaEv2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setgammathreshold-hb-isp-getgammathreshold">5.4.3.57. HB_ISP_SetGammaThreshold/ HB_ISP_GetGammaThreshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getevtoluxstatustattr-hb-isp-setevtoluxstatustattr">5.4.3.58. HB_ISP_GetEvToLuxStatustAttr/ HB_ISP_SetEvToLuxStatustAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setcctctrlattr-hb-isp-getcctctrlattr">5.4.3.59. HB_ISP_SetCctCtrlAttr/ HB_ISP_GetCctCtrlAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbavgcoeff-hb-isp-getawbavgcoeff">5.4.3.60. HB_ISP_SetAwbAvgCoeff/HB_ISP_GetAwbAvgCoeff</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setmixlightattr-hb-isp-getmixlightattr">5.4.3.61. HB_ISP_SetMixLightAttr/HB_ISP_GetMixLightAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setskyctrlattr-hb-isp-getskyctrlattr">5.4.3.62. HB_ISP_SetSkyCtrlAttr/ HB_ISP_GetSkyCtrlAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-apictrl">5.4.3.63. HB_ISP_ApiCtrl</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-gettemplut-hb-isp-settemplut">5.4.3.64. HB_ISP_GetTempLut/ HB_ISP_SetTempLut</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbrgbgweightattr-hb-isp-getawbrgbgweightattr">5.4.3.65. HB_ISP_SetAwbRgBgWeightAttr/ HB_ISP_GetAwbRgBgWeightAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getawblsweightatt-hb-isp-setawblsweightattr">5.4.3.66. HB_ISP_GetAwbLsWeightAtt/ HB_ISP_SetAwbLsWeightAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getawbdefultparmattr-hb-isp-setawbdefultparmattr">5.4.3.67. HB_ISP_GetAwbDefultParmAttr/ HB_ISP_SetAwbDefultParmAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbcolortempweightattr-hb-isp-getawbcolortempweightattr">5.4.3.68. HB_ISP_SetAwbColorTempWeightAttr/ HB_ISP_GetAwbColorTempWeightAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbposstatusattr-hb-isp-getawbposstatusattr">5.4.3.69. HB_ISP_SetAwbPosStatusAttr/ HB_ISP_GetAwbPosStatusAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawblightsourceattr-hb-isp-getawblightsourceattr">5.4.3.70. HB_ISP_SetAwbLightSourceAttr/ HB_ISP_GetAwbLightSourceAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getwdroffsetattr-hb-isp-setwdroffsetattr">5.4.3.71. HB_ISP_GetWdrOffsetAttr/ HB_ISP_SetWdrOffsetAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-sethdraexptypeattr">5.4.3.72. HB_ISP_SetHdrAexpTypeAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getafstatus">5.4.3.73. HB_ISP_GetAfStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getafinfo">5.4.3.74. HB_ISP_GetAfInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setafmanualpos">5.4.3.75. HB_ISP_SetAfManualPos</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setflickerstatus-hb-isp-getflickerstatus">5.4.3.76. HB_ISP_SetFlickerStatus/HB_ISP_GetFlickerStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setaeattrex-hb-isp-getaeattrex">5.4.3.77. HB_ISP_SetAeAttrEx/HB_ISP_GetAeAttrEx</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getaeweight-hb-isp-setaeweight">5.4.3.78. HB_ISP_GetAeWeight/HB_ISP_SetAeWeight</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-getaeminintertime-hb-isp-setaeminintertime">5.4.3.79. HB_ISP_GetAeMinIntertime/HB_ISP_SetAeMinIntertime</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-getawbtemperatureinfo">5.4.3.80. HB_GetAwbTemperatureInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setawbtolerance">5.4.3.81. HB_ISP_SetAwbTolerance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-getawbmodeinfo-hb-setawbmodeinfo">5.4.3.82. HB_GetAwbModeInfo/HB_SetAwbModeInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-getawbgainbytemp">5.4.3.83. HB_GetAwbGainByTemp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-setafspeed">5.4.3.84. HB_ISP_SetAfSpeed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id19">5.4.4. 数据结构</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-fw-state-e">5.4.4.1. HB_ISP_FW_STATE_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-module-ctrl-u">5.4.4.2. HB_ ISP_MODULE_CTRL_U</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-i2c-data-s">5.4.4.3. HB_ISP_I2C_DATA_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ae-func-s">5.4.4.4. HB_ISP_AE_FUNC_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ae-stats-data-t">5.4.4.5. ae_stats_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ae-input-data-t">5.4.4.6. ae_input_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ae-acamera-input-t">5.4.4.7. ae_acamera_input_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ae-output-data-t">5.4.4.8. ae_output_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ae-acamera-output-t">5.4.4.9. ae_acamera_output_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ae-out-info-t">5.4.4.10. ae_out_info_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ae-1024bin-weight-t">5.4.4.11. ae_1024bin_weight_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awb-func-s">5.4.4.12. HB_ISP_AWB_FUNC_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#awb-stats-data-t">5.4.4.13. awb_stats_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#awb-zone-t">5.4.4.14. awb_zone_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#awb-input-data-t">5.4.4.15. awb_input_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#awb-acamera-input-t">5.4.4.16. awb_acamera_input_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#awb-output-data-t">5.4.4.17. awb_output_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#awb-acamera-output-t">5.4.4.18. awb_acamera_output_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-af-func-s">5.4.4.19. HB_ISP_AF_FUNC_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#af-stats-data-t">5.4.4.20. af_stats_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#af-input-data-t">5.4.4.21. af_input_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#af-acamera-input-t">5.4.4.22. af_acamera_input_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#af-output-data-t">5.4.4.23. af_output_data_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#af-acamera-output-t">5.4.4.24. af_acamera_output_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-op-type-e">5.4.4.25. HB_ISP_OP_TYPE_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ae-attr-s">5.4.4.26. HB_ISP_AE_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-af-attr-s">5.4.4.27. HB_ISP_AF_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awb-attr-s">5.4.4.28. HB_ISP_AWB_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-black-level-attr-s">5.4.4.29. HB_ISP_BLACK_LEVEL_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-demosaic-attr-s">5.4.4.30. HB_ISP_DEMOSAIC_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-sharpen-attr-s">5.4.4.31. HB_ISP_SHARPEN_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-gamma-attr-s">5.4.4.32. HB_ISP_GAMMA_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#isp-iridix-attr-s">5.4.4.33. ISP_IRIDIX_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-cnr-attr-s">5.4.4.34. HB_ISP_CNR_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-sinter-attr-s">5.4.4.35. HB_ISP_SINTER_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-temper-attr-s">5.4.4.36. HB_ISP_TEMPER_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-mesh-shading-attr-s">5.4.4.37. HB_MESH_SHADING_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-mesh-shading-lut-s">5.4.4.38. HB_MESH_SHADING_LUT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-radial-shading-attr-s">5.4.4.39. HB_RADIAL_SHADING_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-radial-shading-lut-s">5.4.4.40. HB_RADIAL_SHADING_LUT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-csc-attr-s">5.4.4.41. HB_ISP_CSC_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-scene-modes-attr-s">5.4.4.42. HB_ISP_SCENE_MODES_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-statistics-awb-zone-attr-s">5.4.4.43. HB_ISP_STATISTICS_AWB_ZONE_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-statistics-ae-5bin-zone-attr-s">5.4.4.44. HB_ISP_STATISTICS_AE_5BIN_ZONE_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ae-param-s">5.4.4.45. HB_ISP_AE_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ae-roi-attr-s">5.4.4.46. HB_ISP_AE_ROI_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#isp-zone-attr-s">5.4.4.47. ISP_ZONE_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-statistics-lumvar-zone-attr-s">5.4.4.48. HB_ISP_STATISTICS_LUMVAR_ZONE_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#isp-awb-stat-area-attr-s">5.4.4.49. ISP_AWB_STAT_AREA_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ae-control">5.4.4.50. HB_ISP_AE_CONTROL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ae-correction">5.4.4.51. HB_ISP_AE_CORRECTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-5bin-hist">5.4.4.52. HB_ISP_5BIN_HIST</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-exp-ratio-adj">5.4.4.53. HB_ISP_EXP_RATIO_ADJ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-exp-pat-luts">5.4.4.54. HB_ISP_EXP_PAT_LUTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awb-max-bgain">5.4.4.55. HB_ISP_AWB_MAX_BGAIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ccm-satura-streng">5.4.4.56. HB_ISP_CCM_SATURA_STRENG</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-mt-absolute-ls">5.4.4.57. HB_ISP_MT_ABSOLUTE_LS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ccm-one-gain-threshold">5.4.4.58. HB_ISP_CCM_ONE_GAIN_THRESHOLD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-gamma-ev1">5.4.4.59. HB_ISP_GAMMA_EV1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-gamma-ev2">5.4.4.60. HB_ISP_GAMMA_EV2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-gamma-threshold">5.4.4.61. HB_ISP_GAMMA_THRESHOLD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awb-cct-ctrl-s">5.4.4.62. HB_ISP_AWB_CCT_CTRL_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-mix-light-param-s">5.4.4.63. HB_ISP_MIX_LIGHT_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-sky-param-s">5.4.4.64. HB_ISP_SKY_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-tmper-np-lut-s">5.4.4.65. HB_TMPER_NP_LUT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-mesh-rgbg-weight-s">5.4.4.66. HB_ISP_MESH_RGBG_WEIGHT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-mesh-ls-weight-s">5.4.4.67. HB_ ISP_MESH_LS_WEIGHT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awb-default-param-s">5.4.4.68. HB_ ISP_AWB_DEFAULT_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-mesh-color-temp-weight-s">5.4.4.69. HB_ISP_MESH_COLOR_TEMP_WEIGHT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awb-pos-status-s">5.4.4.70. HB_ISP_AWB_POS_STATUS_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-awb-light-source-s">5.4.4.71. HB_ISP_AWB_LIGHT_SOURCE_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-wdr-offset-s">5.4.4.72. HB_ISP_WDR_OFFSET_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-af-lens-info-s">5.4.4.73. HB_ISP_AF_LENS_INFO_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-isp-ae-attr-ex-s">5.4.4.74. HB_ISP_AE_ATTR_EX_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-ae-zones-weight-s">5.4.4.75. HB_AE_ZONES_WEIGHT_S</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id20">补充说明：</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id21">5.4.5. 参考代码</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="5-Video_Processing_zh_CN.html">5.5. 视频处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="6-Region_Processing_zh_CN.html">5.6. 区域处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="7-Video_Output_zh_CN.html">5.7. 视频输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-Video_Encode_zh_CN.html">5.8. 视频编码</a></li>
<li class="toctree-l2"><a class="reference internal" href="9-Video_Decode_zh_CN.html">5.9. 视频解码</a></li>
<li class="toctree-l2"><a class="reference internal" href="10-ISP_Tuning_Guide/index.html">5.10. 图像调试指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-Image_Media_Module_Debugging_Guide/MU-2520-11-X3J3_Image_Media_Module_Debugging_Guide_zh_CN.html">5.11. 查询多媒体模块调试信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="12-Media_Processing_Performance_Debug_Guide.html">5.12. 多媒体性能调试</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ai_toolchain_develop/index.html">6. 量化工具链开发指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pc_tools/index.html">7. PC工具使用指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQs/index.html">8. FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feedback.html">9. 建议反馈</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">X3 用户手册</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">5. </span>多媒体开发指南</a> &raquo;</li>
      <li><span class="section-number">5.4. </span>ISP图像系统</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="3-Video_Input_zh_CN.html" class="btn btn-neutral float-left" title="5.3. 视频输入" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="5-Video_Processing_zh_CN.html" class="btn btn-neutral float-right" title="5.5. 视频处理" accesskey="n">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="isp">
<h1><span class="section-number">5.4. </span>ISP图像系统<a class="headerlink" href="#isp" title="永久链接至标题"></a></h1>
<section id="id1">
<h2><span class="section-number">5.4.1. </span>概述<a class="headerlink" href="#id1" title="永久链接至标题"></a></h2>
<section id="ae">
<h3><span class="section-number">5.4.1.1. </span>AE<a class="headerlink" href="#ae" title="永久链接至标题"></a></h3>
<p>AE算法通过分析直方图进行操作，以计算相对于校准中设置的AE target的新EV值。AE
target由算法动态控制，以确保正确曝光低动态范围场景和高动态范围场景。例如，在低动态范围场景中，AE
target将基于AE_LDR_Target（18％灰度目标）。对于高动态范围场景，该算法将动态修改AE
target，保证亮区不会过曝。本地色调映射引擎（Iridix）将确保阴影被显示并正确曝光。HDR目标值需要根据 Sensor的动态范围校准，Iridix引擎来还原低亮区域的内容 。</p>
<section id="id2">
<h4>重要概念<a class="headerlink" href="#id2" title="永久链接至标题"></a></h4>
<p>曝光时间：图像传感器内部积累电荷的时间，是pixel从开始曝光到电量被读出的这段时间，决定了sensor受光时间的长短，曝光时间可以以行长为单位。</p>
<p>曝光增益：对sensor 的输出电荷的总的放大系数，一般有数字增益和模拟增益，模拟增益引入的噪声会稍小，所以一般优先用模拟增益。</p>
</section>
<section id="id3">
<h4>基本原理<a class="headerlink" href="#id3" title="永久链接至标题"></a></h4>
<p>AE算法通过分析直方图统计并结合校准的AE目标值来得到新的EV（exposure value）值。为了兼顾低动态场景和高动态场景都能准确曝光，算法会动态的调整AE目标值。</p>
</section>
</section>
<section id="awb">
<h3><span class="section-number">5.4.1.2. </span>AWB<a class="headerlink" href="#awb" title="永久链接至标题"></a></h3>
<p>AWB模块负责实现色彩稳定，因为图像传感器对中性色调的响应取决于场景光照情况，不具有人眼的不同光照色温下的色彩恒定性，使得这些在白色和灰色等中性色调中最为明显。因此白平衡模块就需要将人眼看来白色的物体进行色彩的还原,使其在照片上也呈现为白色。AWB算法处理范围广泛的照明条件和光谱，以避免不良的偏色。</p>
<section id="id4">
<h4>重要概念<a class="headerlink" href="#id4" title="永久链接至标题"></a></h4>
<p>色温：具有一定表面温度的黑体(blackbody)的辐射光的光谱特性。</p>
<p>颜色恒常性：在照度条件发生变化时，人们对物体表面颜色的知觉趋于稳定的心理倾向。</p>
</section>
<section id="id5">
<h4>基本原理<a class="headerlink" href="#id5" title="永久链接至标题"></a></h4>
<p>白平衡各通道校正由AWB统计信息和算法基于静态校正结果完成的。该校正结果不会在帧数据
中更新，而是作为配置的一部分在下一帧更新。</p>
</section>
</section>
<section id="demosaic">
<h3><span class="section-number">5.4.1.3. </span>Demosaic<a class="headerlink" href="#demosaic" title="永久链接至标题"></a></h3>
<p>Demosaic单元负责从覆盖有颜色过滤器阵列（CFA）的图像传感器输出的（空间欠采样）颜色样本中重建出全彩色图像。此外，该模块提供了对图像的高级控制锐化。</p>
<p>数码相机传感器元件本身只能记录落在它们上面光线的强度，无法区分不同的颜色，因此仅产生灰度图像。要捕获颜色信息，必须在每个像素传感器上放置滤镜，它仅允许特定颜色的光通过。使用的滤镜必须能够重建——每个像素具有红色，绿色和蓝色（RGB）值的全彩色图像。这种彩色滤光片阵列最常见的类型称为“拜耳阵列”，之所以这么称呼，是因为滤镜安排每2x2像素组以RGGB方式排列。</p>
<p>所有像素的一半是绿色（G），四分之一是红色（R）和蓝色（B）。与蓝色同一行中的绿色单元格标记为Gb，与红色同一行中的绿色单元格标记为Gr。模式可以以R，Gr，Gb或B中的任何一个开头。<img alt="../_images/5bfd1de8f3d9be1c11337c90cfb3ed96.png" src="../_images/5bfd1de8f3d9be1c11337c90cfb3ed96.png" /></p>
<p>彩色滤光片的这种布置实质上导致了色彩信息空间欠采样，去马赛克单元负责从这种不完整色彩信息中重建全彩色图像（每个像素含R、G、B三色信息）。<img alt="../_images/fc1ece44a956c1be254dc257e400c9f2.png" src="../_images/fc1ece44a956c1be254dc257e400c9f2.png" /></p>
<p>该模块由许多滤波器组成，这些滤波器根据内插的亮度通道重建色度通道。它还考虑了信号相关的传感器噪声（基于较早确定的噪声轮廓），以保持边缘的清晰度和区域均匀的平滑度，同时插补缺失的像素分量。也因此，缺失像素分量的插值包含了传感器的噪声。内置的锐化最大程度地减少了高频噪声的放大。</p>
</section>
<section id="sharpen">
<h3><span class="section-number">5.4.1.4. </span>Sharpen<a class="headerlink" href="#sharpen" title="永久链接至标题"></a></h3>
<p>通常称之为后端锐化，此模块旨在与Demosaic模块的Sharpen协同作用。Demosaic模块的锐化是在RGB域控制锐化，用于达到要求分辨率，但过度锐化会导致伪像和看起来不自然的纹理。</p>
<p>暗区使用配置寄存器：luma thresh low 以及 luma slope low；</p>
<p>亮区使用配置寄存器：luma thresh high 以及 luma slope high。
下图显示了这四个参数对于sharpen效果的影响：<img alt="../_images/9eaa1e65ba21c013ed572f20193fe614.png" src="../_images/9eaa1e65ba21c013ed572f20193fe614.png" /></p>
</section>
<section id="gamma">
<h3><span class="section-number">5.4.1.5. </span>Gamma<a class="headerlink" href="#gamma" title="永久链接至标题"></a></h3>
<p>该模块对输出Gamma进行编码，通常设置为匹配BT.709或sRGB Gamma曲线。</p>
<p>此模块分别为三个（R，G，B）颜色通道中的每一个应用Gamma LUT。</p>
<p>在典型配置中，LUT具有129个均匀间隔的节点，标记为0…128，硬件在这些节点之间应用线性插值。<img alt="../_images/2c8942a6ea8766837bedf807ec126d28.png" src="../_images/2c8942a6ea8766837bedf807ec126d28.png" /></p>
<p>每个数据值都是16位无符号数，因此可以预计Gamma [0] = 0和Gamma [128] =
0xFFFF，其他127个值定义Gamma校正曲线。</p>
<p>注意：</p>
<p>自适应对比度增强由Iridix模块动态执行。应根据所需输出的Gamma特性对LUT进行静态修改。同时Gamma会影响 AE、 CCM、 Iridix模块，因此Gamma变动时需要重新验证这几个模块。</p>
</section>
<section id="iridix">
<h3><span class="section-number">5.4.1.6. </span>Iridix<a class="headerlink" href="#iridix" title="永久链接至标题"></a></h3>
<p>Iridix®使用本地色调映射进行动态范围压缩（DRC），尝试从HDR场景中可见性低的区域恢复细节，而又不影响全局图像。总体而言，通过增加相对于场景内容的增益，增加了可用于本地区域的色调范围。</p>
</section>
<section id="cnr">
<h3><span class="section-number">5.4.1.7. </span>CNR<a class="headerlink" href="#cnr" title="永久链接至标题"></a></h3>
<p>CNR模块通过对周边色度均值智能估计的方式进行α-混合来矫正YUV空间中每个pixel的颜色，从而降低图像中的色度噪声。在此过程中，该模块会保持图像的强度信息完整，仅处理其色度部分。</p>
<p>该模块内部按YUV域处理，会先将RGB图像转换为YUV域，并根据颜色部分进一步细分，分别处理U和V通道，然后再将YUV转换回RGB域。</p>
<blockquote>
<div><p>注意：此YUV不会直接输出, CNR后面模块会把RGB转换成YUV输出到IPU或DDR</p>
</div></blockquote>
<p>对U和V的处理是将高斯核应用于相应段的每个U和V通道，并通过相应的偏移或斜率参数进行配置。为了最大程度地减少硬件实现或减少大内核的行数，垂直高斯滤波被新兴的递归滤波器代替。</p>
<p>另外，为了进一步减小面积，在处理之前先对色彩通道进行下采样，然后在输出阶段进行上采样。输出的U通道和V通道分别是经过处理的U通道和V通道与原始U通道和V通道的混合，这些通道由增量偏移或斜率参数配置。然后将已处理的U和V以及未处理的Y转换回RGB域。</p>
</section>
<section id="ccm">
<h3><span class="section-number">5.4.1.8. </span>CCM<a class="headerlink" href="#ccm" title="永久链接至标题"></a></h3>
<p>大多数情况下，标准颜色无法提供最佳图像质量。根据应用程序或客户喜好，CCM模块可以对颜色进行校正和调整。该模块更改图像的色度值以匹配标准色彩空间的色度值。</p>
<p>通过捕获该模块对输入的{R，G，B}或{R，G，B，Ir}像素值应用线性颜色校正。计算系数矩阵如图所示：<img alt="../_images/8d9c2a42362a495faa03dc054781802a.png" src="../_images/8d9c2a42362a495faa03dc054781802a.png" /></p>
<p>In1、In2、In3和In4是输入（分别是R、G、B和Ir），A11到A34是可配置的矩阵系数。系数为s4.8数字格式的13位值，其中Msbit(12bits)为符号位。负值的MSbit(12bits)设置为1。</p>
<blockquote>
<div><p>注意：如果CFA模式是RGGB，则Ir系数和Ir信道偏移必须设置为零。</p>
</div></blockquote>
</section>
<section id="sinter">
<h3><span class="section-number">5.4.1.9. </span>Sinter<a class="headerlink" href="#sinter" title="永久链接至标题"></a></h3>
<p>Sinter®是一种先进的空间降噪模块，结合了一组算法来抑制传感器噪声，该滤波器作用于RAW数据域空间，在保持纹理和细节的同时，可有效降低图像中的人眼感知到的噪声，使得处理得到的图像更自然。</p>
<p>通过使用外部生成的sensor Noise Profile LUT可以简化该模块的使用。正确配置了LUT表之后，可通过较少的一组寄存器来控制模块。大多数情况下，仅需要修改Sinter的阈值以调整噪声滤波器的强度。</p>
<p>Sinter:Thresh Long和Sinter:Thresh Short寄存器分别对应于长曝光和短曝光，用于WDR模式。当曝光比例为1或WDR模式禁止时，Sinter:Thresh Long和Sinter:Thresh Short应该被设置为相同的值。阈值是在标准校正过程中使用以各种ISO值捕获的图像确定的，并通过系统增益进行调制。如果图像是使用frame-switching创建的，则应根据曝光比相应地设置这些值。</p>
</section>
<section id="temper">
<h3><span class="section-number">5.4.1.10. </span>Temper<a class="headerlink" href="#temper" title="永久链接至标题"></a></h3>
<p>该模块是运动自适应时间降噪滤波器。通过在当前帧中检测到的局部运动程度设置的递归级别来将当前帧与先前历史帧进行递归平均。滤波器工作在RAW域，并且需要两帧外部存储，数据位宽是视频位宽+4位。</p>
<blockquote>
<div><p>注意：在WDR模式下，视频位宽会更大。</p>
</div></blockquote>
<p>可以增加或减少Recursion_Limit来调整递归的深度，反过来会影响进行递归平均操作的有效帧数。增大此参数将导致较小的递归深度、较小的降噪效果以及最小的运动伪影。</p>
<p>当Recursion_Limit设置为 0 时，最多16帧可以被平均。</p>
<p>当Recursion_Limit设置为 0xf 时，不对帧进行平均，这等同于禁止Temper。</p>
<p>Temper的阈值用于调节Temper噪声滤波器的强度。该模块的性能由外部生成的sensor Noise
Profile LUT来保证。参考数据通过DMA存储在DDR中，有2个读DMA和2个写DMA管理参考数据的存储。</p>
</section>
<section id="mesh-shading">
<h3><span class="section-number">5.4.1.11. </span>Mesh Shading<a class="headerlink" href="#mesh-shading" title="永久链接至标题"></a></h3>
<p>由于镜头光学折射不均匀，导致画面出现中心亮四周暗的现象。网格着色校正为非线性着色失真提供了进一步的校正，并微调径向着色校正所产生的效果。</p>
<p>该模块使用最大64x 64区域的网格对图像应用网格着色校正。网格校正有3页（R/G/B）的校正表，4种不同模式：<img alt="../_images/faa3129f78eedd29839392c093e6e330.png" src="../_images/faa3129f78eedd29839392c093e6e330.png" /></p>
<p><em>设置 Mesh Alpha Mode = 0</em><img alt="../_images/a021fb719e5465ec10e9153e421d1100.png" src="../_images/a021fb719e5465ec10e9153e421d1100.png" /></p>
<p><em>设置 Mesh Alpha Mode = 1</em><img alt="../_images/c0b25e9a65732282d5f19a7635a0ddd2.png" src="../_images/c0b25e9a65732282d5f19a7635a0ddd2.png" /></p>
<p><em>设置 Mesh Alpha Mode = 2</em><img alt="../_images/082b39c7f8f634a6bf3192b3fc447344.png" src="../_images/082b39c7f8f634a6bf3192b3fc447344.png" /></p>
<p><em>设置 Mesh Alpha Mode = 3</em><img alt="../_images/7e2b1477f23a6869573ca5b0d18080a8.png" src="../_images/7e2b1477f23a6869573ca5b0d18080a8.png" /></p>
</section>
<section id="radial-shading">
<h3><span class="section-number">5.4.1.12. </span>Radial Shading<a class="headerlink" href="#radial-shading" title="永久链接至标题"></a></h3>
<p>与mesh shading相对应，径向阴影也是一种校正 Lens Shading 校正方法。利用透镜阴影的径向性质，可以校正偏心和椭圆形阴影效果。</p>
<p>径向着色系数存储在类型为32位的4x129条目LUT中，系数采用x.12格式，其中低12位为小数。对于每个颜色平面，从中心到外边缘存储系数。</p>
</section>
<section id="color-space-conversion">
<h3><span class="section-number">5.4.1.13. </span>Color Space Conversion<a class="headerlink" href="#color-space-conversion" title="永久链接至标题"></a></h3>
<p>此模块将输入的{R，G，B}像素值转换为{Y，U，V}值，并使用标准3x3矩阵乘法和向量偏移。如果转换未激活，则ISP输出RGB格式的像素。<img alt="../_images/349a1fb120a6478e02d6ae647f8b43b5.png" src="../_images/349a1fb120a6478e02d6ae647f8b43b5.png" /></p>
<p>如果需要，可以对参数进行修改，以提供不同的转换。以BT.709为例进行说明，公式如下所示：<img alt="../_images/31ead51a2003c093e39a8660d535adde.png" src="../_images/31ead51a2003c093e39a8660d535adde.png" /></p>
<p>则calibration中RGB2YUV_CONVERSION中对应的参数如公式所示：</p>
<p>其中，若Coefft11 (Coefft12, Coefft13, Coefft21, Coefft22, Coefft23, Coefft31,
Coefft32, Coefft33)
参数为正，clibration中参数为Coefft11*256取整；若该参数为负，则calibraiton中参数为(|Coefft11*256|+1&lt;&lt;15)取整。calibration
中参数为Coefft01(Coefft02, Coefft01)*1024取整。</p>
</section>
<section id="id6">
<h3><span class="section-number">5.4.1.14. </span>统计信息<a class="headerlink" href="#id6" title="永久链接至标题"></a></h3>
<p>3A统计信息包含AWB，AE和AF。</p>
<p>AWB模块收集的统计信息用来给软件做白平衡，它累积区域级R/G和B/G统计信息，也收集全帧统计信息。</p>
<p>AE自动曝光统计信息用于调整传感器曝光，这是通过收集5-bin、1024-bin直方图完成的。</p>
<p>AF模块计算图像中的统计清晰度值。软件使用此值/统计信息来调整镜头，使其在感兴趣区域（ROI）上具有最佳聚焦。该模块计算区域和整个图像的边缘值。</p>
<p>ISP为各统计模块提供可编程的标记点。<img alt="../_images/265bc3c2561f462db3e18c6e76c6dd62.png" src="../_images/265bc3c2561f462db3e18c6e76c6dd62.png" /></p>
<section id="id7">
<h4>AWB统计信息<a class="headerlink" href="#id7" title="永久链接至标题"></a></h4>
<p>AWB有全局和区域统计信息。</p>
<p>全局统计信息：整幅图像的R/G和B/G均值及有效统计点个数。</p>
<p>区域统计信息：最大支持图像的33x33分块，每个分块输出R/G，B/G的均值以及有效统计点个数。</p>
<p>AWB_stats_mode寄存器可用来配置均值的类别：R/G，B/G还是G/R，G/B。</p>
<p>通过寄存器配置，可限定有效像素：</p>
<p>Cb_Ref_Min/Max，Cr_Ref_Min/Max这4个值限定了R/G，B/G的最大值和最小值。</p>
<p>另外，可通过Cb_Ref_Low/High，Cr_Ref_Low/High来限定更小的R/G，B/G范围。</p>
<p><img alt="../_images/82efe11737fca5681b2df8a3af582612.png" src="../_images/82efe11737fca5681b2df8a3af582612.png" /></p>
<p>全局统计信息：由三个寄存器AWB RG，AWB BG，SUM来存储；</p>
<p>区域统计信息：<img alt="../_images/b7004c4bfc0cfea42dfd9c922ad3e52e.png" src="../_images/b7004c4bfc0cfea42dfd9c922ad3e52e.png" /></p>
</section>
<section id="id8">
<h4>AE统计信息<a class="headerlink" href="#id8" title="永久链接至标题"></a></h4>
<p>在应用黑电平、白平衡和ISP增益之后收集自动曝光（AE）统计信息。包含两种直方图类型：</p>
<p>5-bin局部和全局直方图；</p>
<p>1024-bin全局直方图；</p>
</section>
<section id="bin">
<h4>5-bin直方图<a class="headerlink" href="#bin" title="永久链接至标题"></a></h4>
<p>使用可调整的直方图bin边界，为每个区域和整个图像生成5-bin标准化直方图。Statistics_Hist_Thresh[i][j]用来定义i
bin，j bin间的强度阈值。</p>
<p>Statistics_Hist[i] 提供i bin的全局归一化像素数，总和归一化为0xFFFF。</p>
<p>不提供中间bin的直方图，但可通过软件来计算得到：<img alt="../_images/ebea37c8cf8b3d7e3bcc6049715ff0a5.png" src="../_images/ebea37c8cf8b3d7e3bcc6049715ff0a5.png" /></p>
<p>包含Histx数据的内部表提供了每个区域的直方图的归一化值，如下表中mxn区域所示。区域的顺序是从图像的左上角开始的栅格顺序。对于每个区域，直方图数据的总和被标准化为0xFFFF。</p>
<p>最多支持</p>
<p><img alt="../_images/9a978ee0b05af72629b9ab769ccd65ec.png" src="../_images/9a978ee0b05af72629b9ab769ccd65ec.png" /></p>
<p>33x33分块。</p>
</section>
<section id="id9">
<h4>1024-bin直方图<a class="headerlink" href="#id9" title="永久链接至标题"></a></h4>
<p>为整个图像构建全局1024-bin直方图。全局直方图可设置区域权重，但未标准化，ISP
Firmware会执行统计数据的标准化。<img alt="../_images/7715fc9e61a93745eb21ea33691af15e.png" src="../_images/7715fc9e61a93745eb21ea33691af15e.png" /><img alt="../_images/44de7677ae0485a0be2b89fc6ca62eef.png" src="../_images/44de7677ae0485a0be2b89fc6ca62eef.png" /></p>
</section>
<section id="af">
<h4>AF统计信息<a class="headerlink" href="#af" title="永久链接至标题"></a></h4>
<p>自动对焦统计信息由感兴趣区域（ROI）或区域的、标准化的全图像多方向对比度指标组成。CPU使用此对比度度量来确定镜头的位置，以实现最佳聚焦。</p>
<p>AF 统计模块的清晰度评价函数计算像素点四个方向的对比度，计算示意如下图所示，<img alt="../_images/af7452605a6fd44cf2f233c04dd50efa.png" src="../_images/af7452605a6fd44cf2f233c04dd50efa.png" /></p>
<p>需要注意的是，AF统计模块不支持修改清晰度评价函数的系数。用户可修改kernel改变清晰度计算的像素点位置来适配不同的场景。AF统计模块不同kernel下清晰度计算方式如下图所示。<img alt="../_images/320db90e9c15074cef59f9abf2a95e7c.png" src="../_images/320db90e9c15074cef59f9abf2a95e7c.png" /></p>
<p>对于AF模块，可以通过软件配置区域。模块为每个像素计算区域对比度度量，并在整个区域内进行累积。对于每个像素，沿4个方向计算对比度。除此之外，还可以使用内核选择配置参数来控制对角线的角度方向，如上表所示。为了改善在弱光和低通成像情况下的响应，所计算的对比度为四级（四次对比度总和）。</p>
<p>这些区域度量标准不会在硬件中加权，但是软件可以在计算后应用基于区域的权重。</p>
<p>下图表明当AF对比度指标达到最高点时可以实现最佳对焦：<img alt="../_images/eb46356fc26d3b00fc5c41a191b77a69.png" src="../_images/eb46356fc26d3b00fc5c41a191b77a69.png" /></p>
</section>
<section id="id10">
<h4>AF度量数据计算<a class="headerlink" href="#id10" title="永久链接至标题"></a></h4>
<p>区域累积对比度度量标准以16b尾数和5b指数的浮点格式存储。除了对比度指标外，我们还在该区域上累积平方图像和四次图像数据，如下图所示I2值是指图1所示四个方向像素的差值的平方和，I4是图1四个方向像素差的四次方和，E4是4个kernel下像素差四次方和累加，如图2，16b Mantissa存的是底数，5b Exponent存的是指数，Register1和Register2合起来64bit使用，用户不需要自己直接去计算，可以直接使用HB_ISP_GetMeteringData拿到cv值。</p>
<p>每个区域累积的统计信息如下表所示：<img alt="../_images/92ed8281119113cec44cca19621de865.png" src="../_images/92ed8281119113cec44cca19621de865.png" /><img alt="../_images/63be20d81aeffdf2e29f10eac189f2e8.png" src="../_images/63be20d81aeffdf2e29f10eac189f2e8.png" /></p>
<p>AF区域数据以如下形式存储：</p>
<p>除了区域统计，AF还累积归一化的四次边沿和，它存储在一个32位寄存器中。</p>
</section>
<section id="auto-level">
<h4>Auto Level统计信息<a class="headerlink" href="#auto-level" title="永久链接至标题"></a></h4>
<p>iridix模块提供的1024bin统计数据。<img alt="../_images/51b1c86929ebf73752bf1803d437a06c.png" src="../_images/51b1c86929ebf73752bf1803d437a06c.png" /></p>
</section>
<section id="id11">
<h4>平均亮度和平均亮度方差统计信息<a class="headerlink" href="#id11" title="永久链接至标题"></a></h4>
<p>ISP提供YUV域的区域亮度平均值的统计信息和区域亮度平均值的方差。该模块始终使用32x16的固定区域大小（水平x垂直），此统计模块提供可用结果所需的最小帧分辨率为512x256。这些统计信息存储在512个位置的SRAM中，每个位置包含每个区域的10位（LSB）平均值信息和12位（MSB）亮度平均值信息的方差。其存储方法为10bits
reserved + 12bits亮度方差 + 10bits 亮度平均值。</p>
</section>
</section>
</section>
<section id="id12">
<h2><span class="section-number">5.4.2. </span>功能描述<a class="headerlink" href="#id12" title="永久链接至标题"></a></h2>
<section id="id13">
<h3><span class="section-number">5.4.2.1. </span>交互数据<a class="headerlink" href="#id13" title="永久链接至标题"></a></h3>
<section id="isp-firmware">
<h4>算法库与ISP Firmware交互框图<img alt="../_images/3f6586aeb35102bf50fc3a8c45f90c82.png" src="../_images/3f6586aeb35102bf50fc3a8c45f90c82.png" /><a class="headerlink" href="#isp-firmware" title="永久链接至标题"></a></h4>
<p>MEM中的内容有两部分，一是提供给算法库的数据，二是算法库给ISP Driver传入的值，ISP
Driver中如AWB收到算法配置的值会更新到ISP寄存器空间；</p>
<ul class="simple">
<li><p>这是一个上下文（对应一路sensor）的情况，多个sensor多套数据结构；</p></li>
<li><p>黄颜色块是可替换部分，Algo
Lib需要几个回调接口，见“API参考”一节；另外需要一些输入输出的数据，见“数据结构”一节；</p></li>
<li><p>Sensor Driver包含了常用的sensor增益、曝光配置方法，一般情况不需要修改；</p></li>
</ul>
</section>
<section id="id14">
<h4>算法库与ISP Firmware交互数据<a class="headerlink" href="#id14" title="永久链接至标题"></a></h4>
<table border="1" class="docutils">
<thead>
<tr>
<th><strong>Module</strong></th>
<th><strong>ISP Fw -> 算法库</strong></th>
<th><strong>算法库 -> ISP Fw</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AE</strong></td>
<td>stats_data[ISP_FULL_HISTOGRAM_SIZE]</td>
<td>ae_exposure</td>
</tr>
<tr>
<td></td>
<td>histogram_sum</td>
<td>ae_exposure_ratio</td>
</tr>
<tr>
<td></td>
<td>hist4[33 * 33]</td>
<td>frame_id</td>
</tr>
<tr>
<td><strong>AWB</strong></td>
<td>stats_data[MAX_AWB_ZONES]</td>
<td>awb_red_gain</td>
</tr>
<tr>
<td></td>
<td>curr_AWB_ZONES</td>
<td>awb_green_even_gain</td>
</tr>
<tr>
<td></td>
<td></td>
<td>awb_green_odd_gain</td>
</tr>
<tr>
<td></td>
<td></td>
<td>awb_blue_gain</td>
</tr>
<tr>
<td></td>
<td></td>
<td>temperature_detected</td>
</tr>
<tr>
<td></td>
<td></td>
<td>p_high</td>
</tr>
<tr>
<td></td>
<td></td>
<td>light_source_candidate</td>
</tr>
<tr>
<td></td>
<td></td>
<td>awb_warming[3]</td>
</tr>
<tr>
<td></td>
<td></td>
<td>mix_light_contrast</td>
</tr>
<tr>
<td></td>
<td></td>
<td>frame_id</td>
</tr>
<tr>
<td><strong>AF</strong></td>
<td>stats_data[AF_ZONES_COUNT_MAX][2]</td>
<td>frame_to_skip</td>
</tr>
<tr>
<td></td>
<td>zones_horiz</td>
<td>af_position</td>
</tr>
<tr>
<td></td>
<td>zones_vert</td>
<td>af_last_sharp</td>
</tr>
<tr>
<td></td>
<td>frame_num</td>
<td></td>
</tr>
<tr>
<td></td>
<td>skip_cur_frame</td>
<td></td>
</tr>
<tr>
<td></td>
<td>zoom_step_info</td>
<td></td>
</tr>
<tr>
<td><strong>Gamma</strong></td>
<td>stats_data[ISP_FULL_HISTOGRAM_SIZE]</td>
<td>gamma_gain</td>
</tr>
<tr>
<td></td>
<td>fullhist_sum</td>
<td>gamma_offset</td>
</tr>
<tr>
<td></td>
<td></td>
<td>frame_id</td>
</tr>
<tr>
<td><strong>Iridix</strong></td>
<td>N/A（using AE statistics data from AE algorithm）</td>
<td>strength_target</td>
</tr>
<tr>
<td></td>
<td></td>
<td>iridix_dark_enh</td>
</tr>
<tr>
<td></td>
<td></td>
<td>iridix_global_DG</td>
</tr>
<tr>
<td></td>
<td></td>
<td>iridix_contrast</td>
</tr>
<tr>
<td></td>
<td></td>
<td>frame_id</td>
</tr>
</tbody>
</table></section>
</section>
<section id="a">
<h3><span class="section-number">5.4.2.2. </span>3A开发说明<a class="headerlink" href="#a" title="永久链接至标题"></a></h3>
<p>ISP
Firmware有两部分，分用户空间和内核空间。内核空间Firmware随系统启动而初始化，用户空间Firmware（内含默认3A算法）由HB_VIN_StartPipe接口启动，Firmware启动过程中会优先选择外部3A算法，如果未注册外部3A算法，那么启动默认3A算法。每一类算法都会有对应的两个输入参数——统计数据（stats）、输入参数（input），和一个输出参数——输出参数（output）。在每帧统计数据Ready后ISP
Firmware会调用proc_func回调，并传入两个输入参数，proc_func是实际的算法实现，算法计算后要填充好输出参数，ISP
Firmware会把输出参数应用到Sensor或ISP硬件。</p>
<section id="id15">
<h4>AE算法注册<a class="headerlink" href="#id15" title="永久链接至标题"></a></h4>
<p>AE向ISP Firmware注册回调函数：</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>From</th>
<th>用户需要实现</th>
<th>To</th>
</tr>
</thead>
<tbody>
<tr>
<td>AELIB</td>
<td>init_func</td>
<td>ISP Firmware</td>
</tr>
<tr>
<td></td>
<td>proc_func</td>
<td></td>
</tr>
<tr>
<td></td>
<td>deinit_func</td>
<td></td>
</tr>
</tbody>
</table><p>接口说明：</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>回调函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>init_func</td>
<td>算法初始化函数</td>
</tr>
<tr>
<td>proc_func</td>
<td>实际算法实现，如target、exposure计算。ISP Firmware在每帧AE统计数据Ready时会调用该函数。proc_func传入参数和需要传出的参数见<a href="#_1_HB_ISP_AE_FUNC_S">结构体描述</a></td>
</tr>
<tr>
<td>deinit_func</td>
<td>算法去初始化函数</td>
</tr>
</tbody>
</table></section>
<section id="id16">
<h4>AWB算法注册<a class="headerlink" href="#id16" title="永久链接至标题"></a></h4>
<p>AWB向ISP Firmware注册回调函数：</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>From</th>
<th>用户需要实现</th>
<th>To</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWBLIB</td>
<td>init_func</td>
<td>ISP Firmware</td>
</tr>
<tr>
<td></td>
<td>proc_func</td>
<td></td>
</tr>
<tr>
<td></td>
<td>deinit_func</td>
<td></td>
</tr>
</tbody>
</table><p>接口说明：</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>回调函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>init_func</td>
<td>算法初始化函数</td>
</tr>
<tr>
<td>proc_func</td>
<td>实际算法实现， ISP Firmware在每帧AWB统计数据Ready时会调用该函数。proc_func传入参数和需要传出的参数见<a href="#_2_HB_ISP_AWB_FUNC_S">结构体描述</a></td>
</tr>
<tr>
<td>deinit_func</td>
<td>算法去初始化函数</td>
</tr>
</tbody>
</table></section>
<section id="id17">
<h4>AF算法注册<a class="headerlink" href="#id17" title="永久链接至标题"></a></h4>
<p>AF向ISP Firmware注册回调函数：</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>From</th>
<th>用户需要实现</th>
<th>To</th>
</tr>
</thead>
<tbody>
<tr>
<td>AFLIB</td>
<td>init_func</td>
<td>ISP Firmware</td>
</tr>
<tr>
<td></td>
<td>proc_func</td>
<td></td>
</tr>
<tr>
<td></td>
<td>deinit_func</td>
<td></td>
</tr>
</tbody>
</table><p>接口说明：</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>回调函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>init_func</td>
<td>算法初始化函数</td>
</tr>
<tr>
<td>proc_func</td>
<td>实际算法实现， ISP Firmware在每帧AF统计数据Ready时会调用该函数。proc_func传入参数和需要传出的参数见<a href="#_2_HB_ISP_AF_FUNC_S">结构体描述</a></td>
</tr>
<tr>
<td>deinit_func</td>
<td>算法去初始化函数</td>
</tr>
</tbody>
</table></section>
<section id="id18">
<h4>算法注册举例<a class="headerlink" href="#id18" title="永久链接至标题"></a></h4>
<p>以AWB算法为例：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">ISP_AWB_FUNC_S</span><span class="w"> </span><span class="n">stAwbFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="p">.</span><span class="n">init_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">awb_init_func</span><span class="p">,</span><span class="w"></span>

<span class="w">        </span><span class="p">.</span><span class="n">proc_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">awb_proc_func</span><span class="p">,</span><span class="w"></span>

<span class="w">        </span><span class="p">.</span><span class="n">deinit_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">awb_deinit_func</span><span class="p">,</span><span class="w"></span>

<span class="p">};</span><span class="w"></span>

<span class="n">HB_ISP_AWBLibRegCallback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;libawb.so&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">stAwbFunc</span><span class="p">);</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">awb_init_func</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ctx_id</span><span class="p">)</span><span class="w"></span>

<span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;ctx id is %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ctx_id</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>

<span class="kt">int32_t</span><span class="w"> </span><span class="nf">awb_proc_func</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">awb_ctx</span><span class="p">,</span><span class="w"> </span><span class="n">awb_stats_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">stats</span><span class="p">,</span><span class="w"> </span><span class="n">awb_input_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">awb_output_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">output</span><span class="p">)</span><span class="w"></span>

<span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">awb_acamera_core_obj_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_awb_core_obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">awb_acamera_core_obj_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">awb_ctx</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">awb_acamera_input_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_acamera_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">awb_acamera_input_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">input</span><span class="o">-&gt;</span><span class="n">acamera_input</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">awb_calibration_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_cali_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="w"> </span><span class="n">p_acamera_input</span><span class="o">-&gt;</span><span class="n">cali_data</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">awb_acamera_output_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_acamera_output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">awb_acamera_output_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">output</span><span class="o">-&gt;</span><span class="n">acamera_output</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="c1">//具体算法实现，传入input、统计数据进行计算</span>

<span class="w">        </span><span class="n">awb_calc_avg_weighted_gr_gb_mesh</span><span class="p">(</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="p">,</span><span class="w"> </span><span class="n">stats</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">awb_detect_light_source</span><span class="p">(</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">awb_calculate_warming_effect</span><span class="p">(</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="p">,</span><span class="w"> </span><span class="n">p_cali_data</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">//计算结果赋值给输出参数</span>

<span class="w">        </span><span class="n">p_acamera_output</span><span class="o">-&gt;</span><span class="n">rg_coef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="o">-&gt;</span><span class="n">rg_coef</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">p_acamera_output</span><span class="o">-&gt;</span><span class="n">bg_coef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="o">-&gt;</span><span class="n">bg_coef</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">p_acamera_output</span><span class="o">-&gt;</span><span class="n">temperature_detected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="o">-&gt;</span><span class="n">temperature_detected</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">p_acamera_output</span><span class="o">-&gt;</span><span class="n">p_high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="o">-&gt;</span><span class="n">p_high</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">p_acamera_output</span><span class="o">-&gt;</span><span class="n">light_source_candidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="o">-&gt;</span><span class="n">light_source_candidate</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">memcpy</span><span class="p">(</span><span class="w"> </span><span class="n">p_acamera_output</span><span class="o">-&gt;</span><span class="n">awb_warming</span><span class="p">,</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="o">-&gt;</span><span class="n">awb_warming</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="w"> </span><span class="n">p_acamera_output</span><span class="o">-&gt;</span><span class="n">awb_warming</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">p_acamera_output</span><span class="o">-&gt;</span><span class="n">awb_converged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_awb_core_obj</span><span class="o">-&gt;</span><span class="n">awb_converged</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>

<span class="kt">int32_t</span><span class="w"> </span><span class="nf">awb_deinit_func</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">awb_ctx</span><span class="p">)</span><span class="w"></span>

<span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;done&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="api">
<h2><span class="section-number">5.4.3. </span>API参考<a class="headerlink" href="#api" title="永久链接至标题"></a></h2>
<section id="hb-isp-setfwstate-hb-isp-getfwstate">
<h3><span class="section-number">5.4.3.1. </span>HB_ISP_SetFWState/HB_ISP_GetFWState<a class="headerlink" href="#hb-isp-setfwstate-hb-isp-getfwstate" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetFWState</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_FW_STATE_E</span><span class="w"> </span><span class="n">enState</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetFWState</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_FW_STATE_E</span><span class="w"> </span><span class="o">*</span><span class="n">penState</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取ISP Firmware的状态。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>penState</td>
<td>ISP Firmware状态</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setregister-hb-isp-getregister">
<h3><span class="section-number">5.4.3.2. </span>HB_ISP_SetRegister/HB_ISP_GetRegister<a class="headerlink" href="#hb-isp-setregister-hb-isp-getregister" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetRegister</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Addr</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Value</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetRegister</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Addr</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">pu32Value</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取ISP寄存器。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>u32Addr</td>
<td>ISP寄存器地址</td>
<td>输入</td>
</tr>
<tr>
<td>u32Value</td>
<td>要设置的值</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setmodulecontrol-hb-isp-getmodulecontrol">
<h3><span class="section-number">5.4.3.3. </span>HB_ISP_SetModuleControl/ HB_ISP_GetModuleControl<a class="headerlink" href="#hb-isp-setmodulecontrol-hb-isp-getmodulecontrol" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetModuleControl</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_MODULE_CTRL_U</span><span class="w"> </span><span class="o">*</span><span class="n">punModCtrl</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetModuleControl</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_MODULE_CTRL_U</span><span class="w"> </span><span class="o">*</span><span class="n">punModCtrl</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取ISP内部各模块的bypass情况。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>punModCtrl</td>
<td>ISP 内部各模块bypass控制</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-switchscence">
<h3><span class="section-number">5.4.3.4. </span>HB_ISP_SwitchScence<a class="headerlink" href="#hb-isp-switchscence" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SwitchScence</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">cname</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置calibration库。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>cname</td>
<td>Calibration库的路径</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-starti2cbus-hb-isp-stopi2cbus">
<h3><span class="section-number">5.4.3.5. </span>HB_ISP_StartI2CBus/HB_ISP_StopI2CBus<a class="headerlink" href="#hb-isp-starti2cbus-hb-isp-stopi2cbus" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_StartI2CBus</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">);</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">HB_ISP_StopI2CBus</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>启动、停止写I2C线程。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】StartI2Cbus前需要HB_ISP_GetSetInit初始化和sensor初始化。</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-sendi2cdata">
<h3><span class="section-number">5.4.3.6. </span>HB_ISP_SendI2CData<a class="headerlink" href="#hb-isp-sendi2cdata" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SendI2CData</span><span class="p">(</span><span class="n">ISP_I2C_DATA_S</span><span class="w"> </span><span class="n">data</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>写I2C数据。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>要发送的data信息</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>在使用前要调用HB_ISP_StartI2CBus接口启动写I2C线程。</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-aelibregcallback">
<h3><span class="section-number">5.4.3.7. </span>HB_ISP_AELibRegCallback<a class="headerlink" href="#hb-isp-aelibregcallback" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_AELibRegCallback</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_AE_FUNC_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeFunc</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>注册AE算法库。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>name</td>
<td>库名字，固定拷贝20字符长度</td>
<td>输入 预留项，可缺省</td>
</tr>
<tr>
<td>pstAeFunc</td>
<td>AE算法回调函数指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>HB_VIN_StartPipe会启动ISP算法，需要在调用HB_VIN_StartPipe函数前进行算法注册。</p>
<p>【参考代码】见<a class="reference external" href="#_%E7%AE%97%E6%B3%95%E6%B3%A8%E5%86%8C%E4%B8%BE%E4%BE%8B">算法注册举例</a></p>
</section>
<section id="hb-isp-awblibregcallback">
<h3><span class="section-number">5.4.3.8. </span>HB_ISP_AWBLibRegCallback<a class="headerlink" href="#hb-isp-awblibregcallback" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_AWBLibRegCallback</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_AWB_FUNC_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAWBFunc</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>注册AWB算法库。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>name</td>
<td>库名字，固定拷贝20字符长度</td>
<td>输入 预留项，可缺省</td>
</tr>
<tr>
<td>pstAWBFunc</td>
<td>AWB算法回调函数指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>HB_VIN_StartPipe会启动ISP算法，需要在调用HB_VIN_StartPipe函数前进行算法注册。</p>
<p>【参考代码】见<a class="reference external" href="#_%E7%AE%97%E6%B3%95%E6%B3%A8%E5%86%8C%E4%B8%BE%E4%BE%8B">算法注册举例</a></p>
</section>
<section id="hb-isp-aflibregcallback">
<h3><span class="section-number">5.4.3.9. </span>HB_ISP_AFLibRegCallback<a class="headerlink" href="#hb-isp-aflibregcallback" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_AFLibRegCallback</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_AF_FUNC_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAFFunc</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>注册AF算法库。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>name</td>
<td>库名字，固定拷贝20字符长度</td>
<td>输入 预留项，可缺省</td>
</tr>
<tr>
<td>pstAFFunc</td>
<td>AF算法回调函数指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>HB_VIN_StartPipe会启动ISP算法，需要在调用HB_VIN_StartPipe函数前进行算法注册。</p>
<p>【参考代码】见<a class="reference external" href="#_%E7%AE%97%E6%B3%95%E6%B3%A8%E5%86%8C%E4%B8%BE%E4%BE%8B">算法注册举例</a></p>
</section>
<section id="hb-isp-aelibunregcallback">
<h3><span class="section-number">5.4.3.10. </span>HB_ISP_AELibUnRegCallback<a class="headerlink" href="#hb-isp-aelibunregcallback" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_AELibUnRegCallback</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>去注册AE算法库。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-awblibunregcallback">
<h3><span class="section-number">5.4.3.11. </span>HB_ISP_AWBLibUnRegCallback<a class="headerlink" href="#hb-isp-awblibunregcallback" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_AWBLibUnRegCallback</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>去注册AWB算法库。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-aflibunregcallback">
<h3><span class="section-number">5.4.3.12. </span>HB_ISP_AFLibUnRegCallback<a class="headerlink" href="#hb-isp-aflibunregcallback" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_AFLibUnRegCallback</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>去注册AF算法库。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
<p>注意：</p>
<ol class="simple">
<li><p>如果使用默认3A算法，不需要关注该章节的接口。</p></li>
<li><p>不含Zoom和光圈控制算法，用户可自己实现，给出输出参数，以修改ISP
Firmware做适配。</p></li>
</ol>
</section>
<section id="hb-isp-getsetinit-hb-isp-getsetexit">
<h3><span class="section-number">5.4.3.13. </span>HB_ISP_GetSetInit/HB_ISP_GetSetExit<a class="headerlink" href="#hb-isp-getsetinit-hb-isp-getsetexit" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetSetInit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetSetExit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取/设置参数前的初始化。</p>
<p>【参数描述】无</p>
<p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>同一个进程里调用一次即可，在调用所有Get/Set类接口前，首先要调用HB_ISP_GetSetInit进行初始化。</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setaeattr-hb-isp-getaeattr">
<h3><span class="section-number">5.4.3.14. </span>HB_ISP_SetAeAttr/HB_ISP_GetAeAttr<a class="headerlink" href="#hb-isp-setaeattr-hb-isp-getaeattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAeAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AE_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAeAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AE_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置AE算法属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAeAttr</td>
<td>指向AE参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>set只针对manual模式，get时传不同模式获取对应模式的值。</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setafattr-hb-isp-getafattr">
<h3><span class="section-number">5.4.3.15. </span>HB_ISP_SetAfAttr/HB_ISP_GetAfAttr<a class="headerlink" href="#hb-isp-setafattr-hb-isp-getafattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAfAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AF_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAfAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAfAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AF_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAfAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置AF-ZOOM属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAfAttr</td>
<td>指向AF参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setawbattr-hb-isp-getawbattr">
<h3><span class="section-number">5.4.3.16. </span>HB_ISP_SetAwbAttr/HB_ISP_GetAwbAttr<a class="headerlink" href="#hb-isp-setawbattr-hb-isp-getawbattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_AWB_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAwbAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAwbAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置AWB算法属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAwbAttr</td>
<td>指向AWB参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>set只针对manual模式，get时传不同模式获取对应模式的值。</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setblacklevelattr-hb-isp-getblacklevelattr">
<h3><span class="section-number">5.4.3.17. </span>HB_ISP_SetBlackLevelAttr/HB_ISP_GetBlackLevelAttr<a class="headerlink" href="#hb-isp-setblacklevelattr-hb-isp-getblacklevelattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetBlackLevelAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_BLACK_LEVEL_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstBlackLevelAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetBlackLevelAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_BLACK_LEVEL_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstBlackLevelAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置黑电平属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstBlackLevelAttr</td>
<td>指向黑电平参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>set只针对manual模式，get时传不同模式获取对应模式的值。</p>
<p>auto模式下，black_level
值为calibraiton参数BLACK_LEVEL_B/BLACK_LEVEL_GB/BLACK_LEVEL_GR/BLACK_LEVEL_R根据当前曝光gain插值得到。</p>
<p>manual模式下，用户可设置black_level 值。</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setdemosaicattr-hb-isp-getdemosaicattr">
<h3><span class="section-number">5.4.3.18. </span>HB_ISP_SetDemosaicAttr/HB_ISP_GetDemosaicAttr<a class="headerlink" href="#hb-isp-setdemosaicattr-hb-isp-getdemosaicattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetDemosaicAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_DEMOSAIC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstDemosaicAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetDemosaicAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_DEMOSAIC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstDemosaicAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置解马赛克模块属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstDemosaicAttr</td>
<td>指向解马赛克参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setsharpenattr-hb-isp-getsharpenattr">
<h3><span class="section-number">5.4.3.19. </span>HB_ISP_SetSharpenAttr/HB_ISP_GetSharpenAttr<a class="headerlink" href="#hb-isp-setsharpenattr-hb-isp-getsharpenattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetSharpenAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_SHARPEN_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSharpenAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetSharpenAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_SHARPEN_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSharpenAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置锐化属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstSharpenAttr</td>
<td>指向锐化参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setgammaattr-hb-isp-getgammaattr">
<h3><span class="section-number">5.4.3.20. </span>HB_ISP_SetGammaAttr/HB_ISP_GetGammaAttr<a class="headerlink" href="#hb-isp-setgammaattr-hb-isp-getgammaattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetGammaAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_GAMMA_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstGammaAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetGammaAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_GAMMA_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstGammaAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置Gamma属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstGammaAttr</td>
<td>指向Gamma参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setiridixattr-hb-isp-getiridixattr">
<h3><span class="section-number">5.4.3.21. </span>HB_ISP_SetIridixAttr/HB_ISP_GetIridixAttr<a class="headerlink" href="#hb-isp-setiridixattr-hb-isp-getiridixattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetIridixAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_IRIDIX_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstIridixAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetIridixAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_IRIDIX_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstIridixAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置Iridix模块属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstIridixAttr</td>
<td>指向Iridix参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setiridixstrengthlevel-hb-isp-getiridixstrengthlevel">
<h3><span class="section-number">5.4.3.22. </span>HB_ISP_SetIridixStrengthLevel/HB_ISP_GetIridixStrengthLevel<a class="headerlink" href="#hb-isp-setiridixstrengthlevel-hb-isp-getiridixstrengthlevel" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetIridixStrengthLevel</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">level</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetIridixStrengthLevel</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">level</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置Iridix强度等级。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>level</td>
<td>强度等级，范围 [0, 255]</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setcnrattr-hb-isp-getcnrattr">
<h3><span class="section-number">5.4.3.23. </span>HB_ISP_SetCnrAttr/HB_ISP_GetCnrAttr<a class="headerlink" href="#hb-isp-setcnrattr-hb-isp-getcnrattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetCnrAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_CNR_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstCnrAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetCnrAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_CNR_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstCnrAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置色度降噪模块属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstCnrAttr</td>
<td>指向色度降噪参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setsinterattr-hb-isp-getsinterattr">
<h3><span class="section-number">5.4.3.24. </span>HB_ISP_SetSinterAttr/HB_ISP_GetSinterAttr<a class="headerlink" href="#hb-isp-setsinterattr-hb-isp-getsinterattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetSinterAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_SINTER_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSinterAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetSinterAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_SINTER_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSinterAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置空域降噪模块属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstSinterAttr</td>
<td>指向空域降噪参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-settemperattr-hb-isp-gettemperattr">
<h3><span class="section-number">5.4.3.25. </span>HB_ISP_SetTemperAttr/HB_ISP_GetTemperAttr<a class="headerlink" href="#hb-isp-settemperattr-hb-isp-gettemperattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetTemperAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_TEMPER_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstTemperAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetTemperAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_TEMPER_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstTemperAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置时域降噪模块属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstTemperAttr</td>
<td>指向时域降噪参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setmeshshadingattr-hb-isp-getmeshshadingattr">
<h3><span class="section-number">5.4.3.26. </span>HB_ISP_SetMeshShadingAttr/HB_ISP_GetMeshShadingAttr<a class="headerlink" href="#hb-isp-setmeshshadingattr-hb-isp-getmeshshadingattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetMeshShadingAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">MESH_SHADING_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstMeshShadingAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetMeshShadingAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">MESH_SHADING_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstMeshShadingAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置Mesh Shading模块属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstMeshShadingAttr</td>
<td>指向MeshShading参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setmeshshadinglut-hb-isp-getmeshshadinglut">
<h3><span class="section-number">5.4.3.27. </span>HB_ISP_SetMeshShadingLUT/HB_ISP_GetMeshShadingLUT<a class="headerlink" href="#hb-isp-setmeshshadinglut-hb-isp-getmeshshadinglut" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetMeshShadingLUT</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">MESH_SHADING_LUT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstMeshShadingLUT</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetMeshShadingLUT</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">MESH_SHADING_LUT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstMeshShadingLUT</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置Mesh Shading模块LUT表。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstMeshShadingLUT</td>
<td>指向MeshShading LUT表的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setradialshadingattr-hb-isp-getradialshadingattr">
<h3><span class="section-number">5.4.3.28. </span>HB_ISP_SetRadialShadingAttr/HB_ISP_GetRadialShadingAttr<a class="headerlink" href="#hb-isp-setradialshadingattr-hb-isp-getradialshadingattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetRadialShadingAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">RADIAL_SHADING_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRadialShadingAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetRadialShadingAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">RADIAL_SHADING_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRadialShadingAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置Radial Shading模块属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstRadialShadingAttr</td>
<td>指向Radial Shading参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setradialshadinglut-hb-isp-getradialshadinglut">
<h3><span class="section-number">5.4.3.29. </span>HB_ISP_SetRadialShadingLUT/HB_ISP_GetRadialShadingLUT<a class="headerlink" href="#hb-isp-setradialshadinglut-hb-isp-getradialshadinglut" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetRadialShadingLUT</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">RADIAL_SHADING_LUT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRadialShadingLUT</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetRadialShadingLUT</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">RADIAL_SHADING_LUT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRadialShadingLUT</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置Radial Shading模块LUT表。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstRadialShadingLUT</td>
<td>指向Radial Shading LUT表的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setcscattr-hb-isp-getcscattr">
<h3><span class="section-number">5.4.3.30. </span>HB_ISP_SetCSCAttr/HB_ISP_GetCSCAttr<a class="headerlink" href="#hb-isp-setcscattr-hb-isp-getcscattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetCSCAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_CSC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstCSCAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetCSCAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_CSC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstCSCAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置颜色空间转换模块的属性。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstCSCAttr</td>
<td>指向CSC属性的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setscenemodesattr-hb-isp-getscenemodesattr">
<h3><span class="section-number">5.4.3.31. </span>HB_ISP_SetSceneModesAttr/HB_ISP_GetSceneModesAttr<a class="headerlink" href="#hb-isp-setscenemodesattr-hb-isp-getscenemodesattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetSceneModesAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_SCENE_MODES_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSceneModesAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetSceneModesAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_SCENE_MODES_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSceneModesAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置场景模式。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstSceneModesAttr</td>
<td>指向场景模式参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setawbzoneinfo-hb-isp-getawbzoneinfo">
<h3><span class="section-number">5.4.3.32. </span>HB_ISP_SetAwbZoneInfo/HB_ISP_GetAwbZoneInfo<a class="headerlink" href="#hb-isp-setawbzoneinfo-hb-isp-getawbzoneinfo" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbZoneInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">awbZoneInfo</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbZoneInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="n">awbZoneInfo</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取/设置AWB zones信息。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>awbZoneInfo</td>
<td>指向AWB zones 信息的指针（获取时）； AWB zones 信息数据结构（设置时）；</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】无</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setafzoneinfo-hb-isp-getafzoneinfo">
<h3><span class="section-number">5.4.3.33. </span>HB_ISP_SetAfZoneInfo/HB_ISP_GetAfZoneInfo<a class="headerlink" href="#hb-isp-setafzoneinfo-hb-isp-getafzoneinfo" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAfZoneInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">afZoneInfo</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAfZoneInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">afZoneInfo</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取/设置AF zones信息。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>afZoneInfo</td>
<td>指向AF zones 信息的指针（获取时）； AF zones 信息数据结构（设置时）；</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】无</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setae5binzoneinfo-hb-isp-getae5binzoneinfo">
<h3><span class="section-number">5.4.3.34. </span>HB_ISP_SetAe5binZoneInfo/HB_ISP_GetAe5binZoneInfo<a class="headerlink" href="#hb-isp-setae5binzoneinfo-hb-isp-getae5binzoneinfo" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAe5binZoneInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">ae5binZoneInfo</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAe5binZoneInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="n">ae5binZoneInfo</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取/设置AE 5bin zones信息。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>ae5binZoneInfo</td>
<td>指向AE 5bin zones 信息的指针（获取时）； AE 5BIN zones 信息数据结构（设置时）；</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setafkernelinfo-hb-isp-getafkernelinfo">
<h3><span class="section-number">5.4.3.35. </span>HB_ISP_SetAfKernelInfo/HB_ISP_GetAfKernelInfo<a class="headerlink" href="#hb-isp-setafkernelinfo-hb-isp-getafkernelinfo" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAfKernelInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">af_kernel</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAfKernelInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">af_kernel</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取/设置AF KERNEL信息。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>af_kernel</td>
<td>指向af_kernel指针（获取时）； af_kernel数据信息（设置时）；</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>该接口主要为应用使用，如获取或改变当前af统计数据kernel。</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-setaeparam-hb-isp-getaeparam">
<h3><span class="section-number">5.4.3.36. </span>HB_ISP_SetAeParam/HB_ISP_GetAeParam<a class="headerlink" href="#hb-isp-setaeparam-hb-isp-getaeparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAeParam</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AE_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeParam</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAeParam</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AE_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取AE 参数信息，line和total_gain。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAeParam</td>
<td>指向ae 参数的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
<p>【函数声明】</p>
</section>
<section id="hb-isp-setaeroiinfo-hb-isp-getaeroiinfo">
<h3><span class="section-number">5.4.3.37. </span>HB_ISP_SetAeRoiInfo/HB_ISP_GetAeRoiInfo<a class="headerlink" href="#hb-isp-setaeroiinfo-hb-isp-getaeroiinfo" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAeRoiInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AE_ROI_ATTR_S</span><span class="w"> </span><span class="n">aeRoiInfo</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAeRoiInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AE_ROI_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">aeRoiInfo</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置ae的ROI权重区域，可以动态调用。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>aeRoiInfo</td>
<td>ROI 信息参数</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>该roi区域设置与3A-AE中roi 权重设置是独立进行，同一时刻只能使用其中一种功能。</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setawbstatareaattr-hb-isp-getawbstatareaattr">
<h3><span class="section-number">5.4.3.38. </span>HB_ISP_SetAwbStatAreaAttr/HB_ISP_GetAwbStatAreaAttr<a class="headerlink" href="#hb-isp-setawbstatareaattr-hb-isp-getawbstatareaattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbStatAreaAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_STAT_AREA_ATTR_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAwbStatAreaAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbStatAreaAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_STAT_AREA_ATTR_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAwbStatAreaAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置awb统计数据区域范围。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAwbStatAreaAttr</td>
<td>统计数据区域范围参数</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getaefullhist">
<h3><span class="section-number">5.4.3.39. </span>HB_ISP_GetAeFullHist<a class="headerlink" href="#hb-isp-getaefullhist" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAeFullHist</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">pu32AeFullHist</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取AE统计数据。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pu32AeFullHist</td>
<td>指向AE统计数据的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>该接口主要为应用使用，如依统计信息做某些策略判断，3A算法库不需要用此接口。</p>
<p>【参考代码】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span>#define HB_ISP_FULL_HISTOGRAM_SIZE 1024

int i;

uint32_t ae[HB_ISP_FULL_HISTOGRAM_SIZE];

memset(ae, 0, sizeof(ae));

HB_ISP_GetAeFullHist(0, ae);

printf(&quot;\n--AE--\n&quot;);

for (i = 0; i \&lt; HB_ISP_FULL_HISTOGRAM_SIZE; i++) {

	printf(&quot;%-8d  &quot;, ae[i]);

	if ((i + 1) % 8 == 0)

		printf(&quot;\n&quot;);

}
</pre></div>
</div>
</section>
<section id="hb-isp-getawbzonehist">
<h3><span class="section-number">5.4.3.40. </span>HB_ISP_GetAwbZoneHist<a class="headerlink" href="#hb-isp-getawbzonehist" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbZoneHist</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_STATISTICS_AWB_ZONE_ATTR_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAwbZonesAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取AWB统计数据。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAwbZonesAttr</td>
<td>指向AWB统计数据的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>该接口主要为应用使用，如依统计信息做某些策略判断，3A算法库不需要用此接口。</p>
<p>【参考代码】</p>
</section>
<section id="hb-isp-getae5binzonehist">
<h3><span class="section-number">5.4.3.41. </span>HB_ISP_GetAe5binZoneHist<a class="headerlink" href="#hb-isp-getae5binzonehist" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAe5binZoneHist</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"></span>
<span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_STATISTICS_AE_5BIN_ZONE_ATTR_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pst32Ae5bin</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取AE 5bin统计数据。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pst32Ae5bin</td>
<td>指向AE 5bin统计数据的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>该接口主要为应用使用，如依统计信息做某些策略判断，3A算法库不需要用此接口。</p>
<p>【参考代码】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span>
<span class="n">ISP_STATISTICS_AE_5BIN_ZONE_ATTR_S</span><span class="w"> </span><span class="n">ae_5bin</span><span class="p">[</span><span class="n">HB_ISP_MAX_AE_5BIN_ZONES</span><span class="p">];</span><span class="w"></span>

<span class="n">ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="n">ae5binZoneInfo</span><span class="p">;</span><span class="w"></span>

<span class="n">memset</span><span class="p">(</span><span class="n">ae_5bin</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ae_5bin</span><span class="p">));</span><span class="w"></span>

<span class="n">HB_ISP_GetAe5binZoneHist</span><span class="p">(</span><span class="n">ctx_idx</span><span class="p">,</span><span class="w"> </span><span class="n">ae_5bin</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-isp-getafzonehist">
<h3><span class="section-number">5.4.3.42. </span>HB_ISP_GetAfZoneHist<a class="headerlink" href="#hb-isp-getafzonehist" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAfZoneHist</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">af_stats_data_t</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAfZonesAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取AF统计数据。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAfZonesAttr</td>
<td>指向AF统计数据的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>1.该接口主要为应用使用，如依统计信息做某些策略判断，3A算法库不需要用此接口。</p>
<p>2.此接口有好几种数据的缓存，如果要获取实时的数据，请使用HB_ISP_GetMeteringData接口去获取，HB_ISP_GetMeteringData是获取的实时数据。</p>
<p>【参考代码】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">af_data</span><span class="p">[</span><span class="n">HB_ISP_AF_ZONES_COUNT_MAX</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="n">af_stats_data_t</span><span class="w"> </span><span class="n">af</span><span class="p">;</span><span class="w"></span>

<span class="n">ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="n">afZoneInfo</span><span class="p">;</span><span class="w"></span>

<span class="n">memset</span><span class="p">(</span><span class="n">af_data</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">af_data</span><span class="p">));</span><span class="w"></span>

<span class="n">af</span><span class="p">.</span><span class="n">zones_stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">af_data</span><span class="p">;</span><span class="w"></span>

<span class="n">HB_ISP_GetAfZoneHist</span><span class="p">(</span><span class="n">ctx_idx</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">af</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-isp-getmeteringdata">
<h3><span class="section-number">5.4.3.43. </span>HB_ISP_GetMeteringData<a class="headerlink" href="#hb-isp-getmeteringdata" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetMeteringData</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_METERING_DATA_TYPE_E</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">latest_flag</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取AF/LUMVAR统计数据。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>data</td>
<td>指向AF/LUMVAR统计数据的指针</td>
<td>输出</td>
</tr>
<tr>
<td>type</td>
<td>获取统计数据类型（AF/LUMVAR）</td>
<td>输入</td>
</tr>
<tr>
<td>latest_flag</td>
<td>是否获取最新数据</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>1.此接口获取得值fv即是可以直接用来聚焦计算。</p>
<p>2.可以不需要调用HB_ISP_GetVDTTimeOut帧中断接口再去获取，直接调用此接口获取就是最新的值。</p>
</section>
<section id="hb-isp-getvdttimeout">
<h3><span class="section-number">5.4.3.44. </span>HB_ISP_GetVDTTimeOut<a class="headerlink" href="#hb-isp-getvdttimeout" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetVDTTimeOut</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">vdt_type</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">timeout</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取ISP FRAME_START 或FRAME_END信息。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>vdt_type</td>
<td>选择获取ISP frame_start or frame_end</td>
<td>输入</td>
</tr>
<tr>
<td>timeout</td>
<td>超时返回时间</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>FS/FE 同步</td>
</tr>
<tr>
<td>非0</td>
<td>超时返回</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>该接口主要为应用使用，如进行时序同步。</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getlumazonehist">
<h3><span class="section-number">5.4.3.45. </span>HB_ISP_GetLumaZoneHist<a class="headerlink" href="#hb-isp-getlumazonehist" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetLumaZoneHist</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_STATISTICS_LUMVAR_ZONE_ATTR_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pst32Luma</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取LUMVAR 统计信息均值及方差。</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pst32Luma</td>
<td>执行lumvar 统计信息的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setaecontrol-hb-isp-getaecontrol">
<h3><span class="section-number">5.4.3.46. </span>HB_ISP_SetAEControl/ HB_ISP_GetAEControl<a class="headerlink" href="#hb-isp-setaecontrol-hb-isp-getaecontrol" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAEControl</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AE_CONTROL</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeControl</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAEControl</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AE_CONTROL</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeControl</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取AE控制信息</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAeControl</td>
<td>指向AE控制信息的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setaecorrection-hb-isp-getaecorrection">
<h3><span class="section-number">5.4.3.47. </span>HB_ISP_SetAECorrection/ HB_ISP_GetAECorrection<a class="headerlink" href="#hb-isp-setaecorrection-hb-isp-getaecorrection" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAECorrection</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AE_CORRECTION</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAeCorrection</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAECorrection</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AE_CORRECTION</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeCorrection</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取AE校正信息</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAeCorrection</td>
<td>指向AE校正信息的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-set-ae-5bin-hist-hb-isp-get-ae-5bin-hist">
<h3><span class="section-number">5.4.3.48. </span>HB_ISP_Set_AE_5bin_Hist/ HB_ISP_Get_AE_5bin_Hist<a class="headerlink" href="#hb-isp-set-ae-5bin-hist-hb-isp-get-ae-5bin-hist" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_Set_AE_5bin_Hist</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_5BIN_HIST</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pAe5binHist</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_Get_AE_5bin_Hist</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_5BIN_HIST</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pAe5binHist</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取AE的5bin统计信息</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pAe5binHist</td>
<td>指向AE的5bin统计信息的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setexposureratioadjustment-hb-isp-getexposureratioadjustment">
<h3><span class="section-number">5.4.3.49. </span>HB_ISP_SetExposureRatioAdjustment/ HB_ISP_GetExposureRatioAdjustment<a class="headerlink" href="#hb-isp-setexposureratioadjustment-hb-isp-getexposureratioadjustment" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetExposureRatioAdjustment</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_EXP_RATIO_ADJ</span><span class="w"></span>
<span class="o">*</span><span class="n">pstExpRatioAdj</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetExposureRatioAdjustment</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_EXP_RATIO_ADJ</span><span class="w"></span>
<span class="o">*</span><span class="n">pstExpRatioAdj</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取曝光比例调整</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstExpRatioAdj</td>
<td>指向曝光比例的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setexposurepartitionluts-hb-isp-getexposurepartitionluts">
<h3><span class="section-number">5.4.3.50. </span>HB_ISP_SetExposurePartitionLuts/ HB_ISP_GetExposurePartitionLuts<a class="headerlink" href="#hb-isp-setexposurepartitionluts-hb-isp-getexposurepartitionluts" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetExposurePartitionLuts</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_EXP_PAT_LUTS</span><span class="w"></span>
<span class="o">*</span><span class="n">pstExpPatLuts</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetExposurePartitionLuts</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_EXP_PAT_LUTS</span><span class="w"></span>
<span class="o">*</span><span class="n">pstExpPatLuts</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取曝光分区Lut表信息</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstExpPatLuts</td>
<td>指向曝光分区lut表的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setawbbgmaxgain-hb-isp-getawbbgmaxgain">
<h3><span class="section-number">5.4.3.51. </span>HB_ISP_SetAwbBgMaxGain/HB_ISP_GetAwbBgMaxGain<a class="headerlink" href="#hb-isp-setawbbgmaxgain-hb-isp-getawbbgmaxgain" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbBgMaxGain</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AWB_BG_MAX_GAIN</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAwbBgMaxGain</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbBgMaxGain</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_BG_MAX_GAIN</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAwbBgMaxGain</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取 AWB BG最大增益</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAwbBgMaxGain</td>
<td>指向AWB BG最大增益的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setccmsaturationstrength-hb-isp-getccmsaturationstrength">
<h3><span class="section-number">5.4.3.52. </span>HB_ISP_SetCcmSaturationStrength/ HB_ISP_GetCcmSaturationStrength<a class="headerlink" href="#hb-isp-setccmsaturationstrength-hb-isp-getccmsaturationstrength" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetCcmSaturationStrength</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_CCM_SATURA_STRENG</span><span class="w"></span>
<span class="o">*</span><span class="n">pstCcmSatStre</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetCcmSaturationStrength</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_CCM_SATURA_STRENG</span><span class="w"></span>
<span class="o">*</span><span class="n">pstCcmSatStre</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取CCM饱和强度信息</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstCcmSatStre</td>
<td>指向CCM曝光强度的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setccmmtls-hb-isp-getccmmtls">
<h3><span class="section-number">5.4.3.53. </span>HB_ISP_SetCcmMtLs/ HB_ISP_GetCcmMtLs<a class="headerlink" href="#hb-isp-setccmmtls-hb-isp-getccmmtls" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetCcmMtLs</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_MT_ABSOLUTE_LS</span><span class="w"></span>
<span class="o">*</span><span class="n">pstMtAbsoluteLs</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetCcmMtLs</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_MT_ABSOLUTE_LS</span><span class="w"> </span><span class="o">*</span><span class="n">pstMtAbsoluteLs</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取CCM Mt Ls</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstMtAbsoluteLs</td>
<td>指向CCM Mt Ls的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setccmattr-hb-isp-getccmattr">
<h3><span class="section-number">5.4.3.54. </span>HB_ISP_SetCcmAttr/HB_ISP_GetCcmAttr<a class="headerlink" href="#hb-isp-setccmattr-hb-isp-getccmattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetCcmAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_CCM_ONE_GAIN_THRESHOLD</span><span class="w"></span>
<span class="o">*</span><span class="n">pstOneGainThreshold</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetCcmAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_CCM_ONE_GAIN_THRESHOLD</span><span class="w"></span>
<span class="o">*</span><span class="n">pstOneGainThreshold</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取CCM属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstOneGainThreshold</td>
<td>指向CCM属性的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setgammaev1-hb-isp-getgammaev1">
<h3><span class="section-number">5.4.3.55. </span>HB_ISP_SetGammaEv1/HB_ISP_GetGammaEv1<a class="headerlink" href="#hb-isp-setgammaev1-hb-isp-getgammaev1" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetGammaEv1</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_GAMMA_EV1</span><span class="w"> </span><span class="o">*</span><span class="n">pstGammaEv1</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetGammaEv1</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_GAMMA_EV1</span><span class="w"> </span><span class="o">*</span><span class="n">pstGammaEv1</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取Gamma Ev1属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstGammaEv1</td>
<td>指向Gamma Ev1的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setgammaev2-hb-isp-getgammaev2">
<h3><span class="section-number">5.4.3.56. </span>HB_ISP_SetGammaEv2/HB_ISP_GetGammaEv2<a class="headerlink" href="#hb-isp-setgammaev2-hb-isp-getgammaev2" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetGammaEv2</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_GAMMA_EV2</span><span class="w"> </span><span class="o">*</span><span class="n">pstGammaEv2</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetGammaEv2</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_GAMMA_EV2</span><span class="w"> </span><span class="o">*</span><span class="n">pstGammaEv2</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取Gamma Ev2属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstGammaEv2</td>
<td>指向Gamma Ev2的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setgammathreshold-hb-isp-getgammathreshold">
<h3><span class="section-number">5.4.3.57. </span>HB_ISP_SetGammaThreshold/ HB_ISP_GetGammaThreshold<a class="headerlink" href="#hb-isp-setgammathreshold-hb-isp-getgammathreshold" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetGammaThreshold</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_GAMMA_THRESHOLD</span><span class="w"></span>
<span class="o">*</span><span class="n">pstGammaThd</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetGammaThreshold</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_GAMMA_THRESHOLD</span><span class="w"> </span><span class="o">*</span><span class="n">pstGammaThd</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取Gamma临界值</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstGammaThd</td>
<td>指向Gamma临界值的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getevtoluxstatustattr-hb-isp-setevtoluxstatustattr">
<h3><span class="section-number">5.4.3.58. </span>HB_ISP_GetEvToLuxStatustAttr/ HB_ISP_SetEvToLuxStatustAttr<a class="headerlink" href="#hb-isp-getevtoluxstatustattr-hb-isp-setevtoluxstatustattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetEvToLuxStatustAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"></span>
<span class="o">*</span><span class="n">pstEvtoluxStatustAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetEvToLuxStatustAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"></span>
<span class="o">*</span><span class="n">pstEvtoluxStatustAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取evtolux属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstEvtoluxStatustAttr</td>
<td>指向evtolux属性的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setcctctrlattr-hb-isp-getcctctrlattr">
<h3><span class="section-number">5.4.3.59. </span>HB_ISP_SetCctCtrlAttr/ HB_ISP_GetCctCtrlAttr<a class="headerlink" href="#hb-isp-setcctctrlattr-hb-isp-getcctctrlattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetCctCtrlAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AWB_CCT_CTRL_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstCctAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetCctCtrlAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_CCT_CTRL_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstCctAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取CCT属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstCctAttr</td>
<td>指向CCT属性的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setawbavgcoeff-hb-isp-getawbavgcoeff">
<h3><span class="section-number">5.4.3.60. </span>HB_ISP_SetAwbAvgCoeff/HB_ISP_GetAwbAvgCoeff<a class="headerlink" href="#hb-isp-setawbavgcoeff-hb-isp-getawbavgcoeff" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbAvgCoeff</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">Coeff</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbAvgCoeff</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">Coeff</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置AWB平均参数</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>Coeff</td>
<td>指向AWB平均参数的指针，值越小收敛step越少，值越小收敛越快，值越大收敛step越大</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setmixlightattr-hb-isp-getmixlightattr">
<h3><span class="section-number">5.4.3.61. </span>HB_ISP_SetMixLightAttr/HB_ISP_GetMixLightAttr<a class="headerlink" href="#hb-isp-setmixlightattr-hb-isp-getmixlightattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetMixLightAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_MIX_LIGHT_PARAM_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstMixLightAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetMixLightAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_MIX_LIGHT_PARAM_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstMixLightAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置MIX LIGHT属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstMixLightAttr</td>
<td>指向MIX LIGHT属性的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setskyctrlattr-hb-isp-getskyctrlattr">
<h3><span class="section-number">5.4.3.62. </span>HB_ISP_SetSkyCtrlAttr/ HB_ISP_GetSkyCtrlAttr<a class="headerlink" href="#hb-isp-setskyctrlattr-hb-isp-getskyctrlattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetSkyCtrlAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_SKY_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSkyCtrlAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetSkyCtrlAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_SKY_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSkyCtrlAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置outdoor daylight属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstSkyCtrlAttr</td>
<td>指向outdoor daylight属性的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-apictrl">
<h3><span class="section-number">5.4.3.63. </span>HB_ISP_ApiCtrl<a class="headerlink" href="#hb-isp-apictrl" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_ApiCtrl</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">direction</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"></span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">val</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>Api 控制</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>direction</td>
<td>设置/获取</td>
<td>输入</td>
</tr>
<tr>
<td>type</td>
<td>大类型</td>
<td>输入</td>
</tr>
<tr>
<td>cmd</td>
<td>小类型</td>
<td>输入</td>
</tr>
<tr>
<td>val</td>
<td>获取/设置的值</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-gettemplut-hb-isp-settemplut">
<h3><span class="section-number">5.4.3.64. </span>HB_ISP_GetTempLut/ HB_ISP_SetTempLut<a class="headerlink" href="#hb-isp-gettemplut-hb-isp-settemplut" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetTempLut</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">TEMPER_NP_LUT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstTemperLUT</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetTempLut</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">TEMPER_NP_LUT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstTemperLUT</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取temper lut表</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstTemperLUT</td>
<td>指向temper 模块的lut表的指针。</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setawbrgbgweightattr-hb-isp-getawbrgbgweightattr">
<h3><span class="section-number">5.4.3.65. </span>HB_ISP_SetAwbRgBgWeightAttr/ HB_ISP_GetAwbRgBgWeightAttr<a class="headerlink" href="#hb-isp-setawbrgbgweightattr-hb-isp-getawbrgbgweightattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbRgBgWeightAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_MESH_RGBG_WEIGHT_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstWeightAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbRgBgWeightAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_MESH_RGBG_WEIGHT_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstWeightAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取awb rg bg 权重表</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstWeightAttr</td>
<td>指向普朗克曲线weight权重表的指针。</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getawblsweightatt-hb-isp-setawblsweightattr">
<h3><span class="section-number">5.4.3.66. </span>HB_ISP_GetAwbLsWeightAtt/ HB_ISP_SetAwbLsWeightAttr<a class="headerlink" href="#hb-isp-getawblsweightatt-hb-isp-setawblsweightattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbLsWeightAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_MESH_LS_WEIGHT_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstWeightAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbLsWeightAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_MESH_LS_WEIGHT_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstWeightAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取awb ls weight属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstWeightAttr</td>
<td>指向孤立光源点weight权重的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getawbdefultparmattr-hb-isp-setawbdefultparmattr">
<h3><span class="section-number">5.4.3.67. </span>HB_ISP_GetAwbDefultParmAttr/ HB_ISP_SetAwbDefultParmAttr<a class="headerlink" href="#hb-isp-getawbdefultparmattr-hb-isp-setawbdefultparmattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbDefultParmAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_DEFAULT_PARAM_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAwbAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbDefultParmAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AWB_DEFAULT_PARAM_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstAwbAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取CALIBRATION_CT30POS 参数</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAwbAttr</td>
<td>指向awb U30数组标号的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setawbcolortempweightattr-hb-isp-getawbcolortempweightattr">
<h3><span class="section-number">5.4.3.68. </span>HB_ISP_SetAwbColorTempWeightAttr/ HB_ISP_GetAwbColorTempWeightAttr<a class="headerlink" href="#hb-isp-setawbcolortempweightattr-hb-isp-getawbcolortempweightattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbColorTempWeightAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="n">ISP_MESH_COLOR_TEMP_WEIGHT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstWeightAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbColorTempWeightAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"></span>
<span class="n">ISP_MESH_COLOR_TEMP_WEIGHT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstWeightAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取CALIBRATION_MESH_COLOR_TEMPERATURE属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstWeightAttr</td>
<td>指向色温权重表的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setawbposstatusattr-hb-isp-getawbposstatusattr">
<h3><span class="section-number">5.4.3.69. </span>HB_ISP_SetAwbPosStatusAttr/ HB_ISP_GetAwbPosStatusAttr<a class="headerlink" href="#hb-isp-setawbposstatusattr-hb-isp-getawbposstatusattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbPosStatusAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AWB_POS_STATUS_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstPosAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbPosStatusAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_POS_STATUS_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstPosAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取awb位置状态</p>
<p>CALIBRATION_RG_POS</p>
<p>CALIBRATION_BG_POS</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstPosAttr</td>
<td>指向rgain/bgain数组的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setawblightsourceattr-hb-isp-getawblightsourceattr">
<h3><span class="section-number">5.4.3.70. </span>HB_ISP_SetAwbLightSourceAttr/ HB_ISP_GetAwbLightSourceAttr<a class="headerlink" href="#hb-isp-setawblightsourceattr-hb-isp-getawblightsourceattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbLightSourceAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AWB_LIGHT_SOURCE_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstLightAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAwbLightSourceAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_LIGHT_SOURCE_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstLightAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取awb光源属性</p>
<p>COLOR_TEMP</p>
<p>CT_RG_POS_CALC</p>
<p>CT_BG_POS_CALC</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstLightAttr</td>
<td>指向光源属性的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getwdroffsetattr-hb-isp-setwdroffsetattr">
<h3><span class="section-number">5.4.3.71. </span>HB_ISP_GetWdrOffsetAttr/ HB_ISP_SetWdrOffsetAttr<a class="headerlink" href="#hb-isp-getwdroffsetattr-hb-isp-setwdroffsetattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetWdrOffsetAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_WDR_OFFSET_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstWdrOffsetAttr</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetWdrOffsetAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_WDR_OFFSET_S</span><span class="w"></span>
<span class="o">*</span><span class="n">pstWdrOffsetAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取wdr偏移属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstWdrOffsetAttr</td>
<td>指向wdr偏移属性的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-sethdraexptypeattr">
<h3><span class="section-number">5.4.3.72. </span>HB_ISP_SetHdrAexpTypeAttr<a class="headerlink" href="#hb-isp-sethdraexptypeattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetHdrAexpTypeAttr</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_HDR_AEXP_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAexpTypeAttr</span><span class="p">,</span><span class="w"></span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">scale_bottom</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">scale_top</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置hdr ae1024bin权重属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAexpTypeAttr</td>
<td>选择长短帧</td>
<td>输入</td>
</tr>
<tr>
<td>scale_bottom</td>
<td>低bin处缩放</td>
<td>输入</td>
</tr>
<tr>
<td>scale_top</td>
<td>高bin处停止</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getafstatus">
<h3><span class="section-number">5.4.3.73. </span>HB_ISP_GetAfStatus<a class="headerlink" href="#hb-isp-getafstatus" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAfStatus</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AF_STATUS_E</span><span class="w"> </span><span class="o">*</span><span class="n">pstAfStatusAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取af状态</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAfStatusAttr</td>
<td>指向af状态的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getafinfo">
<h3><span class="section-number">5.4.3.74. </span>HB_ISP_GetAfInfo<a class="headerlink" href="#hb-isp-getafinfo" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAfInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AF_LENS_INFO_S</span><span class="w"> </span><span class="o">*</span><span class="n">ptrLenInfo</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取af信息</p>
<p>AF_MANUAL_CONTROL</p>
<p>AF_RANGE_LOW</p>
<p>AF_RANGE_HIGH</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>ptrLenInfo</td>
<td>指向af信息的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setafmanualpos">
<h3><span class="section-number">5.4.3.75. </span>HB_ISP_SetAfManualPos<a class="headerlink" href="#hb-isp-setafmanualpos" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAfManualPos</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AF_MODE_E</span><span class="w"> </span><span class="n">stAfModeAttr</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"></span>
<span class="n">pos</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置af 模式</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>stAfModeAttr</td>
<td>指向af模式类型的指针</td>
<td>输入</td>
</tr>
<tr>
<td>pos</td>
<td>只在manual 模式下有作用</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setflickerstatus-hb-isp-getflickerstatus">
<h3><span class="section-number">5.4.3.76. </span>HB_ISP_SetFlickerStatus/HB_ISP_GetFlickerStatus<a class="headerlink" href="#hb-isp-setflickerstatus-hb-isp-getflickerstatus" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetFlickerStatus</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">flicker_enable</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"></span>
<span class="n">flicker_frequency</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetFlickerStatus</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">flicker_enable</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"></span>
<span class="o">*</span><span class="n">flicker_frequency</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取flicker状态</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>flicker_enable</td>
<td>使能flincker</td>
<td>输入</td>
</tr>
<tr>
<td>flicker_frequency</td>
<td>filcker 频率</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>flicker_frequency 为频率值，eg. 50hz输入50；60hz 输入60，50hz下flicker限制的曝光时间10ms,如果对着灯光亮度太亮，曝光时间少于10ms，那flicker不会重新拉到10ms，可以使用HB_ISP_SetAeMinIntertime(uint8_t pipeId, uint32_t stAeMinTime)把最小时间固定在10ms</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setaeattrex-hb-isp-getaeattrex">
<h3><span class="section-number">5.4.3.77. </span>HB_ISP_SetAeAttrEx/HB_ISP_GetAeAttrEx<a class="headerlink" href="#hb-isp-setaeattrex-hb-isp-getaeattrex" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAeAttrEx</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ISP_AE_ATTR_EX_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeAttrEx</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAeAttrEx</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AE_ATTR_EX_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeAttrEx</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置ae 属性</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAeAttrEx</td>
<td>指向ae参数的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getaeweight-hb-isp-setaeweight">
<h3><span class="section-number">5.4.3.78. </span>HB_ISP_GetAeWeight/HB_ISP_SetAeWeight<a class="headerlink" href="#hb-isp-getaeweight-hb-isp-setaeweight" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAeWeight</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">AE_ZONES_WEIGHT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeWeightLUT</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAeWeight</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">AE_ZONES_WEIGHT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeWeightLUT</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取ae weight</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAeWeightLUT</td>
<td>指向ae weight表的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-getaeminintertime-hb-isp-setaeminintertime">
<h3><span class="section-number">5.4.3.79. </span>HB_ISP_GetAeMinIntertime/HB_ISP_SetAeMinIntertime<a class="headerlink" href="#hb-isp-getaeminintertime-hb-isp-setaeminintertime" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_GetAeMinIntertime</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">pstAeMinTime</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAeMinIntertime</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">stAeMinTime</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取ae最小intertime</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>pstAeMinTime</td>
<td>指向最小intertime的指针，单位为行</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>这个接口自动曝光和手动曝光功能下都生效</p>
<p>【参考代码】无</p>
</section>
<section id="hb-getawbtemperatureinfo">
<h3><span class="section-number">5.4.3.80. </span>HB_GetAwbTemperatureInfo<a class="headerlink" href="#hb-getawbtemperatureinfo" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_GetAwbTemperatureInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">temper</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取awb色温信息</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>temper</td>
<td>指向色温的指针</td>
<td>输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setawbtolerance">
<h3><span class="section-number">5.4.3.81. </span>HB_ISP_SetAwbTolerance<a class="headerlink" href="#hb-isp-setawbtolerance" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAwbTolerance</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">Tolerance</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置awb容忍度信息</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>Tolerance</td>
<td>awb容忍度值，范围是[1, 50]</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-getawbmodeinfo-hb-setawbmodeinfo">
<h3><span class="section-number">5.4.3.82. </span>HB_GetAwbModeInfo/HB_SetAwbModeInfo<a class="headerlink" href="#hb-getawbmodeinfo-hb-setawbmodeinfo" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_GetAwbModeInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_MODE_E</span><span class="w"> </span><span class="o">*</span><span class="n">ptrAwbMode</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">HB_SetAwbModeInfo</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_MODE_E</span><span class="w"> </span><span class="n">AwbMode</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置/获取awb模式信息</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>ptrAwbMode</td>
<td>指向awb模式的指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-getawbgainbytemp">
<h3><span class="section-number">5.4.3.83. </span>HB_GetAwbGainByTemp<a class="headerlink" href="#hb-getawbgainbytemp" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_GetAwbGainByTemp</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">ColorTemp</span><span class="p">,</span><span class="w"> </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">Shift</span><span class="p">,</span><span class="w"> </span><span class="n">ISP_AWB_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAwbAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>获取awb色温的plank曲线公式计算出来rgain和bgain</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>ColorTemp</td>
<td>色温值，单位Kelvin，范围[1500~10000]</td>
<td>输入</td>
</tr>
<tr>
<td>Shift</td>
<td>白点与Planckian 曲线的位置和距离，范围[-64~64]</td>
<td>输入</td>
</tr>
<tr>
<td>pstAwbAttr</td>
<td>指向AwbAttr指针</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
<section id="hb-isp-setafspeed">
<h3><span class="section-number">5.4.3.84. </span>HB_ISP_SetAfSpeed<a class="headerlink" href="#hb-isp-setafspeed" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">HB_ISP_SetAfSpeed</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">pipeId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">speed</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>设置AF对焦步数</p>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>pipeId</td>
<td>Pipeline索引号</td>
<td>输入</td>
</tr>
<tr>
<td>speed</td>
<td>AF对焦步数</td>
<td>输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>非0</td>
<td>失败</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>【参考代码】无</p>
</section>
</section>
<section id="id19">
<h2><span class="section-number">5.4.4. </span>数据结构<a class="headerlink" href="#id19" title="永久链接至标题"></a></h2>
<section id="hb-isp-fw-state-e">
<h3><span class="section-number">5.4.4.1. </span>HB_ISP_FW_STATE_E<a class="headerlink" href="#hb-isp-fw-state-e" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_ISP_FW_STATE_E</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_FW_STATE_RUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_FW_STATE_FREEZE</span><span class="p">,</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_FW_STATE_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>ISP_FW_STATE_RUN</td>
<td>Firmware正常运行</td>
</tr>
<tr>
<td>ISP_FW_STATE_FREEZE</td>
<td>Firmware冻结</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-module-ctrl-u">
<h3><span class="section-number">5.4.4.2. </span>HB_ ISP_MODULE_CTRL_U<a class="headerlink" href="#hb-isp-module-ctrl-u" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">union</span> <span class="nc">HB_ISP_MODULE_CTRL_U</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">u64Value</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="k">struct</span> <span class="p">{</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassVideoTestGen</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassInputFormatter</span>        <span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassDecompander</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassSensorOffsetWDR</span>	<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassGainWDR</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassFrameStitch</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassDigitalGain</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassFrontendSensorOffset</span>	<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassFeSqrt</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassRAWFrontend</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassDefectPixel</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassSinter</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassTemper</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassCaCorrection</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassSquareBackend</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassSensorOffsetPreShading</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassRadialShading</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassMeshShading</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassWhiteBalance</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassIridixGain</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassIridix</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassMirror</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassDemosaicRGB</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassPfCorrection</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassCCM</span>			<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassCNR</span>			<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypass3Dlut</span>			<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassNonequGamma</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassFrCrop</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassFrGammaRGB</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassFrSharpen</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassFrCsConv</span>		<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitBypassRAW</span>			<span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="kt">uint64_t</span><span class="w"> </span><span class="nl">bitRsv</span>				<span class="p">:</span><span class="w"> </span><span class="mi">31</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_MODULE_CTRL_U</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】各模块bypass控制bit位定义。</p>
</section>
<section id="hb-isp-i2c-data-s">
<h3><span class="section-number">5.4.4.3. </span>HB_ISP_I2C_DATA_S<a class="headerlink" href="#hb-isp-i2c-data-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_I2C_DATA_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8DevId</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8IntPos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8Update</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8DelayFrameNum</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RegAddr</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32AddrByteNum</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Data</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32DataByteNum</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_I2C_DATA_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u8DevId</td>
<td>pipeline id</td>
</tr>
<tr>
<td>u8IntPos</td>
<td>0 frame_start   1 frame_done</td>
</tr>
<tr>
<td>u8Update</td>
<td>0 update_disable  1 update_enable</td>
</tr>
<tr>
<td>u8DelayFrameNum</td>
<td>delay frame [0,5]</td>
</tr>
<tr>
<td>u32RegAddr</td>
<td>sensor reg addr  eg. 0x3058</td>
</tr>
<tr>
<td>u32AddrByteNum</td>
<td>sensor reg num[0,4] eg.2</td>
</tr>
<tr>
<td>u32Data</td>
<td>Data to write</td>
</tr>
<tr>
<td>u32DataByteNum</td>
<td>sensor reg num[0,4]</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ae-func-s">
<h3><span class="section-number">5.4.4.4. </span>HB_ISP_AE_FUNC_S<a class="headerlink" href="#hb-isp-ae-func-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AE_FUNC_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">init_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ctx_id</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">proc_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ae_ctx</span><span class="p">,</span><span class="w"> </span><span class="n">ae_stats_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">stats</span><span class="p">,</span><span class="w"> </span><span class="n">ae_input_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">ae_output_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">output</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">deinit_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ae_ctx</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AE_FUNC_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AE算法库回调函数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>init_func</td>
<td>描述： AE算法的初始化 参数： ctx_id 入参，对应不同实例 返回： 指向实例指针</td>
</tr>
<tr>
<td>proc_func</td>
<td>描述： 做AE算法处理 参数： ae_ctx 入参，是init_func的返回值，对应一个实例 stats 入参，对应AE统计数据 input 入参，ISP Firmware传给算法的参数 output 出参，AE算法的输出结果，会配置给ISP Firmware 返回： 0成功，非0失败</td>
</tr>
<tr>
<td>deinit_func</td>
<td>描述： AE去初始化 参数： ae_ctx 入参，是init_func的返回值，对应一个实例 返回： 0成功，非0失败</td>
</tr>
</tbody>
</table></section>
<section id="ae-stats-data-t">
<h3><span class="section-number">5.4.4.5. </span>ae_stats_data_t<a class="headerlink" href="#ae-stats-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_stats_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">fullhist</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">fullhist_size</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">fullhist_sum</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">zone_hist</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">zone_hist_size</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_stats_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AE统计数据结构体。有关AE统计数据详细描述可见<a class="reference external" href="#_AE%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF">统计信息</a>章节。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>fullhist</td>
<td>全局统计数据指针</td>
</tr>
<tr>
<td>fullhist_size</td>
<td>统计数据占用空间大小</td>
</tr>
<tr>
<td>fullhist_sum</td>
<td>参与统计的点数</td>
</tr>
<tr>
<td>zone_hist</td>
<td>区域统计数据指针</td>
</tr>
<tr>
<td>zone_hist_size</td>
<td>占用空间大小</td>
</tr>
</tbody>
</table></section>
<section id="ae-input-data-t">
<h3><span class="section-number">5.4.4.6. </span>ae_input_data_t<a class="headerlink" href="#ae-input-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_input_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">custom_input</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">acamera_input</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_input_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AE算法输入参数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>custom_input</td>
<td>无含义</td>
</tr>
<tr>
<td>acamera_input</td>
<td>AE算法需要用到的参数，实际为ae_acamera_input_t类型</td>
</tr>
</tbody>
</table></section>
<section id="ae-acamera-input-t">
<h3><span class="section-number">5.4.4.7. </span>ae_acamera_input_t<a class="headerlink" href="#ae-acamera-input-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_acamera_input_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">ae_balanced_param_t</span><span class="w"> </span><span class="o">*</span><span class="n">ae_ctrl</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ae_misc_info_t</span><span class="w"> </span><span class="n">misc_info</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ae_calibration_data_t</span><span class="w"> </span><span class="n">cali_data</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ae_5bin_info_t</span><span class="w"> </span><span class="n">ae_5bin_data</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ctx_id</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_acamera_input_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>传给AE算法的参数。</p>
<p>包含以下结构体：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_balanced_param_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pi_coeff</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">target_point</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">tail_weight</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">long_clip</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">er_avg_coeff</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">hi_target_prc</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">hi_target_p</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">enable_iridix_gdg</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">AE_tol</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_balanced_param_t</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_misc_info_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">sensor_exp_number</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">total_gain</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">max_exposure_log2</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">global_max_exposure_ratio</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">iridix_contrast</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">global_exposure</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">global_ae_compensation</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">global_manual_exposure</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">global_manual_exposure_ratio</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">global_exposure_ratio</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_misc_info_t</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_calibration_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">ae_corr_lut</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ae_corr_lut_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">ae_exp_corr_lut</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ae_exp_corr_lut_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">modulation_entry_t</span><span class="w"> </span><span class="o">*</span><span class="n">ae_hdr_target</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ae_hdr_target_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">modulation_entry_t</span><span class="w"> </span><span class="o">*</span><span class="n">ae_exp_ratio_adjustment</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ae_exp_ratio_adjustment_len</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_calibration_data_t</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_5bin_info_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">zones_size</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">zones_v</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">zones_h</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">threshold0_1</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">threshold1_2</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">threshold3_4</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">threshold4_5</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">normal_bin0</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">normal_bin1</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">normal_bin3</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">normal_bin4</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_5bin_info_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>modulation_entry_t定义：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_modulation_entry_t</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w">  </span>
<span class="p">}</span><span class="w"> </span><span class="n">modulation_entry_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="ae-output-data-t">
<h3><span class="section-number">5.4.4.8. </span>ae_output_data_t<a class="headerlink" href="#ae-output-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_output_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">custom_output</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">acamera_output</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_output_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AE算法输出参数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>custom_output</td>
<td>无含义</td>
</tr>
<tr>
<td>acamera_output</td>
<td>AE算法的输出结果，代码中被强转为ae_acamera_output_t类型</td>
</tr>
</tbody>
</table></section>
<section id="ae-acamera-output-t">
<h3><span class="section-number">5.4.4.9. </span>ae_acamera_output_t<a class="headerlink" href="#ae-acamera-output-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_acamera_output_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">exposure_log2</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">exposure_ratio</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">ae_converged</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">sensor_ctrl_enable</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ae_out_info_t</span><span class="w"> </span><span class="n">ae_out_info</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ae_1024bin_weight_t</span><span class="w"> </span><span class="n">ae_1024bin_weight</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_acamera_output_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AE算法输出结果的结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>exposure_log2</td>
<td>exposure target 范围[0, uint32_t]</td>
</tr>
<tr>
<td>exposure_ratio</td>
<td>曝光比例 范围[0, 64]</td>
</tr>
<tr>
<td>ae_converged</td>
<td>AE算法的状态，是已收敛、还是进行中 1 收敛，0进行中</td>
</tr>
<tr>
<td>sensor_ctrl_enable</td>
<td>sensor 控制使能 1使能，0禁止</td>
</tr>
<tr>
<td>ae_out_info</td>
<td>ae 相关控制信息</td>
</tr>
<tr>
<td>ae_1024bin_weight</td>
<td>global 统计信息权重</td>
</tr>
</tbody>
</table></section>
<section id="ae-out-info-t">
<h3><span class="section-number">5.4.4.10. </span>ae_out_info_t<a class="headerlink" href="#ae-out-info-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_out_info_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">line</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">line_num</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sensor_again</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sensor_again_num</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sensor_dgain</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sensor_dgain_num</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">isp_dgain</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_out_info_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AE控制参数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>line[4]</td>
<td>sensor 快门参数 单位为行。</td>
</tr>
<tr>
<td>line_num</td>
<td>sensor 快门参数个数 取值：[1,4]</td>
</tr>
<tr>
<td>sensor_again[4]</td>
<td>sensor again 参数 取值：[0,255]</td>
</tr>
<tr>
<td>sensor_again_num</td>
<td>sensor again 参数个数 取值：[1,4]</td>
</tr>
<tr>
<td>sensor_dgain[4]</td>
<td>sensor dgain 参数 取值：[0,255]</td>
</tr>
<tr>
<td>sensor_dgain_num</td>
<td>sensor dgain 参数个数 取值：[1,4]</td>
</tr>
<tr>
<td>isp_dgain</td>
<td>isp dgain 参数 取值：[0,255]</td>
</tr>
</tbody>
</table></section>
<section id="ae-1024bin-weight-t">
<h3><span class="section-number">5.4.4.11. </span>ae_1024bin_weight_t<a class="headerlink" href="#ae-1024bin-weight-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_ae_1024bin_weight_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">zones_size</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">zones_weight</span><span class="p">[</span><span class="n">ISP_METERING_ZONES_AE5_V</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ISP_METERING_ZONES_AE5_H</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ae_1024bin_weight_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AE统计权重参数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>zones_size</td>
<td>统计分块个数 取值：[0,1089]</td>
</tr>
<tr>
<td>zones_weight</td>
<td>每个分块权重 取值范围：[0,15]</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-awb-func-s">
<h3><span class="section-number">5.4.4.12. </span>HB_ISP_AWB_FUNC_S<a class="headerlink" href="#hb-isp-awb-func-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AWB_FUNC_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">init_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ctx_id</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">proc_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">awb_ctx</span><span class="p">,</span><span class="w"> </span><span class="n">awb_stats_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">stats</span><span class="p">,</span><span class="w"> </span><span class="n">awb_input_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">awb_output_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">output</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">deinit_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">awb_ctx</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AWB_FUNC_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AWB算法库回调函数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>init_func</td>
<td>描述： AWB算法的初始化  参数： ctx_id 入参，对应不同实例 返回： 指向实例指针</td>
</tr>
<tr>
<td>proc_func</td>
<td>描述： 做AWB算法处理 参数： awb_ctx 入参，是init_func的返回值，对应一个实例 stats 入参，对应AWB统计数据 input 入参，ISP Firmware传给算法的参数 output 出参，AWB算法的输出结果，会配置给isp firmware 返回： 0成功，非0失败</td>
</tr>
<tr>
<td>deinit_func</td>
<td>描述： AWB去初始化 参数： awb_ctx 入参，是init_func的返回值，对应一个实例 返回： 0成功，非0失败</td>
</tr>
</tbody>
</table></section>
<section id="awb-stats-data-t">
<h3><span class="section-number">5.4.4.13. </span>awb_stats_data_t<a class="headerlink" href="#awb-stats-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_awb_stats_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">awb_zone_t</span><span class="w"> </span><span class="o">*</span><span class="n">awb_zones</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">zones_size</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">awb_stats_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AWB统计数据结构体。有关AWB统计数据详细描述可见<a class="reference external" href="#_AWB%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF">统计信息</a>章节。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>awb_zones</td>
<td>指向一个区块的统计信息的指针</td>
</tr>
<tr>
<td>zones_size</td>
<td>区域个数</td>
</tr>
</tbody>
</table></section>
<section id="awb-zone-t">
<h3><span class="section-number">5.4.4.14. </span>awb_zone_t<a class="headerlink" href="#awb-zone-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_awb_zone_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">rg</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">bg</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sum</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">awb_zone_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AWB区块统计信息结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>rg</td>
<td>区域加权的R/G或G/R均值</td>
</tr>
<tr>
<td>bg</td>
<td>区域加权的B/G或G/B均值</td>
</tr>
<tr>
<td>sum</td>
<td>参与统计的像素总数</td>
</tr>
</tbody>
</table></section>
<section id="awb-input-data-t">
<h3><span class="section-number">5.4.4.15. </span>awb_input_data_t<a class="headerlink" href="#awb-input-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_awb_input_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">custom_input</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">acamera_input</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">awb_input_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AWB算法输入参数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>custom_input</td>
<td>无含义</td>
</tr>
<tr>
<td>acamera_input</td>
<td>AWB算法需要用到的参数，实际为awb_acamera_input_t类型</td>
</tr>
</tbody>
</table></section>
<section id="awb-acamera-input-t">
<h3><span class="section-number">5.4.4.16. </span>awb_acamera_input_t<a class="headerlink" href="#awb-acamera-input-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_awb_acamera_input_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">awb_misc_info_t</span><span class="w"> </span><span class="n">misc_info</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">awb_calibration_data_t</span><span class="w"> </span><span class="n">cali_data</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">awb_acamera_input_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>传给AWB算法的参数。</p>
<p>包含以下结构体：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_awb_misc_info_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">log2_gain</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">cur_exposure_log2</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">iridix_contrast</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">global_manual_awb</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">global_awb_red_gain</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">global_awb_blue_gain</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">awb_misc_info_t</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="nf">short</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">calibration_light_src_t</span><span class="w"> </span><span class="p">)[</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_awb_calibration_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">calibration_light_src_t</span><span class="w"> </span><span class="n">cali_light_src</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_light_src_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_evtolux_ev_lut</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_evtolux_ev_lut_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_evtolux_lux_lut</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_evtolux_lux_lut_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_awb_avg_coef</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_awb_avg_coef_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_rg_pos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_rg_pos_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_bg_pos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_bg_pos_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_color_temp</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_color_temp_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_ct_rg_pos_calc</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_ct_rg_pos_calc_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_ct_bg_pos_calc</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_ct_bg_pos_calc_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">modulation_entry_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_awb_bg_max_gain</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cali_awb_bg_max_gain_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_mesh_ls_weight</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_mesh_rgbg_weight</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_evtolux_probability_enable</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_awb_mix_light_param</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_ct65pos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_ct40pos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_ct30pos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_sky_lux_th</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_wb_strength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_mesh_color_temperature</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_awb_warming_ls_a</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_awb_warming_ls_d75</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_awb_warming_ls_d50</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">cali_awb_colour_preference</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">awb_calibration_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="awb-output-data-t">
<h3><span class="section-number">5.4.4.17. </span>awb_output_data_t<a class="headerlink" href="#awb-output-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_awb_output_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">custom_output</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">acamera_output</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">awb_output_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AWB算法输出参数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>custom_output</td>
<td>无含义</td>
</tr>
<tr>
<td>acamera_output</td>
<td>AWB算法的输出结果，代码中被强制转化为awb_acamera_output_t类型</td>
</tr>
</tbody>
</table></section>
<section id="awb-acamera-output-t">
<h3><span class="section-number">5.4.4.18. </span>awb_acamera_output_t<a class="headerlink" href="#awb-acamera-output-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_awb_acamera_output_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">rg_coef</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">bg_coef</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">temperature_detected</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">p_high</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">light_source_candidate</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">awb_warming</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">awb_converged</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">awb_acamera_output_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AWB算法输出结果的结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>rg_coef</td>
<td>R Gain</td>
</tr>
<tr>
<td>bg_coef</td>
<td>B Gain</td>
</tr>
<tr>
<td>temperature_detected</td>
<td>色温值</td>
</tr>
<tr>
<td>p_high</td>
<td>用于CCM控制的高色温阈值</td>
</tr>
<tr>
<td>light_source_candidate</td>
<td>光源，用于CCM切换</td>
</tr>
<tr>
<td>awb_warming[3]</td>
<td>分别对应CCM R/G/B系数</td>
</tr>
<tr>
<td>awb_converged</td>
<td>AWB算法的状态，是已收敛、进行中还是未活动状态</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-af-func-s">
<h3><span class="section-number">5.4.4.19. </span>HB_ISP_AF_FUNC_S<a class="headerlink" href="#hb-isp-af-func-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AF_FUNC_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">init_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ctx_id</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">proc_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">af_ctx</span><span class="p">,</span><span class="w"> </span><span class="n">af_stats_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">stats</span><span class="p">,</span><span class="w"> </span><span class="n">af_input_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">af_output_data_t</span><span class="w"> </span><span class="o">*</span><span class="n">output</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">deinit_func</span><span class="w"> </span><span class="p">)(</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">af_ctx</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AF_FUNC_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AF算法库回调函数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>init_func</td>
<td>描述： AF算法的初始化  参数： ctx_id 入参，对应不同实例 返回： 指向实例指针</td>
</tr>
<tr>
<td>proc_func</td>
<td>描述： 做AF算法处理 参数： af_ctx 入参，是init_func的返回值，对应一个实例 stats 入参，对应AF统计数据 input 入参，ISP Firmware传给算法的参数 output 出参，AF算法的输出结果，会配置给ISP Firmware 返回： 0成功，非0失败</td>
</tr>
<tr>
<td>deinit_func</td>
<td>描述： AF去初始化 参数： af_ctx 入参，是init_func的返回值，对应一个实例 返回： 0成功，非0失败</td>
</tr>
</tbody>
</table></section>
<section id="af-stats-data-t">
<h3><span class="section-number">5.4.4.20. </span>af_stats_data_t<a class="headerlink" href="#af-stats-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_stats_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">zones_stats</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">zones_size</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_stats_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AF统计数据结构体。有关AF统计数据详细描述可见<a class="reference external" href="#_AF%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF">统计信息</a>章节。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>zones_stats</td>
<td>AF统计信息指针</td>
</tr>
<tr>
<td>zones_size</td>
<td>区域大小</td>
</tr>
</tbody>
</table></section>
<section id="af-input-data-t">
<h3><span class="section-number">5.4.4.21. </span>af_input_data_t<a class="headerlink" href="#af-input-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_input_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">custom_input</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">acamera_input</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_input_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AF算法输入参数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>custom_input</td>
<td>AF算法需要用到的参数</td>
</tr>
<tr>
<td>acamera_input</td>
<td>AF算法需要用到的参数，实际为af_acamera_input_t类型</td>
</tr>
</tbody>
</table></section>
<section id="af-acamera-input-t">
<h3><span class="section-number">5.4.4.22. </span>af_acamera_input_t<a class="headerlink" href="#af-acamera-input-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_acamera_input_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">af_info_t</span><span class="w"> </span><span class="n">af_info</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">af_misc_info_t</span><span class="w"> </span><span class="n">misc_info</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">af_calibration_data_t</span><span class="w"> </span><span class="n">cali_data</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_acamera_input_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>传给AF算法的参数。</p>
<p>包含以下结构体：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_lms_param_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_min_down</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_min</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_min_up</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_inf_down</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_inf</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_inf_up</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_macro_down</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_macro</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_macro_up</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_max_down</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_max</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos_max_up</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">fast_search_positions</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">skip_frames_init</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">skip_frames_move</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">dynamic_range_th</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">spot_tolerance</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">exit_th</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">caf_trigger_th</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">caf_stable_th</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">print_debug</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_lms_param_t</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_info_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">af_mode</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">refocus_required</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">zones_horiz</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">zones_vert</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">roi</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">af_pos_manual</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">zoom_step_info</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_info_t</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_misc_info_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">int16_t</span><span class="w"> </span><span class="n">accel_angle</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">lens_min_step</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_misc_info_t</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_calibration_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">af_lms_param_t</span><span class="w"> </span><span class="o">*</span><span class="n">af_param</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">af_zone_whgh_h</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">af_zone_whgh_h_len</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">af_zone_whgh_v</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">af_zone_whgh_v_len</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_calibration_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="af-output-data-t">
<h3><span class="section-number">5.4.4.23. </span>af_output_data_t<a class="headerlink" href="#af-output-data-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_output_data_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">custom_output</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">acamera_output</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_output_data_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AF算法输出参数结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>custom_output</td>
<td>无含义</td>
</tr>
<tr>
<td>acamera_output</td>
<td>AF算法的输出结果，代码中被强制转化为af_acamera_output_t类型</td>
</tr>
</tbody>
</table></section>
<section id="af-acamera-output-t">
<h3><span class="section-number">5.4.4.24. </span>af_acamera_output_t<a class="headerlink" href="#af-acamera-output-t" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">_af_acamera_output_</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">af_lens_pos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">af_sharp_val</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">af_state_t</span><span class="w"> </span><span class="n">state</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">af_acamera_output_t</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>定义AF算法输出结果的结构体。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>af_lens_pos</td>
<td>Lens位置</td>
</tr>
<tr>
<td>af_sharp_val</td>
<td>锐化值</td>
</tr>
<tr>
<td>state</td>
<td>typedef enum af_state {   AF_STATE_INACTIVE,   AF_STATE_SCAN,   AF_STATE_FOCUSED,   AF_STATE_UNFOCUSED } af_state_t;</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-op-type-e">
<h3><span class="section-number">5.4.4.25. </span>HB_ISP_OP_TYPE_E<a class="headerlink" href="#hb-isp-op-type-e" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_ISP_OP_TYPE_E</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">	</span><span class="n">OP_TYPE_AUTO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>

<span class="w">	</span><span class="n">OP_TYPE_MANUAL</span><span class="p">,</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_OP_TYPE_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>OP_TYPE_AUTO</td>
<td>Auto mode</td>
</tr>
<tr>
<td>OP_TYPE_MANUAL</td>
<td>Manual mode</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ae-attr-s">
<h3><span class="section-number">5.4.4.26. </span>HB_ISP_AE_ATTR_S<a class="headerlink" href="#hb-isp-ae-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AE_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxExposureRatio</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxIntegrationTime</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxSensorAnalogGain</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxSensorDigitalGain</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxIspDigitalGain</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Exposure</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ExposureRatio</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntegrationTime</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SensorAnalogGain</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SensorDigitalGain</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IspDigitalGain</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">enOpType</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AE_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>index 与实际倍数换算关系：y=2^(x/32)；例如设置gain值为96，则实际应用的倍率为 2^(96/32)=8x。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32Exposure</td>
<td>Control the exposure time parameter</td>
</tr>
<tr>
<td>u32ExposureRatio</td>
<td>Control the exposure ratio parameter</td>
</tr>
<tr>
<td>u32IntegrationTime</td>
<td>Control the integration time parameter</td>
</tr>
<tr>
<td>u32SensorAnalogGain</td>
<td>Control the sensor analog gain parameter Values: [0-255]</td>
</tr>
<tr>
<td>u32SensorDigitalGain</td>
<td>Control the sensor digital gain parameter Values: [0-255]</td>
</tr>
<tr>
<td>u32IspDigitalGain</td>
<td>Control the isp digital gain parameter Values: [0-255]</td>
</tr>
<tr>
<td>u32MaxExposureRatio</td>
<td>Control the max exposure ratio parameter</td>
</tr>
<tr>
<td>u32MaxIntegrationTime</td>
<td>Control the max integration time parameter</td>
</tr>
<tr>
<td>u32MaxSensorAnalogGain</td>
<td>Control the max sensor analog gain parameter Values: [0-255]</td>
</tr>
<tr>
<td>u32MaxSensorDigitalGain</td>
<td>Control the max sensor digital gain parameter Values: [0-255]</td>
</tr>
<tr>
<td>u32MaxIspDigitalGain</td>
<td>Control the max isp digital gain parameter Values: [0-255]</td>
</tr>
<tr>
<td>enOpType</td>
<td>值见<a href="#_HB_ISP_OP_TYPE_E">ISP_OP_TYPE_E</a>结构体定义。 因为无Auto参数，对于Set接口，设置Auto会把模式改为Auto，设置Manual会把模式改为Manual并设置Manual参数； 对于Get接口，设置Auto or Manual获取不同模式下的参数值；</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-af-attr-s">
<h3><span class="section-number">5.4.4.27. </span>HB_ISP_AF_ATTR_S<a class="headerlink" href="#hb-isp-af-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AF_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ZoomPos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">enOpType</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AF_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>uint32_t u32ZoomPos</td>
<td>Control the zoom parameter Values: [10-80]</td>
</tr>
<tr>
<td>enOpType</td>
<td>Reserved, no use</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-awb-attr-s">
<h3><span class="section-number">5.4.4.28. </span>HB_ISP_AWB_ATTR_S<a class="headerlink" href="#hb-isp-awb-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AWB_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RGain</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BGain</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">enOpType</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AWB_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32RGain</td>
<td>Control the awb_red_gain parameter Values: [0-4096] format: unsigned 4.8 bit fixed-point</td>
</tr>
<tr>
<td>u32BGain</td>
<td>Control the awb_blue_gain parameter Values: [0-4096] format: unsigned 4.8 bit fixed-point</td>
</tr>
<tr>
<td>enOpType</td>
<td>值见<a href="#_HB_ISP_OP_TYPE_E">ISP_OP_TYPE_E</a>结构体定义。 因为无Auto参数，对于Set接口，设置Auto会把模式改为Auto，设置Manual会把模式改为Manual并设置Manual参数； 对于Get接口，设置Auto or Manual获取不同模式下的参数值；</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-black-level-attr-s">
<h3><span class="section-number">5.4.4.29. </span>HB_ISP_BLACK_LEVEL_ATTR_S<a class="headerlink" href="#hb-isp-black-level-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_BLACK_LEVEL_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffsetR</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffsetGr</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffsetGb</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffsetB</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">enOpType</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_BLACK_LEVEL_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>black_level 参数。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32OffsetR</td>
<td>Black offset subtraction for each channel in linear domain: Channel 00 (R). Values: [0-1048575]</td>
</tr>
<tr>
<td>u32OffsetGr</td>
<td>Black offset subtraction for each channel in linear domain: Channel 01 (Gr). Values: [0-1048575]</td>
</tr>
<tr>
<td>u32OffsetGb</td>
<td>Black offset subtraction for each channel in linear domain: Channel 10 (Gb). Values: [0-1048575]</td>
</tr>
<tr>
<td>u32OffsetB</td>
<td>Black offset subtraction for each channel in linear domain: Channel 11 (B). Values: [0-1048575]</td>
</tr>
<tr>
<td>enOpType</td>
<td>值见<a href="#_HB_ISP_OP_TYPE_E">ISP_OP_TYPE_E</a>结构体定义。 因为无Auto参数，对于Set接口，设置Auto会把模式改为Auto，设置Manual会把模式改为Manual并设置Manual参数； 对于Get接口，设置Auto or Manual获取不同模式下的参数值；</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-demosaic-attr-s">
<h3><span class="section-number">5.4.4.30. </span>HB_ISP_DEMOSAIC_ATTR_S<a class="headerlink" href="#hb-isp-demosaic-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_DEMOSAIC_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FcSlope</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FcAliasSlope</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FcAliasThresh</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">VhParam</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">AaParam</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">VaParam</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">UuParam</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">UuShParam</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">SharpLumaLowD</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAMA_ATTR_S</span><span class="w"> </span><span class="n">SharpLumaHighD</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">SharpLumaLowUD</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAMA_ATTR_S</span><span class="w"> </span><span class="n">SharpLumaHighUD</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinDstrength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinUDstrength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxDstrength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxUDstrength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16NpOffset</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_DEMOSAIC_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Offset</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Thresh</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Slope</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_CTRL_PARAMA_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Thresh</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Slope</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_CTRL_PARAMA_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<p>#define ISP_AUTO_ISO_STRENGTH_NUM   16</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32FcSlope</td>
<td>Slope  (strength) of false color correction</td>
</tr>
<tr>
<td>u32FcAliasSlope</td>
<td>Slope  (strength) of false color correction after blending with saturation value in  2.6 unsigned format</td>
</tr>
<tr>
<td>u32FcAliasThresh</td>
<td>Threshold of  false color correction after blending with saturation valuet in in 0.8  unsigned format</td>
</tr>
<tr>
<td>VhParam</td>
<td><strong>Slope</strong> of vertical/horizontal blending threshold in 4.4 logarithmic  format.  High values  will tend to favor one direction over the other (depending on VH Thresh)  while lower values will give smoother blending.     <strong>Threshold</strong> for the range of vertical/horizontal blending  The threshold  defines the difference of vertical and horizontal gradients at which the  vertical gradient will start to be taken into account in the blending (if VH  Offset is set to 0).   Setting the  offset not null (or the slope low) will include proportion of the vertical  gradient in the blending before even the gradient difference reaches the  threshold (see VH Offset for more details).     <strong>Offset</strong> for vertical/horizontal blending threshold</td>
</tr>
<tr>
<td>AaParam</td>
<td><strong>Slope</strong> of angular (45/135) blending threshold in 4.4 format.   High values  will tend to favor one direction over the other (depending on AA Thresh)  while lower values will give smoother blending.     <strong>Threshold</strong> for the range of angular (45/135) blending.   The threshold  defines the difference of 45 and 135 gradients at which the 45 gradient will  start to be taken into account in the blending (if AA Offset is set to 0).   Setting the  offset not null (or the slope low) will include proportion of the 45 gradient  in the blending before even the gradient difierence reaches the threshold  (see AA Offset for more details).     <strong>Offset</strong> for angular (A45/A135) blending threshold.   This register  has great impact on how AA Thresh is used.   Setting this  register to a value offset tells the blending process to weight the 45 and  135 gradients, at the threshold, with respectively offset/16 and 255 -  (offset/16).   If AA Thresh  not equals to 0, these same blending weights apply from -AA Thresh to +AA  Thresh.</td>
</tr>
<tr>
<td>VaParam</td>
<td><strong>Slope</strong> [7:0] Slope of VH-AA blending threshold in 4.4 log format.   High values  will tend to favor one direction over the other (depending on VA Thresh)  while lower values will give smoother blending.     <strong>Threshold</strong> for the range of VH-AA blending.   The threshold  defines the difference of VH and AA gradients at which the VH gradient will  start to be taken into account in the blending (if VA Offset is set to 0).  Setting the offset not null (or the slope low) will include proportion   of the VH  gradient in the blending before even the gradient difference reaches the  threshold (see VA Offiset   for more  details).     <strong>Offset</strong> for VH-AA blending threshold. This register has great impact on  how VA Thresh is used.   Setting this  register to a value offset tells the blending process to weight the VH and AA  gradients, at the threshold, with respectively offset/16 and 255 -  (offset/16).  If VA Thresh  not equals to 0, these same blending weights apply from -VA Thresh to +VA  Thresh.</td>
</tr>
<tr>
<td>UuParam</td>
<td><strong>Slope</strong> [7:0] Slope of undefined blending threshold in 4.4 logarithmic  format     <strong>Threshold</strong> for the range of undefined blending     <strong>Offset</strong> for undefined blending threshold</td>
</tr>
<tr>
<td>UuShParam</td>
<td><strong>Threshold</strong> for the range of undefined blending     <strong>Offset</strong> for undefined blending threshold     <strong>Slope</strong> of undefined blending threshold in 4.4 logarithmic format</td>
</tr>
<tr>
<td>SharpLumaLowD</td>
<td><strong>thresh</strong> Intensity values above this value will be sharpen     <strong>Slope</strong> Linear threshold slope corresponding to luma_thresh_low_d     <strong>offset</strong> Linear threshold offset corresponding to luma_thresh_low_d</td>
</tr>
<tr>
<td>SharpLumaHighD</td>
<td><strong>thresh</strong> Intensity values below this value will be sharpen  <strong>Slope</strong> Linear threshold slope corresponding to luma_thresh_high_d</td>
</tr>
<tr>
<td>SharpLumaLowUD</td>
<td><strong>thresh</strong> Intensity values above this value will be sharpen  <strong>offset</strong> Linear threshold offset corresponding to luma_thresh_low_ud  <strong>Slope</strong> Linear threshold slope corresponding to luma_thresh_low_ud</td>
</tr>
<tr>
<td>SharpLumaHighUD</td>
<td><strong>thresh</strong> Intensity values below this value will be sharpen  <strong>Slope</strong> Linear threshold slope corresponding to luma_thresh_high_ud</td>
</tr>
<tr>
<td>u32MinDstrength</td>
<td>Min threshold  for the directional L_L in signed 2's complement s.12 format</td>
</tr>
<tr>
<td>u32MinUDstrength</td>
<td>Min threshold  for the un-directional L_Lu in signed 2's complement s.12 format</td>
</tr>
<tr>
<td>u32MaxDstrength</td>
<td>Max threshold  for the directional L_L in signed 2's complement s1+0.12 format</td>
</tr>
<tr>
<td>u32MaxUDstrength</td>
<td>Max threshold  for the undirectional L_Lu in signed 2's complement s1+0.12 format</td>
</tr>
<tr>
<td>u16NpOffset</td>
<td>Noise profile  offset in logarithmic 4.4 format</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-sharpen-attr-s">
<h3><span class="section-number">5.4.4.31. </span>HB_ISP_SHARPEN_ATTR_S<a class="headerlink" href="#hb-isp-sharpen-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_SHARPEN_AUTO_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16SharpFR</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16SharpAltD</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16SharpAltDU</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16SharpAltUD</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_SHARPEN_AUTO_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_SHARPEN_MANUAL_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Strength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SharpAltD</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SharpAltUd</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SharpAltLd</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SharpAltLdu</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SharpAltLu</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_SHARPEN_MANUAL_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Offset</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Thresh</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Slope</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_SHARPEN_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">LumaLow</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_CTRL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">LumaHigh</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ClipStrMax</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ClipStrMin</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32AlphaUndershoot</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SadAmp</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_SHARPEN_MANUAL_ATTR_S</span><span class="w"> </span><span class="n">stManual</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_SHARPEN_AUTO_ATTR_S</span><span class="w"> </span><span class="n">stAuto</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">enOpType</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_SHARPEN_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16SharpFR</td>
<td>Controls strength of sharpening effect. u5.4</td>
</tr>
<tr>
<td>u16SharpAltD</td>
<td>Sharpen strength for L_Ld in unsigned 4.4 format</td>
</tr>
<tr>
<td>u16SharpAltDU</td>
<td>Sharpen strength for L_Ldu in unsigned 4.4 format</td>
</tr>
<tr>
<td>u16SharpAltUD</td>
<td>Sharpen strength for L_Lu in unsigned 4.4 format</td>
</tr>
<tr>
<td>成员</td>
<td>含义</td>
</tr>
<tr>
<td>u32Strength;</td>
<td>sharpen 强度</td>
</tr>
<tr>
<td>u32SharpAltD;</td>
<td>Directional sharp mask strength in signed 4.4 format Values: [0- 255]</td>
</tr>
<tr>
<td>u32SharpAltUd;</td>
<td>Non-directional sharp mask strength in signed 4.4 format Values: [0- 255]</td>
</tr>
<tr>
<td>u32SharpAltLd;</td>
<td>Sharpen strength for L_Ld in unsigned 4.4 format Values: [0- 255]</td>
</tr>
<tr>
<td>u32SharpAltLdu;</td>
<td>Sharpen strength for L_Ldu in unsigned 4.4 format Values: [0- 255]</td>
</tr>
<tr>
<td>u32SharpAltLu;</td>
<td>Sharpen strength for L_Lu in unsigned 4.4 format Values: [0- 255]</td>
</tr>
<tr>
<td>成员</td>
<td>含义</td>
</tr>
<tr>
<td>LumaLow;</td>
<td>低亮处控制参数，包括offset/thresh/slope</td>
</tr>
<tr>
<td>LumaHigh;</td>
<td>高亮处控制参数，包括offset/thresh/slope</td>
</tr>
<tr>
<td>u32ClipStrMax;</td>
<td>最大值阈值，超过该将会被clip, 影响overshoot. Values: [0- 16383]</td>
</tr>
<tr>
<td>u32ClipStrMin;</td>
<td>最小值阈值，超过该将会被clip, 影响undershoot. Values: [0- 16383]</td>
</tr>
<tr>
<td>u32AlphaUndershoot;</td>
<td>undershoot/overshoot 参数 当取0时，仅取undershoot 当取255时，仅取overshoot Values: [0-255]</td>
</tr>
<tr>
<td>u32SadAmp;</td>
<td>demosaic 中sharpen 中高频融合参数</td>
</tr>
<tr>
<td>stManual;</td>
<td>manual 模式参数</td>
</tr>
<tr>
<td>stAuto;</td>
<td>auto 模式参数</td>
</tr>
<tr>
<td>enOpType;</td>
<td>auto/manual 模式选择</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-gamma-attr-s">
<h3><span class="section-number">5.4.4.32. </span>HB_ISP_GAMMA_ATTR_S<a class="headerlink" href="#hb-isp-gamma-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_GAMMA_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">au16Gamma</span><span class="p">[</span><span class="mi">129</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_GAMMA_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>au16Gamma</td>
<td>Gamma LUT</td>
</tr>
</tbody>
</table></section>
<section id="isp-iridix-attr-s">
<h3><span class="section-number">5.4.4.33. </span>ISP_IRIDIX_ATTR_S<a class="headerlink" href="#isp-iridix-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_IRIDIX_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">enOpType</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_IRIDIX_AUTO_ATTR_S</span><span class="w"> </span><span class="n">stAuto</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_IRIDIX_MANUAL_ATTR_S</span><span class="w"> </span><span class="n">stManual</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BlackLevel</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WhiteLevel</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Svariance</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Bright_pr</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Contrast</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IridixOn</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FilterMux</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32VarianceSpace</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32VarianceIntensity</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SlopeMax</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SlopeMin</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FwdPerceptCtrl</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RevPerceptCtrl</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FwdAlpha</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RevAlpha</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32GtmSelect</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_IRIDIX_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_IRIDIX_AUTO_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8AvgCoef</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">au32EvLimNoStr</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32EvLimFullStr</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">au32StrengthDkEnhControl</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_IRIDIX_AUTO_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_IRIDIX_MANUAL_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RoiHorStart</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RoiHorEnd</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RoiVerStart</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RoiVerEnd</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32StrengthInRoi</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32StrengthOutRoi</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32DarkEnh</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_IRIDIX_MANUAL_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>enOpType</td>
<td>值见<a href="#_HB_ISP_OP_TYPE_E">ISP_OP_TYPE_E</a>结构体定义。</td>
</tr>
<tr>
<td>u8AvgCoef</td>
<td>The average coefficient value for Iridix</td>
</tr>
<tr>
<td>au32EvLimNoStr</td>
<td>The Expose Value maximum value, in terms of EV_log2 without Strength</td>
</tr>
<tr>
<td>u32EvLimFullStr</td>
<td>The Expose Value maximum value, in terms of EV_log2 with Strength</td>
</tr>
<tr>
<td>au32StrengthDkEnhControl</td>
<td>strength and dark enhancememt control:  [0] - dark_prc [1] - bright_prc [2] - min_dk: minimum dark enhancement [3] - max_dk: maximum dark enhancement [4] - pD_cut_min: minimum intensity cut for dark regions in which dk_enh will be applied [5] - pD_cut_max: maximum intensity cut for dark regions in which dk_enh will be applied [6] - dark contrast min [7] - dark contrast max [8] - min_str: iridix strength in percentage [9] - max_str: iridix strength in percentage: 50 = 1x gain. 100 = 2x gain [10] - dark_prc_gain_target: target in histogram (percentage) for dark_prc after iridix is applied [11] - contrast_min: clip factor of strength for LDR scenes. [12] - contrast_max: clip factor of strength for HDR scenes. [13] - max iridix gain [14] - print debug</td>
</tr>
<tr>
<td>u32RoiHorStart</td>
<td>Horizontal starting point of ROI Values: [0-65535]</td>
</tr>
<tr>
<td>u32RoiHorEnd</td>
<td>Horizontal ending point of ROI Values: [0-65535]</td>
</tr>
<tr>
<td>u32RoiVerStart</td>
<td>Vertical starting point of ROI Values: [0-65535]</td>
</tr>
<tr>
<td>u32RoiVerEnd</td>
<td>Vertical ending point of ROI Values: [0-65535]</td>
</tr>
<tr>
<td>u32StrengthInRoi</td>
<td>Manual Strength value for inside of ROI Values: [0-65535]，比如8.8的定点，256是1倍的强度，512是2倍的强度，u32StrengthInRoi是有控制的策略的，u32StrengthOutRoi 没有，建议设置u32StrengthInRoi为整个区域，u32StrengthOutRoi设置defalut 值就可以，最大强度是1023，调到1024会翻转</td>
</tr>
<tr>
<td>u32StrengthOutRoi</td>
<td>Manual Strength value for outside of ROI Values: [0-65535]</td>
</tr>
<tr>
<td>u32DarkEnh</td>
<td>Manual Dark Enhance value to control Iridix core Values: [0-65535]</td>
</tr>
<tr>
<td>u32BlackLevel</td>
<td>Iridix black level. Values below this will not be affected by Iridix.</td>
</tr>
<tr>
<td>u32WhiteLevel</td>
<td>Iridix white level. Values above this will not be affected by Iridix.</td>
</tr>
<tr>
<td>u32Svariance</td>
<td>Iridix8 transform sensitivity to different areas of image</td>
</tr>
<tr>
<td>u32Bright_pr</td>
<td>Manual Bright_Preserve value to control Iridix core</td>
</tr>
<tr>
<td>u32Contrast</td>
<td>Iridix8 contrast control parameter</td>
</tr>
<tr>
<td>u32IridixOn</td>
<td>Iridix enable: 0=off 1=on</td>
</tr>
<tr>
<td>u32FilterMux</td>
<td>Selects between Iridix8 and Iridix7, 1=Iridix8 and 0=Iridix7</td>
</tr>
<tr>
<td>u32VarianceSpace</td>
<td>Sets the degree of spatial sensitivity of the algorithm(Irdx7F)</td>
</tr>
<tr>
<td>u32VarianceIntensity</td>
<td>Sets the degree of luminance sensitivity of the algorithm(Irdx7F)</td>
</tr>
<tr>
<td>u32SlopeMax u32SlopeMin</td>
<td>Restricts the maximum/minimum slope (gain) which can be generated by the adaptive algorithm</td>
</tr>
<tr>
<td>u32FwdPerceptCtrl u32RevPerceptCtrl</td>
<td>Iridix gamma processing select: 0=pass through 1=gamma_dl 2=sqrt 3=gamma_lut.</td>
</tr>
<tr>
<td>u32FwdAlpha u32RevAlpha</td>
<td>alpha for gamma_dl</td>
</tr>
<tr>
<td>u32GtmSelect</td>
<td>Global Tone map select : 0 : Local TM 1: Full Global TM</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-cnr-attr-s">
<h3><span class="section-number">5.4.4.34. </span>HB_ISP_CNR_ATTR_S<a class="headerlink" href="#hb-isp-cnr-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_CNR_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16UvDelta12Slope</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_CNR_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16UvDelta12Slope</td>
<td>Strength of color noise reduction</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-sinter-attr-s">
<h3><span class="section-number">5.4.4.35. </span>HB_ISP_SINTER_ATTR_S<a class="headerlink" href="#hb-isp-sinter-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_SINTER_AUTO_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">aau16Strength</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">aau16Strength1</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">aau16Strength4</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">aau16Thresh1</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">aau16Thresh4</span><span class="p">[</span><span class="n">ISP_AUTO_ISO_STRENGTH_NUM</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_SINTER_AUTO_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_SINTER_MANUAL_PARAM_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32GlobalStrength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Thresh1h</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Thresh4h</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Thresh1v</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Thresh4v</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Strength1</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Strength4</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32NoiseLevel0</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32NoiseLevel1</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32NoiseLevel2</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32NoiseLevel3</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntConfig</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SadFiltThresh</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_SINTER_MANUAL_PARAM_ATTR_S</span><span class="p">;</span><span class="w"></span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_SINTER_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">enOpType</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_SINTER_AUTO_ATTR_S</span><span class="w"> </span><span class="n">stAuto</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_SINTER_MANUAL_PARAM_ATTR_S</span><span class="w"> </span><span class="n">stManual</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_SINTER_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>aau16Strength</td>
<td>A global offset</td>
</tr>
<tr>
<td>aau16Strength1</td>
<td>Noise reduction effect for high spatial frequencies</td>
</tr>
<tr>
<td>aau16Strength4</td>
<td>Noise reduction effect for low spatial frequencies</td>
</tr>
<tr>
<td>aau16Thresh1</td>
<td>Noise threshold for high horizontal/vertical spatial frequencies</td>
</tr>
<tr>
<td>aau16Thresh4</td>
<td>Noise threshold for low horizontal/vertical spatial frequencies</td>
</tr>
<tr>
<td>成员</td>
<td>含义</td>
</tr>
<tr>
<td>u32GlobalStrength</td>
<td>全局基础降噪强度，各频段降噪迭加在该降噪强度上</td>
</tr>
<tr>
<td>u32Thresh1h</td>
<td>横向高频降噪阈值</td>
</tr>
<tr>
<td>u32Thresh4h</td>
<td>横向低频降噪阈值</td>
</tr>
<tr>
<td>u32Thresh1v</td>
<td>纵向高频降噪阈值</td>
</tr>
<tr>
<td>u32Thresh4v</td>
<td>纵向低频降噪阈值</td>
</tr>
<tr>
<td>u32Strength1</td>
<td>高频降噪强度</td>
</tr>
<tr>
<td>u32Strength4</td>
<td>低频降噪强度</td>
</tr>
<tr>
<td>u32NoiseLevel0</td>
<td>VS 帧噪声等级</td>
</tr>
<tr>
<td>u32NoiseLevel1</td>
<td>S 帧噪声等级</td>
</tr>
<tr>
<td>u32NoiseLevel2</td>
<td>M 帧噪声等级</td>
</tr>
<tr>
<td>u32NoiseLevel3</td>
<td>L 帧噪声等级</td>
</tr>
<tr>
<td>u32IntConfig</td>
<td>融合强度</td>
</tr>
<tr>
<td>u32SadFiltThresh</td>
<td>块匹配差分滤波阈值</td>
</tr>
<tr>
<td>成员</td>
<td>含义</td>
</tr>
<tr>
<td>enOpType</td>
<td>auto/manual 模式选择</td>
</tr>
<tr>
<td>stAuto</td>
<td>auto 模式参数</td>
</tr>
<tr>
<td>stManual</td>
<td>manual 模式参数</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-temper-attr-s">
<h3><span class="section-number">5.4.4.36. </span>HB_ISP_TEMPER_ATTR_S<a class="headerlink" href="#hb-isp-temper-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_TEMPER_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">aau16strength</span><span class="p">[</span><span class="mi">16</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RecursionLimit</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32LutEnable</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_TEMPER_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>aau16strength</td>
<td>Noise reduction effect for temporal frequencies</td>
</tr>
<tr>
<td>u32RecursionLimit</td>
<td>Controls length of filter history. Low values result in longer history and stronger temporal filtering Range: [0, 16]</td>
</tr>
<tr>
<td>u32LutEnable</td>
<td>Choose from LUT or exp_mask Range: [0, 3]</td>
</tr>
</tbody>
</table></section>
<section id="hb-mesh-shading-attr-s">
<h3><span class="section-number">5.4.4.37. </span>HB_MESH_SHADING_ATTR_S<a class="headerlink" href="#hb-mesh-shading-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_MESH_SHADING_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Enable</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MeshScale</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MeshAlphaMode</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MeshWidth</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MeshHeight</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ShadingStrength</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">MESH_SHADING_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32Enable</td>
<td>Lens mesh shading correction enable: 0=off, 1=on.</td>
</tr>
<tr>
<td>u32MeshScale</td>
<td>Selects the precision and maximal gain range of mesh shading correction Gain range: 00 -> 0..2; 01 -> 0..4; 02 -> 0..8; 03 -> 0..16; 04 -> 1..2; 05 -> 1..3; 06 -> 1..5; 07 -> 1..9 (float).</td>
</tr>
<tr>
<td>u32MeshAlphaMode</td>
<td>Sets alpha blending between mesh shading tables. 0 = no alpha blending; 1 = 2 banks (odd/even bytes) 2 = 4 banks (one per 8-bit lane in each dword).</td>
</tr>
<tr>
<td>u32MeshWidth</td>
<td>Number of horizontal nodes Values: [0-63]</td>
</tr>
<tr>
<td>u32MeshHeight</td>
<td>Number of vertical nodes Values: [0-63]</td>
</tr>
<tr>
<td>u32ShadingStrength</td>
<td>Mesh strength in 4.12 format, e.g. 0 = no correction, 4096 = correction to match mesh data. Can be used to reduce shading correction based on AE. Values: [0-4096]</td>
</tr>
</tbody>
</table></section>
<section id="hb-mesh-shading-lut-s">
<h3><span class="section-number">5.4.4.38. </span>HB_MESH_SHADING_LUT_S<a class="headerlink" href="#hb-mesh-shading-lut-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_MESH_SHADING_LUT_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsAR</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsAG</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsAB</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsTl84R</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsTl84G</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsTl84B</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsD65R</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsD65G</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8LsD65B</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">MESH_SHADING_LUT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>au8LsAR</td>
<td>a光下，mesh_shading R校正表</td>
</tr>
<tr>
<td>au8LsAG</td>
<td>a光下，mesh_shading G校正表</td>
</tr>
<tr>
<td>au8LsAB</td>
<td>a光下，mesh_shading B校正表</td>
</tr>
<tr>
<td>au8LsTl84R</td>
<td>TL84光下，mesh_shading R校正表</td>
</tr>
<tr>
<td>au8LsTl84G</td>
<td>TL 84光下，mesh_shading G校正表</td>
</tr>
<tr>
<td>au8LsTl84B</td>
<td>TL 84光下，mesh_shading B校正表</td>
</tr>
<tr>
<td>au8LsD65R</td>
<td>D65光下，mesh_shading R校正表</td>
</tr>
<tr>
<td>au8LsD65G</td>
<td>D65光下，mesh_shading G校正表</td>
</tr>
<tr>
<td>au8LsD65B</td>
<td>D65光下，mesh_shading B校正表</td>
</tr>
</tbody>
</table></section>
<section id="hb-radial-shading-attr-s">
<h3><span class="section-number">5.4.4.39. </span>HB_RADIAL_SHADING_ATTR_S<a class="headerlink" href="#hb-radial-shading-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_RADIAL_SHADING_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Enable</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CenterRX</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CenterRY</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CenterGX</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CenterGY</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CenterBX</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CenterBY</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffCenterMultRX</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffCenterMultRY</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffCenterMultGX</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffCenterMultGY</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffCenterMultBX</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OffCenterMultBY</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">RADIAL_SHADING_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32Enable</td>
<td>Set to 1 to enable radial shading correction.</td>
</tr>
<tr>
<td>u32CenterRX</td>
<td>Center x coordinates for R shading map. Values: [0-65535]</td>
</tr>
<tr>
<td>u32CenterRY</td>
<td>Center y coordinates for R shading map. Values: [0-65535]</td>
</tr>
<tr>
<td>u32CenterGX</td>
<td>Center x coordinates for G shading map. Values: [0-65535]</td>
</tr>
<tr>
<td>u32CenterGY</td>
<td>Center y coordinates for G shading map. Values: [0-65535]</td>
</tr>
<tr>
<td>u32CenterBX</td>
<td>Center x coordinates for B shading map. Values: [0-65535]</td>
</tr>
<tr>
<td>u32CenterBY</td>
<td>Center y coordinates for B shading map. Values: [0-65535]</td>
</tr>
<tr>
<td>u32OffCenterMultRX</td>
<td>Normalizing X/Y factor which scales the R, G, B radial table to the edge of the image. Calculated as 231/R2 where R is the furthest distance from the center coordinate to the edge of the image in pixels. Values: [0-65535]</td>
</tr>
<tr>
<td>u32OffCenterMultRY</td>
<td></td>
</tr>
<tr>
<td>u32OffCenterMultGX</td>
<td></td>
</tr>
<tr>
<td>u32OffCenterMultGY</td>
<td></td>
</tr>
<tr>
<td>u32OffCenterMultBX</td>
<td></td>
</tr>
<tr>
<td>u32OffCenterMultBY</td>
<td></td>
</tr>
</tbody>
</table></section>
<section id="hb-radial-shading-lut-s">
<h3><span class="section-number">5.4.4.40. </span>HB_RADIAL_SHADING_LUT_S<a class="headerlink" href="#hb-radial-shading-lut-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_RADIAL_SHADING_LUT_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">au16RGain</span><span class="p">[</span><span class="mi">129</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">au16GGain</span><span class="p">[</span><span class="mi">129</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">au16BGain</span><span class="p">[</span><span class="mi">129</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">RADIAL_SHADING_LUT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>au16Rgain</td>
<td>corrective R gain</td>
</tr>
<tr>
<td>au16Ggain</td>
<td>corrective G gain</td>
</tr>
<tr>
<td>au16Bgain</td>
<td>corrective B gain</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-csc-attr-s">
<h3><span class="section-number">5.4.4.41. </span>HB_ISP_CSC_ATTR_S<a class="headerlink" href="#hb-isp-csc-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_CSC_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ClipMinY</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ClipMaxY</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ClipMinUV</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ClipMaxUV</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaskRY</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaskGU</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaskBV</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">aau16Coefft</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_CSC_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32ClipMinY</td>
<td>Minimal value for Y. Values below this value are clipped. Values: [0-1023]</td>
</tr>
<tr>
<td>u32ClipMaxY</td>
<td>Maximal value for Y. Values above this value are clipped. Values: [0-1023]</td>
</tr>
<tr>
<td>u32ClipMinUV</td>
<td>Minimal value for Cb, Cr. Values below this value are clipped Values: [0-1023]</td>
</tr>
<tr>
<td>u32ClipMaxUV</td>
<td>Maximal value for Cb, Cr. Values above this value are clipped Values: [0-1023]</td>
</tr>
<tr>
<td>u32MaskRY</td>
<td>Data mask for channel 1 (R or Y). Bit-wise and of this value and video data. Values: [0-1023]</td>
</tr>
<tr>
<td>u32MaskGU</td>
<td>Data mask for channel 2 (G or U). Bit-wise and of this value and video data. Values: [0-1023]</td>
</tr>
<tr>
<td>u32MaskBV</td>
<td>Data mask for channel 3 (B or V). Bit-wise and of this value and video data. Values: [0-1023]</td>
</tr>
<tr>
<td>aau16Coefft[12]</td>
<td>Coefficients in the 3x3 conversion matrix. And Offset coefficients.  Values: [0-65535] 系数填写详见1.13节Color Space Conversion。</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-scene-modes-attr-s">
<h3><span class="section-number">5.4.4.42. </span>HB_ISP_SCENE_MODES_ATTR_S<a class="headerlink" href="#hb-isp-scene-modes-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_SCENE_MODES_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ColorMode</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BrightnessStrength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ContrastStrength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32SaturationStrength</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32HueTheta</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_SCENE_MODES_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32ColorMode</td>
<td>Select the color mode of the ISP. Values: {NORMAL} {BLACK_AND_WHITE} {NEGATIVE} {SEPIA} {VIVID} Default Value: {NORMAL}</td>
</tr>
<tr>
<td>u32BrightnessStrength</td>
<td>Control the exact brightness value. Values: [0-255] Key: 128 - Standard Brightness \&lt;128 - Decreased Brightness >128 - Increased Brightness Default Value: 128</td>
</tr>
<tr>
<td>u32ContrastStrength</td>
<td>Control the exact contrast value. Values: [0-255] Key: 128 - Standard Contrast \&lt;128 - Decreased Contrast >128 - Increased Contrast Default Value: 128</td>
</tr>
<tr>
<td>u32SaturationStrength</td>
<td>Control the exact saturation strength. Values: [0-255] Key: 128 - Standard Saturation \&lt;128 - Decreased Saturation >128 - Increased Saturation Default Value: 128</td>
</tr>
<tr>
<td>u32HueTheta</td>
<td>Control the exact hue value.  Values: [0-360] Key: 128 - Standard  Hue \&lt;128 - Decreased  Hue >128 - Increased Hue  Default Value: 180</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-statistics-awb-zone-attr-s">
<h3><span class="section-number">5.4.4.43. </span>HB_ISP_STATISTICS_AWB_ZONE_ATTR_S<a class="headerlink" href="#hb-isp-statistics-awb-zone-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_STATISTICS_AWB_ZONE_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Rg</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Bg</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Sum</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_STATISTICS_AWB_ZONE_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>AWB统计信息参数。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16Rg</td>
<td>Average Green/Red or Red/Green</td>
</tr>
<tr>
<td>u16Bg</td>
<td>Average Green/Blue or Blue/Green</td>
</tr>
<tr>
<td>u32Sum</td>
<td>Number of pixels used for AWB</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-statistics-ae-5bin-zone-attr-s">
<h3><span class="section-number">5.4.4.44. </span>HB_ISP_STATISTICS_AE_5BIN_ZONE_ATTR_S<a class="headerlink" href="#hb-isp-statistics-ae-5bin-zone-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_STATISTICS_AE_5BIN_ZONE_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Hist0</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Hist1</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Hist3</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Hist4</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_STATISTICS_AE_5BIN_ZONE_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>AE-5bin 统计信息。</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16Hist0</td>
<td>5bin-hist0 统计信息</td>
</tr>
<tr>
<td>u16Hist1</td>
<td>5bin-hist1 统计信息</td>
</tr>
<tr>
<td>u16Hist3</td>
<td>5bin-hist3 统计信息</td>
</tr>
<tr>
<td>u16Hist4</td>
<td>5bin-hist4 统计信息</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ae-param-s">
<h3><span class="section-number">5.4.4.45. </span>HB_ISP_AE_PARAM_S<a class="headerlink" href="#hb-isp-ae-param-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AE_PARAM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32TotalGain</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">GainOpType</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntegrationTime</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32ExposureRatio</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">ISP_OP_TYPE_E</span><span class="w"> </span><span class="n">IntegrationOpType</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AE_PARAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32TotalGain</td>
<td>ae总曝光时间，total_gain = sensor_again + sensor_dgain + isp_dgain 取值：[0, 765]</td>
</tr>
<tr>
<td>GainOpType</td>
<td>gain 手动/自动选择</td>
</tr>
<tr>
<td>u32IntegrationTime</td>
<td>line 控制（单位us）</td>
</tr>
<tr>
<td>u32ExposureRatio</td>
<td>曝光ratio 值，HDR模式下有效</td>
</tr>
<tr>
<td>IntegrationOpType</td>
<td>line 手动/自动选择</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ae-roi-attr-s">
<h3><span class="section-number">5.4.4.46. </span>HB_ISP_AE_ROI_ATTR_S<a class="headerlink" href="#hb-isp-ae-roi-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AE_ROI_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8XStart</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8YStart</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8XEnd</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8YEnd</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AE_ROI_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u8XStart</td>
<td>ROI区域x_start 取值：[0,255]</td>
</tr>
<tr>
<td>u8YStart</td>
<td>ROI区域y_start 取值：[0,255]</td>
</tr>
<tr>
<td>u8XEnd</td>
<td>ROI区域x_end 取值：[0,255]</td>
</tr>
<tr>
<td>u8YEnd</td>
<td>ROI区域y_end 取值：[0,255]</td>
</tr>
</tbody>
</table></section>
<section id="isp-zone-attr-s">
<h3><span class="section-number">5.4.4.47. </span>ISP_ZONE_ATTR_S<a class="headerlink" href="#isp-zone-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_ZONE_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8Horiz</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8Vert</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_ZONE_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>用于改变AF/AWB的统计zones.</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u8Horiz</td>
<td>水平方向zones数量</td>
</tr>
<tr>
<td>u8Vert</td>
<td>垂直方向zones数量</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-statistics-lumvar-zone-attr-s">
<h3><span class="section-number">5.4.4.48. </span>HB_ISP_STATISTICS_LUMVAR_ZONE_ATTR_S<a class="headerlink" href="#hb-isp-statistics-lumvar-zone-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_STATISTICS_LUMVAR_ZONE_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Var</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Mean</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_STATISTICS_LUMVAR_ZONE_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16Var</td>
<td>lumvar统计信息方差</td>
</tr>
<tr>
<td>u16Mean</td>
<td>lumvar统计信息均值</td>
</tr>
</tbody>
</table></section>
<section id="isp-awb-stat-area-attr-s">
<h3><span class="section-number">5.4.4.49. </span>ISP_AWB_STAT_AREA_ATTR_S<a class="headerlink" href="#isp-awb-stat-area-attr-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AWB_STAT_AREA_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WhiteLevel</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BlackLevel</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CrRefMax</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CrRefMin</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CbRefMax</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CbRefMin</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CrRefHigh</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CrRefLow</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CbRefHigh</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CbRefLow</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AWB_STAT_AREA_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32WhiteLevel</td>
<td>Upper limit  of valid data for AWB  取值：[0,1023]</td>
</tr>
<tr>
<td>u32BlackLevel</td>
<td>Lower limit  of valid data for AWB  取值：[0,1023]</td>
</tr>
<tr>
<td>其他成员</td>
<td>统计数据的范围，见<a href="#_AWB统计信息">1.14.1</a>节描述  取值：[0,4095]</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ae-control">
<h3><span class="section-number">5.4.4.50. </span>HB_ISP_AE_CONTROL<a class="headerlink" href="#hb-isp-ae-control" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AE_CONTROL</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32AeControl</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AeControlHdrTarget</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AE_CONTROL</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32AeControl</td>
<td>AE控制模块</td>
</tr>
<tr>
<td>u16AeControlHdrTarget</td>
<td>AE HDR target control. This target is modulated by totoal gain</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ae-correction">
<h3><span class="section-number">5.4.4.51. </span>HB_ISP_AE_CORRECTION<a class="headerlink" href="#hb-isp-ae-correction" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AE_CORRECTION</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8AeCorrection</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32AeEXPCorrection</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AE_CORRECTION</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u8AeCorrection</td>
<td>Calibration values for the fine tuning parameter, which alters the strength of ae_comp</td>
</tr>
<tr>
<td>u32AeEXPCorrection</td>
<td>Calibration values for the fine tuning parameter, which sets the exposure value nodes</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-5bin-hist">
<h3><span class="section-number">5.4.4.52. </span>HB_ISP_5BIN_HIST<a class="headerlink" href="#hb-isp-5bin-hist" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_5BIN_HIST</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16HistThresh01</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span>
<span class="w">		</span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16HistThresh12</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span>
<span class="w">		</span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16HistThresh23</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span>
<span class="w">		</span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16HistThresh34</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_5BIN_HIST</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16HistThresh01</td>
<td>AE的5bin统计信息第一个bin的值</td>
</tr>
<tr>
<td>u16HistThresh12</td>
<td>AE的5bin统计信息第二个bin的值</td>
</tr>
<tr>
<td>u16HistThresh23</td>
<td>AE的5bin统计信息第三个bin的值</td>
</tr>
<tr>
<td>u16HistThresh34</td>
<td>AE的5bin统计信息第四个bin的值</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<p>注意因为硬件节省资源，AE的5bin统计信息可以从前面四个值当中计算出来。</p>
</section>
<section id="hb-isp-exp-ratio-adj">
<h3><span class="section-number">5.4.4.53. </span>HB_ISP_EXP_RATIO_ADJ<a class="headerlink" href="#hb-isp-exp-ratio-adj" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_EXP_RATIO_ADJ</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16ExpRatioAdj</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_EXP_RATIO_ADJ</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16ExpRatioAdj</td>
<td>Adjusts the amount of clipped pixles for long expusre</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-exp-pat-luts">
<h3><span class="section-number">5.4.4.54. </span>HB_ISP_EXP_PAT_LUTS<a class="headerlink" href="#hb-isp-exp-pat-luts" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_EXP_PAT_LUTS</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16ExpPatLuts</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">10</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_EXP_PAT_LUTS</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16ExpPatLuts</td>
<td>Partition lookup tables to split exposure value, also called expos corresponding to the API->TALGORITHMS->AE_SPLIT_BALANCED. NO. [10]-[19](exp_time,gain, exp_time exp_time unit: ms, gain unit:1 = 1x gain, 2 = 2x gain.</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-awb-max-bgain">
<h3><span class="section-number">5.4.4.55. </span>HB_ISP_AWB_MAX_BGAIN<a class="headerlink" href="#hb-isp-awb-max-bgain" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AWB_MAX_BGAIN</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AwbBgMaxGain</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AWB_BG_MAX_GAIN</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32AwbBgMaxGain</td>
<td>Maximum AWB bg gain according to total gain</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ccm-satura-streng">
<h3><span class="section-number">5.4.4.56. </span>HB_ISP_CCM_SATURA_STRENG<a class="headerlink" href="#hb-isp-ccm-satura-streng" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_CCM_SATURA_STRENG</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16CcmSatStre</span><span class="p">[</span><span class="mi">9</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_CCM_SATURA_STRENG</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16CcmSatStre</td>
<td>The lookup table for Saturation Strength</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-mt-absolute-ls">
<h3><span class="section-number">5.4.4.57. </span>HB_ISP_MT_ABSOLUTE_LS<a class="headerlink" href="#hb-isp-mt-absolute-ls" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_MT_ABSOLUTE_LS</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AbsoluteLsACcm</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AbsoluteLsD40Ccm</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AbsoluteLsD50Ccm</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AbsoluteLsU30Ccm</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_MT_ABSOLUTE_LS</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16AbsoluteLsACcm</td>
<td>Calibration values for Colour Correction Matrix under A lighting</td>
</tr>
<tr>
<td>u16AbsoluteLsD40Ccm</td>
<td>Calibration values for Colour Correction Matrix under D40 lighting</td>
</tr>
<tr>
<td>u16AbsoluteLsD50Ccm</td>
<td>Calibration values for Colour Correction Matrix under D50 lighting</td>
</tr>
<tr>
<td>u16AbsoluteLsU30Ccm</td>
<td>Calibration values for Colour Correction Matrix under U30 lighting</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ccm-one-gain-threshold">
<h3><span class="section-number">5.4.4.58. </span>HB_ISP_CCM_ONE_GAIN_THRESHOLD<a class="headerlink" href="#hb-isp-ccm-one-gain-threshold" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_CCM_ONE_GAIN_THRESHOLD</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16CcmOneGainThreshold</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_CCM_ONE_GAIN_THRESHOLD</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16CcmOneGainThreshold</td>
<td>The threshold value of the Colour Correction Matrix</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-gamma-ev1">
<h3><span class="section-number">5.4.4.59. </span>HB_ISP_GAMMA_EV1<a class="headerlink" href="#hb-isp-gamma-ev1" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_GAMMA_EV1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16GammaEv1</span><span class="p">[</span><span class="mi">129</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_GAMMA_EV1</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16GammaEv1</td>
<td>Dynamic gamma lut-1</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-gamma-ev2">
<h3><span class="section-number">5.4.4.60. </span>HB_ISP_GAMMA_EV2<a class="headerlink" href="#hb-isp-gamma-ev2" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_GAMMA_EV2</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16GammaEv2</span><span class="p">[</span><span class="mi">129</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_GAMMA_EV2</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16GammaEv2</td>
<td>Dynamic gamma lut-2</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-gamma-threshold">
<h3><span class="section-number">5.4.4.61. </span>HB_ISP_GAMMA_THRESHOLD<a class="headerlink" href="#hb-isp-gamma-threshold" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_GAMMA_THRESHOLD</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32GammaThreshold</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_GAMMA_THRESHOLD</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32GammaThreshold</td>
<td>log2 exposure value threshold，exposure_log2 为现在曝光时间=sensor_again*sensor_dgain*line*isp_dgain，u32GammaThreshold数组第三个值0 是关自动，1是开自动，如果老版本的接口数组下标只有2，那就是默认关自动</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-awb-cct-ctrl-s">
<h3><span class="section-number">5.4.4.62. </span>HB_ISP_AWB_CCT_CTRL_S<a class="headerlink" href="#hb-isp-awb-cct-ctrl-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AWB_CCT_CTRL_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AwbColourPre</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AwbWarmLsA</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AwbWarmLsD75</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AwbWarmLsD50</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AWB_CCT_CTRL_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16AwbColourPre</td>
<td>Calibration values for auto white balance colour preference CCT</td>
</tr>
<tr>
<td>u16AwbWarmLsA</td>
<td>Calibration values for auto white balance under A lighting conditions</td>
</tr>
<tr>
<td>u16AwbWarmLsD75</td>
<td>Calibration values for auto white balance under D75 lighting conditions</td>
</tr>
<tr>
<td>u16AwbWarmLsD50</td>
<td>Calibration values for auto white balance under D65 lighting conditions</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-mix-light-param-s">
<h3><span class="section-number">5.4.4.63. </span>HB_ISP_MIX_LIGHT_PARAM_S<a class="headerlink" href="#hb-isp-mix-light-param-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_MIX_LIGHT_PARAM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MixLightParm</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_MIX_LIGHT_PARAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32MixLightParm</td>
<td>awb mix light param [0] enbale/disable [1] lux low boundary for mix light lux range [2] lux high boundary for mix light range [3] contrast threshold for mix light [4] BG threshold [5] rgHigh_LUT_max [6] rgHigh_LUT_min</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-sky-param-s">
<h3><span class="section-number">5.4.4.64. </span>HB_ISP_SKY_PARAM_S<a class="headerlink" href="#hb-isp-sky-param-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_SKY_PARAM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16SkyLuxTh</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16WbStrength</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Ct65Pos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Ct40Pos</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_SKY_PARAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16SkyLuxTh</td>
<td>The lux threshold value for a sky scene</td>
</tr>
<tr>
<td>u16WbStrength</td>
<td>White Balance gain adjuster strength value for a sky scene for the RG, BG channels.</td>
</tr>
<tr>
<td>u16Ct65Pos</td>
<td>The position in color_temp closest to 1e6/6500 in CALIBRATION_COLOR_TEMP</td>
</tr>
<tr>
<td>u16Ct40Pos</td>
<td>The position in color_temp closest to 1e6/4000 in CALIBRATION_COLOR_TEMP</td>
</tr>
</tbody>
</table></section>
<section id="hb-tmper-np-lut-s">
<h3><span class="section-number">5.4.4.65. </span>HB_TMPER_NP_LUT_S<a class="headerlink" href="#hb-tmper-np-lut-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_TMPER_NP_LUT_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8Np</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">TEMPER_NP_LUT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>NOISE_PROFILE–LUT</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>au8Np</td>
<td>The lookup table for noise profile calibrations，对应Control Tool工具Dynamic calibrations下的AE_ZONE_WGHT_HOR，AE_ZONE_WGHT_VER，这个区域的权重值 = (int(ae_zone_wght_ver * ae_zone_wght_hor) / 16) - (int(ae_zone_wght_ver * ae_zone_wght_hor/16 &gt; 1 ? 1 : 0)) （int(ae_zone_wght_ver * ae_zone_wght_hor/16 &gt; 1 大于1 取1，否则取0）</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-mesh-rgbg-weight-s">
<h3><span class="section-number">5.4.4.66. </span>HB_ISP_MESH_RGBG_WEIGHT_S<a class="headerlink" href="#hb-isp-mesh-rgbg-weight-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_MESH_RGBG_WEIGHT_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16MeshRgbgWeight</span><span class="p">[</span><span class="mi">15</span><span class="p">][</span><span class="mi">15</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_MESH_RGBG_WEIGHT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16MeshRgbgWeight</td>
<td>Calibration LUT for AWB weighting</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-mesh-ls-weight-s">
<h3><span class="section-number">5.4.4.67. </span>HB_ ISP_MESH_LS_WEIGHT_S<a class="headerlink" href="#hb-isp-mesh-ls-weight-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_MESH_LS_WEIGHT_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16MeshLsWeight</span><span class="p">[</span><span class="mi">15</span><span class="p">][</span><span class="mi">15</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_MESH_LS_WEIGHT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16MeshLsWeight</td>
<td>Calibration LUT for extra light source weighting set in CALIBRATION_LIGHT_SRC</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-awb-default-param-s">
<h3><span class="section-number">5.4.4.68. </span>HB_ ISP_AWB_DEFAULT_PARAM_S<a class="headerlink" href="#hb-isp-awb-default-param-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AWB_DEFAULT_PARAM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16Ct30Pos</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AWB_DEFAULT_PARAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16Ct30Pos</td>
<td>The position in color_temp closest to 1e6/3000 in CALIBRATION_COLOR_TEMP</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-mesh-color-temp-weight-s">
<h3><span class="section-number">5.4.4.69. </span>HB_ISP_MESH_COLOR_TEMP_WEIGHT_S<a class="headerlink" href="#hb-isp-mesh-color-temp-weight-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_MESH_COLOR_TEMP_WEIGHT_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16MeshColorTempWeight</span><span class="p">[</span><span class="mi">15</span><span class="p">][</span><span class="mi">15</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_MESH_COLOR_TEMP_WEIGHT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16MeshColorTempWeight</td>
<td>WB Calibration values for colour temperature estimations</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-awb-pos-status-s">
<h3><span class="section-number">5.4.4.70. </span>HB_ISP_AWB_POS_STATUS_S<a class="headerlink" href="#hb-isp-awb-pos-status-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AWB_POS_STATUS_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AwbRgPos</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16AwbBgPos</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AWB_POS_STATUS_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16AwbRgPos</td>
<td>The Red-Green position values</td>
</tr>
<tr>
<td>u16AwbBgPos</td>
<td>The Blue-Green position values</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-awb-light-source-s">
<h3><span class="section-number">5.4.4.71. </span>HB_ISP_AWB_LIGHT_SOURCE_S<a class="headerlink" href="#hb-isp-awb-light-source-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AWB_LIGHT_SOURCE_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16ColorTemp</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16RgPosCalc</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16BgPosCalc</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AWB_LIGHT_SOURCE_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u16ColorTemp</td>
<td>A table of values to set the temperature of particular light points set</td>
</tr>
<tr>
<td>u16RgPosCalc</td>
<td>LUT containing R:G calibration points of light sources used for calibration</td>
</tr>
<tr>
<td>u16BgPosCalc</td>
<td>LUT containing B:G calibration points of light sources used for calibration</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-wdr-offset-s">
<h3><span class="section-number">5.4.4.72. </span>HB_ISP_WDR_OFFSET_S<a class="headerlink" href="#hb-isp-wdr-offset-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_WDR_OFFSET_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrLR</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrLGr</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrLGb</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrLB</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrMR</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrMGr</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrMGb</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrMB</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrSR</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrSGr</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrSGb</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrSB</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrVsR</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrVsGr</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrVsGb</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32WdrVsB</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_WDR_OFFSET_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32WdrLR</td>
<td>wdr 模式下长帧的R偏移量</td>
</tr>
<tr>
<td>u32WdrLGr</td>
<td>wdr 模式下长帧的Gr偏移量</td>
</tr>
<tr>
<td>u32WdrLGb</td>
<td>wdr 模式下长帧的Gb偏移量</td>
</tr>
<tr>
<td>u32WdrLB</td>
<td>wdr 模式下长帧的B偏移量</td>
</tr>
<tr>
<td>u32WdrMR</td>
<td>wdr 模式下中帧的R偏移量</td>
</tr>
<tr>
<td>u32WdrMGr</td>
<td>wdr 模式下中帧的Gr偏移量</td>
</tr>
<tr>
<td>u32WdrMGb</td>
<td>wdr 模式下中帧的Gb偏移量</td>
</tr>
<tr>
<td>u32WdrMB</td>
<td>wdr 模式下中帧的B偏移量</td>
</tr>
<tr>
<td>u32WdrSR</td>
<td>wdr 模式下短帧的R偏移量</td>
</tr>
<tr>
<td>u32WdrSGr</td>
<td>wdr 模式下短帧的Gr偏移量</td>
</tr>
<tr>
<td>u32WdrSGb</td>
<td>wdr 模式下短帧的Gb偏移量</td>
</tr>
<tr>
<td>u32WdrSB</td>
<td>wdr 模式下短帧的B偏移量</td>
</tr>
<tr>
<td>u32WdrVsR</td>
<td>wdr 模式下更短帧的R偏移量</td>
</tr>
<tr>
<td>u32WdrVsGr</td>
<td>wdr 模式下更短帧的Gr偏移量</td>
</tr>
<tr>
<td>u32WdrVsGb</td>
<td>wdr 模式下更短帧的Gb偏移量</td>
</tr>
<tr>
<td>u32WdrVsB</td>
<td>wdr 模式下更短帧的B偏移量</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-af-lens-info-s">
<h3><span class="section-number">5.4.4.73. </span>HB_ISP_AF_LENS_INFO_S<a class="headerlink" href="#hb-isp-af-lens-info-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AF_LENS_INFO_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">range_low</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">range_high</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AF_LENS_INFO_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>pos</td>
<td>AF_MODE</td>
</tr>
<tr>
<td>range_low</td>
<td>AF_RANGE_LOW</td>
</tr>
<tr>
<td>range_high</td>
<td>AF_RANGE_HIGH</td>
</tr>
</tbody>
</table></section>
<section id="hb-isp-ae-attr-ex-s">
<h3><span class="section-number">5.4.4.74. </span>HB_ISP_AE_ATTR_EX_S<a class="headerlink" href="#hb-isp-ae-attr-ex-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_ISP_AE_ATTR_EX_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Compensation</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Speed</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Tolerance</span><span class="p">;</span><span class="w"></span>
<span class="w">    	</span>
<span class="w">    	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32AeTarget</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">ISP_AE_ATTR_EX_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>u32Compensation</td>
<td>AE_COMPENSATION_ID default: 128 取整范围: [0,255] u32Compensation 取128表示无调整，调整单位为1，表示2\^(1/32)倍。</td>
</tr>
<tr>
<td>u32Speed</td>
<td>收敛速度，收敛到target 需要的帧数，speed越大，曝光变化越慢，speed是一个滤波参数，改变以后滤波器就改变了，会影响画面亮度，画面可能会有一个闪烁的过程，不建议动态调整</td>
</tr>
<tr>
<td>u32Tolerance</td>
<td>容忍度</td>
</tr>
<tr>
<td>u32AeTarget</td>
<td>AE target，HB_ISP_SetAeAttrEx传值范围[0,255)，HB_ISP_GetAeAttrEx获取到值范围是[0,256]</td>
</tr>
</tbody>
</table></section>
<section id="hb-ae-zones-weight-s">
<h3><span class="section-number">5.4.4.75. </span>HB_AE_ZONES_WEIGHT_S<a class="headerlink" href="#hb-ae-zones-weight-s" title="永久链接至标题"></a></h3>
<p>【结构定义】</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_AE_ZONES_WEIGHT_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">au8Np</span><span class="p">[</span><span class="mi">1089</span><span class="p">];</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">AE_ZONES_WEIGHT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>成员</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>au8Np</td>
<td>AE区域权重表</td>
</tr>
</tbody>
</table><section id="id20">
<h4>补充说明：<a class="headerlink" href="#id20" title="永久链接至标题"></a></h4>
<p>AE区域权重表通过AE_ZONE_WGHT_VER和AE_ZONE_WGHT_HOR 共同确定</p>
<p>其中AE_ZONE_WGHT_HOR和AE_ZONE_WGHT_VER的lut表如control tool工具截图，总共32个值，每个值16bit，0表示该块不统计，1表示统计1次，2表示统计2次，依次类推，其中15比较特殊，表示统计16次。</p>
<p><img alt="image-20221118175019755" src="../_images/image-20221118175019755.png" /></p>
<p>AE_ZONES_WEIGHT如control tool截图，统计模块将整幅画面默认分为horz_zones（33） *vore_zones（33） 块，总共1089个值，其中horz_zones，vore_zones可以通过接口设置，AE_ZONES_WEIGHT的权重值 = (int(ae_zone_wght_ver * ae_zone_wght_hor) / 16) - (int(ae_zone_wght_ver * ae_zone_wght_hor/16 &gt; 1 ? 1 : 0)) （int(ae_zone_wght_ver * ae_zone_wght_hor/16 &gt; 1 大于1 取1，否则取0）</p>
<p><img alt="image-20221118180830337" src="../_images/image-20221118180830337.png" /></p>
<p>AE_ZONE_WGHT_HOR表示纵轴的行的权重系数，一个数据控制几列与horz_zones相关，数据控制列数 =1 + int((horz_zones - 1)/(AE_ZONE_WGHT_HOR的lut表长度)) ，比如horz_zones*vore_zones为33*33,则AE_ZONE_WGHT_HOR一个下标数据控制就是（1+int((33 - 1)/(32)）= 2列，AE_ZONE_WGHT_HOR的lut表的长度/2的下标（中心）位置控制horz_zones/2的列数，比如lut表的16下标是中心点，lut表下标改成0的话就是控制的AE_ZONES_WEIGHT的第16和17列，如下control tool图1，图2，AE_ZONE_WGHT_HOR的lut表中心点往中心点两边计算，比如下标15控制AE_ZONES_WEIGHT的第14和15列，下标17控制AE_ZONES_WEIGHT的第18和19列，如图3，图4，其他下标控制如此类推，由于horz_zones会修改，修改后通过数据控制列数公式计算出一个下标控制几列，然后根据与中心距离，得出对应关系。</p>
<p><img alt="image-20221118184855810" src="../_images/image-20221118184855810.png" /></p>
<p>图1</p>
<p><img alt="image-20221118183608168" src="../_images/image-20221118183608168.png" /></p>
<p>图2</p>
<p><img alt="image-20221118185143974" src="../_images/image-20221118185143974.png" /></p>
<p>图3</p>
<p><img alt="image-20221118185333583" src="../_images/image-20221118185333583.png" /></p>
<p>图4</p>
<p>AE_ZONE_WGHT_VER表示横轴的列的权重系数，lut表下标控制行数计算公式如AE_ZONE_WGHT_HOR。</p>
</section>
</section>
</section>
<section id="id21">
<h2><span class="section-number">5.4.5. </span>参考代码<a class="headerlink" href="#id21" title="永久链接至标题"></a></h2>
<p>ISP图像系统部分示例代码可以参考，<a class="reference external" href="../samples/Mpp_Usage_Guidelines/sample_isp.html">sample_isp</a>。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="3-Video_Input_zh_CN.html" class="btn btn-neutral float-left" title="5.3. 视频输入" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="5-Video_Processing_zh_CN.html" class="btn btn-neutral float-right" title="5.5. 视频处理" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, Horizon Robotics.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>