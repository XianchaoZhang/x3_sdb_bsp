<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.8. 视频编码 &mdash; X3 用户手册 1.0.1 文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/horizon_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/horizon.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/hobot.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="5.9. 视频解码" href="9-Video_Decode_zh_CN.html" />
    <link rel="prev" title="5.7. 视频输出" href="7-Video_Output_zh_CN.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> X3 用户手册
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface/index.html">1. 前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/index.html">2. 快速入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samples/index.html">3. Demo使用指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsp_develop/index.html">4. BSP开发指南</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">5. 多媒体开发指南</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-Overview_zh_CN.html">5.1. 系统概述</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-System_Control_zh_CN.html">5.2. 系统控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-Video_Input_zh_CN.html">5.3. 视频输入</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-Graphic_System_API_Reference_Manual.html">5.4. ISP图像系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-Video_Processing_zh_CN.html">5.5. 视频处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="6-Region_Processing_zh_CN.html">5.6. 区域处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="7-Video_Output_zh_CN.html">5.7. 视频输出</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.8. 视频编码</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">5.8.1. 概述</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">5.8.2. 功能描述</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">5.8.2.1. 基础规格</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">5.8.2.2. 编解码通道</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">5.8.2.3. 码率控制</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gop">5.8.2.4. GOP结构</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id7">GOP预置结构</a></li>
<li class="toctree-l5"><a class="reference internal" href="#gopi">GOP和I帧周期关系</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#roi">5.8.2.5. ROI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#intra-refresh">5.8.2.6. Intra Refresh</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">5.8.2.7. 长期参考帧</a></li>
<li class="toctree-l4"><a class="reference internal" href="#smart-background-encoding">5.8.2.8. Smart background encoding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#skip">5.8.2.9. 帧skip设置</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#api">5.8.3. API参考</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-createchn">5.8.3.1. HB_VENC_CreateChn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-destroychn">5.8.3.2. HB_VENC_DestroyChn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-resetchn">5.8.3.3. HB_VENC_ResetChn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-startrecvframe">5.8.3.4. HB_VENC_StartRecvFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-stoprecvframe">5.8.3.5. HB_VENC_StopRecvFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setchnattr">5.8.3.6. HB_VENC_SetChnAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getchnattr">5.8.3.7. HB_VENC_GetChnAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getstream">5.8.3.8. HB_VENC_GetStream</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-releasestream">5.8.3.9. HB_VENC_ReleaseStream</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-sendframe">5.8.3.10. HB_VENC_SendFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-requestidr">5.8.3.11. HB_VENC_RequestIDR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setroiattr">5.8.3.12. HB_VENC_SetRoiAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getroiattr">5.8.3.13. HB_VENC_GetRoiAttr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth264slicesplit">5.8.3.14. HB_VENC_SetH264SliceSplit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth264slicesplit">5.8.3.15. HB_VENC_GetH264SliceSplit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth264intrapred">5.8.3.16. HB_VENC_SetH264IntraPred</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth264intrapred">5.8.3.17. HB_VENC_GetH264IntraPred</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth264trans">5.8.3.18. HB_VENC_SetH264Trans</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth264trans">5.8.3.19. HB_VENC_GetH264Trans</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth264entropy">5.8.3.20. HB_VENC_SetH264Entropy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth264entropy">5.8.3.21. HB_VENC_GetH264Entropy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth264dblk">5.8.3.22. HB_VENC_SetH264Dblk</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth264dblk">5.8.3.23. HB_VENC_GetH264Dblk</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth264vui">5.8.3.24. HB_VENC_SetH264Vui</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth264vui">5.8.3.25. HB_VENC_GetH264Vui</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth265vui">5.8.3.26. HB_VENC_SetH265Vui</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth265vui">5.8.3.27. HB_VENC_GetH265Vui</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setrcparam">5.8.3.28. HB_VENC_SetRcParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getrcparam">5.8.3.29. HB_VENC_GetRcParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setrefparam">5.8.3.30. HB_VENC_SetRefParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getrefparam">5.8.3.31. HB_VENC_GetRefParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-enableidr">5.8.3.32. HB_VENC_EnableIDR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth265slicesplit">5.8.3.33. HB_VENC_SetH265SliceSplit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth265slicesplit">5.8.3.34. HB_VENC_GetH265SliceSplit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth265predunit">5.8.3.35. HB_VENC_SetH265PredUnit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth265predunit">5.8.3.36. HB_VENC_GetH265PredUnit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth265trans">5.8.3.37. HB_VENC_SetH265Trans</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth265trans">5.8.3.38. HB_VENC_GetH265Trans</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth265dblk">5.8.3.39. HB_VENC_SetH265Dblk</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth265dblk">5.8.3.40. HB_VENC_GetH265Dblk</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-seth265sao">5.8.3.41. HB_VENC_SetH265Sao</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-geth265sao">5.8.3.42. HB_VENC_GetH265Sao</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setintrarefresh">5.8.3.43. HB_VENC_SetIntraRefresh</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getintrarefresh">5.8.3.44. HB_VENC_GetIntraRefresh</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setcuprediction">5.8.3.45. HB_VENC_SetCuPrediction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getcuprediction">5.8.3.46. HB_VENC_GetCuPrediction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setjpegparam">5.8.3.47. HB_VENC_SetJpegParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getjpegparam">5.8.3.48. HB_VENC_GetJpegParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setmjpegparam">5.8.3.49. HB_VENC_SetMjpegParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getmjpegparam">5.8.3.50. HB_VENC_GetMjpegParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getfd">5.8.3.51. HB_VENC_GetFd</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-closefd">5.8.3.52. HB_VENC_CloseFd</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-querystatus">5.8.3.53. HB_VENC_QueryStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-inseruserdata">5.8.3.54. HB_VENC_InserUserData</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setchnparam">5.8.3.55. HB_VENC_SetChnParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getchnparam">5.8.3.56. HB_VENC_GetChnParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setmodparam">5.8.3.57. HB_VENC_SetModParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getmodparam">5.8.3.58. HB_VENC_GetModParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-sendframeex">5.8.3.59. HB_VENC_SendFrameEx</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-setaverageqp">5.8.3.60. HB_VENC_SetAverageQp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-getaverageqp">5.8.3.61. HB_VENC_GetAverageQp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-set3dnrparam">5.8.3.62. HB_VENC_Set3DNRParam</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-get3dnrparam">5.8.3.63. HB_VENC_Get3DNRParam</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id9">5.8.4. 数据结构</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hb-pixel-format-e">5.8.4.1. HB_PIXEL_FORMAT_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#payload-type-e">5.8.4.2. PAYLOAD_TYPE_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-rotation-e">5.8.4.3. HB_ROTATION_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mirror-flip-e">5.8.4.4. MIRROR_FLIP_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-h264-profile-e">5.8.4.5. HB_VENC_H264_PROFILE_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-h264-level">5.8.4.6. HB_VENC_H264_LEVEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hb-venc-h265-level">5.8.4.7. HB_VENC_H265_LEVEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#codec-rect-s">5.8.4.8. CODEC_RECT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-attr-h264-s">5.8.4.9. VENC_ATTR_H264_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-attr-h265-s">5.8.4.10. VENC_ATTR_H265_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-attr-mjpeg-s">5.8.4.11. VENC_ATTR_MJPEG_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-attr-jpeg-s">5.8.4.12. VENC_ATTR_JPEG_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-attr-s">5.8.4.13. VENC_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-rc-mode-e">5.8.4.14. VENC_RC_MODE_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-cbr-s">5.8.4.15. VENC_H264_CBR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-vbr-s">5.8.4.16. VENC_H264_VBR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-avbr-s">5.8.4.17. VENC_H264_AVBR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-fixqp-s">5.8.4.18. VENC_H264_FIXQP_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-qpmap-s">5.8.4.19. VENC_H264_QPMAP_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-cbr-s">5.8.4.20. VENC_H265_CBR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-vbr-s">5.8.4.21. VENC_H265_VBR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-avbr-s">5.8.4.22. VENC_H265_AVBR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-fixqp-s">5.8.4.23. VENC_H265_FIXQP_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-qpmap-s">5.8.4.24. VENC_H265_QPMAP_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-mjpeg-fixqp-s">5.8.4.25. VENC_MJPEG_FIXQP_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-rc-attr-s">5.8.4.26. VENC_RC_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-gop-picture-custom-s">5.8.4.27. VENC_GOP_PICTURE_CUSTOM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-gop-custom-s">5.8.4.28. VENC_GOP_CUSTOM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-gop-attr-s">5.8.4.29. VENC_GOP_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-chn-attr-s">5.8.4.30. VENC_CHN_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-jpeg-param-s">5.8.4.31. VENC_JPEG_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-mjpeg-param-s">5.8.4.32. VENC_MJPEG_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-intra-refresh-mode-e">5.8.4.33. VENC_INTRA_REFRESH_MODE_E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-intra-refresh-s">5.8.4.34. VENC_INTRA_REFRESH_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-entropy-s">5.8.4.35. VENC_H264_ENTROPY_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-dblk-s">5.8.4.36. VENC_H264_DBLK_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-dblk-s">5.8.4.37. VENC_H265_DBLK_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-vui-h264-time-info-s">5.8.4.38. VENC_VUI_H264_TIME_INFO_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-vui-s">5.8.4.39. VENC_H264_VUI_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-vui-h265-time-info-s">5.8.4.40. VENC_VUI_H265_TIME_INFO_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-vui-s">5.8.4.41. VENC_H265_VUI_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-sao-s">5.8.4.42. VENC_H265_SAO_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-slice-split-s">5.8.4.43. VENC_H264_SLICE_SPLIT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-slice-split-s">5.8.4.44. VENC_H265_SLICE_SPLIT_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-intra-pred-s">5.8.4.45. VENC_H264_INTRA_PRED_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-pu-s">5.8.4.46. VENC_H265_PU_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h264-trans-s">5.8.4.47. VENC_H264_TRANS_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-h265-trans-s">5.8.4.48. VENC_H265_TRANS_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-cu-prediction-s">5.8.4.49. VENC_CU_PREDICTION_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-crop-info-s">5.8.4.50. VIDEO_CROP_INFO_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-frame-pack-s">5.8.4.51. VIDEO_FRAME_PACK_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-frame-s">5.8.4.52. VIDEO_FRAME_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-frame-info-s">5.8.4.53. VIDEO_FRAME_INFO_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-frame-info-jpeg-s">5.8.4.54. VIDEO_FRAME_INFO_JPEG_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-stream-pack-s">5.8.4.55. VIDEO_STREAM_PACK_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-stream-info-s">5.8.4.56. VIDEO_STREAM_INFO_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-stream-info-jpeg-s">5.8.4.57. VIDEO_STREAM_INFO_JPEG_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video-stream-s">5.8.4.58. VIDEO_STREAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-recv-pic-param-s">5.8.4.59. VENC_RECV_PIC_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-ref-param-s">5.8.4.60. VENC_REF_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-user-rc-attr-s">5.8.4.61. VENC_USER_RC_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-frame-info-s">5.8.4.62. USER_FRAME_INFO_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-param-mod-s">5.8.4.63. VENC_PARAM_MOD_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-frame-rate-s">5.8.4.64. VENC_FRAME_RATE_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-chn-param-s">5.8.4.65. VENC_CHN_PARAM_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-roi-attr-s">5.8.4.66. VENC_ROI_ATTR_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-chn-status-s">5.8.4.67. VENC_CHN_STATUS_S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#venc-3dnr-params">5.8.4.68. VENC_3DNR_PARAMS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id10">5.8.5. 错误码</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">5.8.6. 参考代码</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="9-Video_Decode_zh_CN.html">5.9. 视频解码</a></li>
<li class="toctree-l2"><a class="reference internal" href="10-ISP_Tuning_Guide/index.html">5.10. 图像调试指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-Image_Media_Module_Debugging_Guide/MU-2520-11-X3J3_Image_Media_Module_Debugging_Guide_zh_CN.html">5.11. 查询多媒体模块调试信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="12-Media_Processing_Performance_Debug_Guide.html">5.12. 多媒体性能调试</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ai_toolchain_develop/index.html">6. 量化工具链开发指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pc_tools/index.html">7. PC工具使用指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQs/index.html">8. FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feedback.html">9. 建议反馈</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">X3 用户手册</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">5. </span>多媒体开发指南</a> &raquo;</li>
      <li><span class="section-number">5.8. </span>视频编码</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="7-Video_Output_zh_CN.html" class="btn btn-neutral float-left" title="5.7. 视频输出" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="9-Video_Decode_zh_CN.html" class="btn btn-neutral float-right" title="5.9. 视频解码" accesskey="n">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1><span class="section-number">5.8. </span>视频编码<a class="headerlink" href="#id1" title="永久链接至标题"></a></h1>
<section id="id2">
<h2><span class="section-number">5.8.1. </span>概述<a class="headerlink" href="#id2" title="永久链接至标题"></a></h2>
<p>视频编码模块实现H.264/H.265/JPEG/MJPEG协议硬件编码。该模块支持多通道实时编码，各通道相互独立，常见的使用场景，包括单路录像、多路录像、单路VIO视频流、多路VIO视频流、录像+VIO视频流等。</p>
</section>
<section id="id3">
<h2><span class="section-number">5.8.2. </span>功能描述<a class="headerlink" href="#id3" title="永久链接至标题"></a></h2>
<section id="id4">
<h3><span class="section-number">5.8.2.1. </span>基础规格<a class="headerlink" href="#id4" title="永久链接至标题"></a></h3>
<p>X3支持的编码规格如下：</p>
<p><img alt="image-20220329224946556" src="../_images/image-20220329224946556.png" /></p>
<p>H264/H265协议编码性能如下：</p>
<ul class="simple">
<li><p>H.264编解码支持最大分辨率为 8192 x 8192，最小为256 x 128，解码最小为32 x 32</p></li>
<li><p>H.265编解码支持最大分辨率为 8192 x 8192，最小为256 x 128，解码最小为8 x 8</p></li>
<li><p>H.264/H.265的stride是32字节对齐，width和height都是8字节对齐，如果不是对齐的建议使用VIDEO_CROP_INFO_S去对应裁剪</p></li>
<li><p>H.264/H.265均具备多码流实时编码能力</p></li>
<li><p>最高能力支持 4K&#64;60fps</p></li>
<li><p>带QP map的ROI编码（让用户选择画面中感兴趣的区域，启用ROI功能后，重要的或者移动的区域将会进行高质量无损编码，而对那些不移动，不被选择的区域降低其码率和图像质量，进行标准清晰度视频压缩，甚至是不传输这部分区域视频）</p></li>
<li><p>支持旋转和镜像</p></li>
<li><p>Multi-instance处理，最多32个</p></li>
</ul>
<p>JPEG协议编码能力如下：</p>
<ul class="simple">
<li><p>编解码分辨率最大32768 x 32768，最小 16 x 16</p></li>
<li><p>MJPEG、JPEG的stride是32字节对齐，width是16字节对齐，height是8字节对齐</p></li>
<li><p>对于YUV 4:2:0 格式（例如：NV12），最高能力达到 4K&#64;30fps</p></li>
<li><p>JPEG Baseline and Extended sequential ISO/IEC 10918-1</p></li>
<li><p>支持一个或三个颜色分量，每个分量可以8位或12位采样</p></li>
<li><p>支持YUV 4:0:0，4:2:0，4:2:2，4:4:0 和 4:4:4 颜色格式</p></li>
<li><p>支持编解码ROI</p></li>
<li><p>支持slice encoding</p></li>
<li><p>支持旋转和镜像</p></li>
<li><p>Multi-instance，最高支持64个</p></li>
</ul>
</section>
<section id="id5">
<h3><span class="section-number">5.8.2.2. </span>编解码通道<a class="headerlink" href="#id5" title="永久链接至标题"></a></h3>
<p>编解码通道即一个特定类型的编解码实例，不同编解码通道的用户参数配置和资源可以相互独立，这样就可以实现多路不同规格的视频编解码，覆盖多种业务场景。</p>
</section>
<section id="id6">
<h3><span class="section-number">5.8.2.3. </span>码率控制<a class="headerlink" href="#id6" title="永久链接至标题"></a></h3>
<p>码率控制主要指的是对编码码率的控制。码率控制针对连续的视频编码码流而言，对于一个变化的场景，如果要达到图像质量稳定，则编码码率会抖动；如果要达到编码码率稳定，则图像质量会波动。X3针对H264、H265和MJPEG协议支持以下码率控制方式：</p>
<ul class="simple">
<li><p>H264/H265支持编码通道的CBR、VBR、AVBR、FixQp和QpMap五种码率控制方式</p></li>
<li><p>MJPGE编码通道的FixQp码率控制方式。</p></li>
</ul>
<p>CBR能够保证整体的编码码率稳定；</p>
<p>VBR则是保证编码图像的质量稳定；</p>
<p>AVBR会兼顾码率和图像质量，产生码率和图像质量相对稳定的码流；</p>
<p>FixQp是固定每一个I帧、P帧和B帧的QP值；</p>
<p>QPMAP是为一帧图像中的每一个块指定QP值，其中H264块大小为16x16，H265块大小为32x32。</p>
<p>对于CBR和AVBR来说，编码器内部会为每一帧图片找到合适的QP值，从而保证恒定码率。</p>
<p>编码器内部支持三种级别的码率控制，分别为帧级别、CTU/MB级别和subCTU/subMB级别。其中帧级别的控制主要会根据目标码率为每一帧图片产生一个QP值，从而保证码率恒定；CTU/MB级别的控制则根据每一个64x64的CTU或16x16的MB的目标码率为每个block产生一个QP值，能够得到更好的码率控制，但是频繁的QP值调整会造成图像质量不稳定的问题；subCTU/subMB级别的控制则为每一个32x32的subCTU或8x8的subMB产生一个QP值，其中复杂的块会得到较高的QP值，静态的块则会得到较低的QP值，因为相比于复杂的区域人眼对于静态的区域更敏感，复杂和静态区域的检测主要依赖于内部硬件模块，这个级别控制主要是为了提高主观图像质量同时保证码率恒定，该模式控制下SSIM得分较高，但是PSNR得分会降低。</p>
<p>CBR、VBR、AVBR可以使能QPMAP，则每个块区域的实际值由以下公式得到：</p>
<p><img alt="image-20220329234019920" src="../_images/image-20220329234019920.png" /></p>
<p>其中MQP为ROI map中的值，RQP为编码器内部码率控制得到的值，ROIAvaQP为ROI map中QP的平均值。</p>
</section>
<section id="gop">
<h3><span class="section-number">5.8.2.4. </span>GOP结构<a class="headerlink" href="#gop" title="永久链接至标题"></a></h3>
<p>GOP结构表可定义一组周期性的GOP结构，该GOP结构将用于整个编码过程。单个结构表中的元素如下表所示，其中可以指定该图像的参考帧，如果IDR帧后的其他帧指定的参考帧为IDR帧前的数据帧，编码器内部会自动处理这种情况使其不参考其他帧，用户无需关心这种情况。用户在自定义GOP结构时需要指明结构表的数量，最多可定义8个结构表，结构表的顺序需要按照解码顺序排列。</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Element</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Type</td>
<td align="left">Slice type（I，P or B）</td>
</tr>
<tr>
<td align="left">POC</td>
<td align="left">Display order of the frame within a GOP，ranging from 1 to GOP size</td>
</tr>
<tr>
<td align="left">QPoffset</td>
<td align="left">A quantization parameter of the picture in the custom GOP</td>
</tr>
<tr>
<td align="left">NUM_REF_PIC_L0</td>
<td align="left">Flag to use multi reference picture for P picture<br/>It is valid only if PIC_TYPE is P</td>
</tr>
<tr>
<td align="left">temporal_id</td>
<td align="left">Temporal layer of the frame. A frame cannot predict from a frame with a higher temporal id(0~6).</td>
</tr>
<tr>
<td align="left">1st_ref_POC</td>
<td align="left">The POC of the 1st reference picture of L0</td>
</tr>
<tr>
<td align="left">2nd_ref_POC</td>
<td align="left">The POC of 1st reference picture of L1 in case that Type is equal to B<br/>The POC of 2nd reference picture of L0 in case that Type is equal to P<br/>Note that reference_L1can have the same POC as reference in B slice. But for compression efficiency it is recommended that reference_L1 have a different POC from reference_L0</td>
</tr>
</tbody>
</table><section id="id7">
<h4>GOP预置结构<a class="headerlink" href="#id7" title="永久链接至标题"></a></h4>
<p><img alt="VENC_GOP_structure" src="../_images/ss_venc_gop_structure.png" /></p>
<p>下表所示为预置的8种GOP结构</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Index</th>
<th align="center">GOP <br />Structure</th>
<th align="center">Low Delay<br />（encoding<br /> order and<br /> display<br />order<br /> are same）</th>
<th align="center">GOP<br /> Size</th>
<th align="center">Encoding Order</th>
<th align="center">Minimum <br />Source <br />Frame <br />Buffer</th>
<th align="center">Minimum<br />Decoded<br />Picture<br />Buffer</th>
<th align="center">Intra Period<br />（I Frame <br />Interval）<br />Requirement</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1</td>
<td align="center">I</td>
<td align="center">Yes</td>
<td align="center">1</td>
<td align="center">I0-I1-I2…</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">P</td>
<td align="center">Yes</td>
<td align="center">1</td>
<td align="center">P0-P1-P2…</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">B</td>
<td align="center">Yes</td>
<td align="center">1</td>
<td align="center">B0-B1-B2…</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">BP</td>
<td align="center">No</td>
<td align="center">2</td>
<td align="center">B1-P0-B3-P2…</td>
<td align="center">4</td>
<td align="center">3</td>
<td align="center">Multiple of 2</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">BBBP</td>
<td align="center">No</td>
<td align="center">4</td>
<td align="center">B2-B1-B3-P0…</td>
<td align="center">7</td>
<td align="center">4</td>
<td align="center">Multiple of 4</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">PPPP</td>
<td align="center">Yes</td>
<td align="center">4</td>
<td align="center">P0-P1-P2-P3…</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">BBBB</td>
<td align="center">Yes</td>
<td align="center">4</td>
<td align="center">B0-B1-B2-B3…</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">BBBBBBBB</td>
<td align="center">No</td>
<td align="center">8</td>
<td align="center">B3-B2-B4-B1-B6-B5-B7-B0…</td>
<td align="center">12</td>
<td align="center">5</td>
<td align="center">Multiple of 8</td>
</tr>
</tbody>
</table><p>其中</p>
<ul class="simple">
<li><p>GOP Preset1</p>
<ul>
<li><p>只有I帧，没有相互参考帧</p></li>
<li><p>低延时
<img alt="VENC_GOP_preset1" src="../_images/ss_venc_gop_preset1.png" /></p></li>
</ul>
</li>
<li><p>GOP Preset2</p>
<ul>
<li><p>只有I帧和P帧</p></li>
<li><p>P帧参考两个前向参考帧</p></li>
<li><p>低延时
<img alt="VENC_GOP_preset2" src="../_images/ss_venc_gop_preset2.png" /></p></li>
</ul>
</li>
<li><p>GOP Preset3</p>
<ul>
<li><p>只有I帧和B帧</p></li>
<li><p>B帧参考两个前向参考帧</p></li>
<li><p>低延时
<img alt="VENC_GOP_preset3" src="../_images/ss_venc_gop_preset3.png" /></p></li>
</ul>
</li>
<li><p>GOP Preset4</p>
<ul>
<li><p>有I帧、P帧和B帧</p></li>
<li><p>P帧参考两个前向参考帧</p></li>
<li><p>B帧参考一个前向参考帧和一个后向参考帧
<img alt="VENC_GOP_preset4" src="../_images/ss_venc_gop_preset4.png" /></p></li>
</ul>
</li>
<li><p>GOP Preset5</p>
<ul>
<li><p>有I帧、P帧和B帧</p></li>
<li><p>P帧参考两个前向参考帧</p></li>
<li><p>B帧参考一个前向参考帧和一个后向参考帧，后向参考帧可为P帧或B帧
<img alt="VENC_GOP_preset5" src="../_images/ss_venc_gop_preset5.png" /></p></li>
</ul>
</li>
<li><p>GOP Preset 6</p>
<ul>
<li><p>只有I帧和P帧；</p></li>
<li><p>P帧参考两个前向参考帧；</p></li>
<li><p>低延时；
<img alt="VENC_GOP_preset6" src="../_images/ss_venc_gop_preset6.png" /></p></li>
</ul>
</li>
<li><p>GOP Preset 7</p>
<ul>
<li><p>只有I帧和B帧；</p></li>
<li><p>B帧参考两个前向参考帧；</p></li>
<li><p>低延时；
<img alt="VENC_GOP_preset7" src="../_images/ss_venc_gop_preset7.png" /></p></li>
</ul>
</li>
<li><p>GOP Preset 8</p>
<ul>
<li><p>只有I帧和B帧；</p></li>
<li><p>B帧参考一个前向参考帧和一个后向参考帧；
<img alt="VENC_GOP_preset8" src="../_images/ss_venc_gop_preset8.png" /></p></li>
</ul>
</li>
</ul>
</section>
<section id="gopi">
<h4>GOP和I帧周期关系<a class="headerlink" href="#gopi" title="永久链接至标题"></a></h4>
<p>如下图所示为GOP结构和I帧周期的关系。</p>
<p><img alt="VENC_GOP_i-frame" src="../_images/ss_venc_gop_i-frame.png" /></p>
</section>
</section>
<section id="roi">
<h3><span class="section-number">5.8.2.5. </span>ROI<a class="headerlink" href="#roi" title="永久链接至标题"></a></h3>
<p>ROI编码的实现和QPMAP类似，需要用户按照光栅扫描的方向为每一个块设定QP值，如下图所示为H265的ROI map示例。对于H264编码来说，每一个块的大小为16x16，而H265中则为32x32。在ROI map表中，每一个QP值占用一个字节，大小为0~51。</p>
<p>ROI编码可以和CBR和AVBR一起工作，当不使能CBR或AVBR时，每个块区域的实际QP值就为ROI map中指定的值，当使能CBR或AVBR时，则每个块区域的实际值由以下公式得到</p>
<p><img alt="image-20220405152959958" src="../_images/image-20220405152959958.png" /></p>
<p>其中MQP为ROI map中的值，RQP为编码器内部码率控制得到的值，ROIAvaQP为ROI map中QP的平均值。
<img alt="VENC_H265_ROI_map" src="../_images/ss_venc_h265_roi_map.png" /></p>
</section>
<section id="intra-refresh">
<h3><span class="section-number">5.8.2.6. </span>Intra Refresh<a class="headerlink" href="#intra-refresh" title="永久链接至标题"></a></h3>
<p>Intra Refresh模式通过在非I帧内部周期性的插入帧内编码的MB/CTU来提高容错性。它能够为解码器提供更多的修复点来避免时域错误造成的图像损坏。用户可以指定MB/CTU的连续行数、列数或者步长来强制编码器插入帧内编码单元，用户还可指定帧内编码单元的大小由编码器内部决定哪一块需要帧内编码。</p>
</section>
<section id="id8">
<h3><span class="section-number">5.8.2.7. </span>长期参考帧<a class="headerlink" href="#id8" title="永久链接至标题"></a></h3>
<p>用户可指定长期参考帧的周期和参考长期参考帧的周期，如下图所示。
<img alt="VENC_long_reference_frame" src="../_images/ss_venc_long_reference_frame.png" /></p>
</section>
<section id="smart-background-encoding">
<h3><span class="section-number">5.8.2.8. </span>Smart background encoding<a class="headerlink" href="#smart-background-encoding" title="永久链接至标题"></a></h3>
<p>在视频监控场景中，很多时候背景是固定的。因此希望编码器在检测到背景区域时采用忽略模式或使用更少的码流来编码该区域。实际场景中由于camera图像存在噪点导致背景区域检测不太容易，很多时候需要ISP检测到背景区域时再通知编码器，这种方案会消耗额外的带宽和系统计算资源。</p>
<p>H264和H265编码提供集成在codec内部的智能背景编码模式，该模式充分利用内部硬件模块和on-the-fly处理，不会消耗额外的带宽和系统资源。如下图所示为背景检测的工作模式，智能背景编码模式下内部硬件模块会将每一个块单元和参考帧的块单元对比决定该块是否为背景。</p>
<p>对于背景区域的判断，用户可以设置最大的像素差值（推荐值8）和平均像素差值（推荐值1）。用户还可调整Lambda参数来影响编码中的模式选择，当检测到背景区域时，编码器内部会为每个块增加对应的Lambda值，使能编码器内部偏向于采用忽略模式来编码该块单元。对于Lambda控制，用户可设置lambdaQP（推荐值32）和deltaQP（推荐值3），最终的Lambda值按以下公式计算得到。</p>
<p><img alt="image-20220405153105331" src="../_images/image-20220405153105331.png" /></p>
<p>其中QP_TO_LAMBDA_TABLE为lambda转换表，该表也会被用于非背景区域的lambda转换。
<img alt="VENC_smart_bg_encoding" src="../_images/ss_venc_smart_bg_encoding.png" /></p>
<p>需要注意的是当ROI编码使能时，Smart background encoding不会工作。该模式实际能节省的带宽与设定的码率和I帧间隔有很大关系，当码率和I帧间隔变大时，节省的码率越多。此外该模式下可以设置图像质量较好的帧作为长期参考帧来提高背景图像的质量和节省码率。</p>
</section>
<section id="skip">
<h3><span class="section-number">5.8.2.9. </span>帧skip设置<a class="headerlink" href="#skip" title="永久链接至标题"></a></h3>
<p>用户可调用接口设置下一次操作输入的图像的编码模式为skip模式，该模式只对非I帧编码有效；skip模式下编码器内部会忽略输入帧，而是利用上一帧的重构帧生成该次输入的的重构帧，输入帧则被编码成P帧。</p>
</section>
</section>
<section id="api">
<h2><span class="section-number">5.8.3. </span>API参考<a class="headerlink" href="#api" title="永久链接至标题"></a></h2>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span>HB_VENC_CreateChn：创建编码通道。
HB_VENC_DestroyChn：销毁编码通道。
HB_VENC_ResetChn：复位编码通道。
HB_VENC_StartRecvFrame：开启编码通道接收输入图像。
HB_VENC_StopRecvFrame：停止编码通道接收输入图像。
HB_VENC_SetChnAttr 设置编码通道的编码属性。
HB_VENC_GetChnAttr：获取编码通道的编码属性。
HB_VENC_GetStream：获取编码码流。
HB_VENC_ReleaseStream：释放码流缓存。
HB_VENC_SendFrame：支持用户发送原始图像进行编码。
HB_VENC_RequestIDR：请求 IDR 帧。
HB_VENC_SetRoiAttr：设置编码通道的感兴趣区域编码配置。
HB_VENC_GetRoiAttr：获取编码通道的感兴趣区域编码配置。
HB_VENC_SetH264SliceSplit：设置 H.264 编码的 slice 分割配置。
HB_VENC_GetH264SliceSplit：获取 H.264 编码的 slice 分割配置。
HB_VENC_SetH264IntraPred：设置 H.264 编码的帧内预测配置。
HB_VENC_GetH264IntraPred：获取 H.264 编码的帧内预测配置。
HB_VENC_SetH264Trans：设置 H.264 编码的变换、量化配置。
HB_VENC_GetH264Trans：获取 H.264 编码的变换、量化配置。
HB_VENC_SetH264Entropy：设置 H.264 编码的熵编码配置。
HB_VENC_GetH264Entropy：获取 H.264 编码的熵编码配置。
HB_VENC_SetH264Dblk：设置 H.264 编码的 deblocking 配置。
HB_VENC_GetH264Dblk：获取 H.264 编码的 deblocking 配置。
HB_VENC_SetH264Vui：设置 H.264 编码的 VUI 配置。
HB_VENC_GetH264Vui：获取 H.264 编码的 VUI 配置。
HB_VENC_SetH265Vui：设置 H.265 协议编码通道的 VUI 参数。
HB_VENC_GetH265Vui：获取 H.265 协议编码通道的 VUI 配置
HB_VENC_SetRcParam：设置通道码率控制高级参数。
HB_VENC_GetRcParam：获取通道码率控制高级参数。
HB_VENC_SetRefParam：设置 H.264/H.265 编码通道高级跳帧参考参数。
HB_VENC_GetRefParam：获取 H.264/H.265 编码通道高级跳帧参考参数。
HB_VENC_SetH265SliceSplit：设置 H.265 编码的 slice 分割配置。
HB_VENC_GetH265SliceSplit：获取 H.265 编码的 slice 分割配置。
HB_VENC_SetH265PredUnit：设置 H.265 编码的 PU 配置。
HB_VENC_GetH265PredUnit：获取 H.265 编码的 PU 配置。
HB_VENC_SetH265Trans：设置 H.265 编码的变换、量化配置。
HB_VENC_GetH265Trans：获取 H.265 编码的变换、量化配置。
HB_VENC_SetH265Dblk：设置 H.265 编码的 deblocking 配置。
HB_VENC_GetH265Dblk：获取 H.265 编码的 deblocking 配置。
HB_VENC_SetH265Sao：设置 H.265 编码的 SAO 配置。
HB_VENC_GetH265Sao：获取 H.265 编码的 SAO 配置。
HB_VENC_GetIntraRefresh：获取 P 帧刷 Islice 的设置参数。
HB_VENC_SetIntraRefresh：设置 P 帧刷 Islice 的参数。
HB_VENC_SetCuPrediction：设置 CU 模式的倾向性。
HB_VENC_GetCuPrediction：获取 CU 模式的倾向性配置。
HB_VENC_GetFd: 获取编码通道对应的设备文件句柄。
HB_VENC_CloseFd：关闭编码通道对应的设备文件句柄。
HB_VENC_QueryStatus：查询编码通道状态。
HB_VENC_InserUserData：插入用户数据。
HB_VENC_SendFrameEx：发送原始图像及该图的QpMap表进行编码
</pre></div>
</div>
<section id="hb-venc-createchn">
<h3><span class="section-number">5.8.3.1. </span>HB_VENC_CreateChn<a class="headerlink" href="#hb-venc-createchn" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>创建编码通道。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)。<br/>H264/H265最大支持32通道，JPEG/MJPEG最大支持64通道。</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstAttr</td>
<td align="left">编码通道属性指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-destroychn">
<h3><span class="section-number">5.8.3.2. </span>HB_VENC_DestroyChn<a class="headerlink" href="#hb-venc-destroychn" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>销毁编码通道。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-resetchn">
<h3><span class="section-number">5.8.3.3. </span>HB_VENC_ResetChn<a class="headerlink" href="#hb-venc-resetchn" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_ResetChn</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>复位编码通道。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-startrecvframe">
<h3><span class="section-number">5.8.3.4. </span>HB_VENC_StartRecvFrame<a class="headerlink" href="#hb-venc-startrecvframe" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_StartRecvFrame</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_RECV_PIC_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRecvParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>开启编码通道接收输入图像。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstRecvParam</td>
<td align="left">接收图像参数结构体指针，用于指定需要接收的图像帧数。    输入</td>
<td align="center"></td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>需要在HB_VENC_SetChnAttr设置完通道属性后，才能调用。</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-stoprecvframe">
<h3><span class="section-number">5.8.3.5. </span>HB_VENC_StopRecvFrame<a class="headerlink" href="#hb-venc-stoprecvframe" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_StopRecvFrame</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>停止编码通道接收输入图像。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-setchnattr">
<h3><span class="section-number">5.8.3.6. </span>HB_VENC_SetChnAttr<a class="headerlink" href="#hb-venc-setchnattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstChnAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置编码通道的编码属性。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstChnAttr</td>
<td align="left">编码通道属性指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>需要先HB_VENC_CreateChn创建通道。</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-getchnattr">
<h3><span class="section-number">5.8.3.7. </span>HB_VENC_GetChnAttr<a class="headerlink" href="#hb-venc-getchnattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetChnAttr</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstChnAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取编码通道的编码属性。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstChnAttr</td>
<td align="left">编码通道属性指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-getstream">
<h3><span class="section-number">5.8.3.8. </span>HB_VENC_GetStream<a class="headerlink" href="#hb-venc-getstream" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetStream</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_STREAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstStream</span><span class="p">,</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32MilliSec</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取编码码流。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstStream</td>
<td align="left">码流结构体指针</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">s32MilliSec</td>
<td align="left">获取码流超时时间。<br/>取值范围：[-1, + ∞ )<br/> -1：阻塞。<br/> 0：非阻塞。<br/> 大于 0：超时时间。</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">640</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">480</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">FILE</span><span class="w"> </span><span class="o">*</span><span class="n">inFile</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">inputFileName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;./venc/yuv/input_640x480_yuv420p.yuv&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">inFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fopen</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;rb&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ASSERT_NE</span><span class="p">(</span><span class="n">inFile</span><span class="p">,</span><span class="w"> </span><span class="n">nullptr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">mmz_paddr</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="n">mmz_paddr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">mmz_paddr</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">mmz_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VP_CONFIG_S</span><span class="w"> </span><span class="n">struVpConf</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">struVpConf</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VP_CONFIG_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">struVpConf</span><span class="p">.</span><span class="n">u32MaxPoolCnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VP_SetConfig</span><span class="p">(</span><span class="o">&amp;</span><span class="n">struVpConf</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VP_Init</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s32Ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;vp_init fail s32Ret = %d !</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">s32Ret</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_SYS_Alloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mmz_paddr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">mmz_size</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s32Ret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;mmzAlloc paddr = 0x%x, vaddr = 0x%x i = %d </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mmz_paddr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32ReadLen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">s32ReadLen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fread</span><span class="p">(</span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">mmz_size</span><span class="p">,</span><span class="w"> </span><span class="n">inFile</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;s32ReadLen = %d !!!!!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s32ReadLen</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s32ReadLen</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;read over !!!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* if (inFile) fclose(inFile); */</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w">  </span><span class="c1">// config</span>

<span class="w">    </span><span class="n">VENC_RECV_PIC_PARAM_S</span><span class="w"> </span><span class="n">pstRecvParam</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRecvParam</span><span class="p">.</span><span class="n">s32RecvPicNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// unchangable</span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_StartRecvFrame</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstRecvParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">VIDEO_FRAME_S</span><span class="w"> </span><span class="n">pstFrame</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VIDEO_STREAM_S</span><span class="w"> </span><span class="n">pstStream</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstFrame</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VIDEO_FRAME_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstStream</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VIDEO_STREAM_S</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mmz_size</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">phy_ptr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mmz_paddr</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">phy_ptr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mmz_paddr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">phy_ptr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mmz_paddr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">vir_ptr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">vir_ptr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">vir_ptr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">pstFrame</span><span class="p">.</span><span class="n">stVFrame</span><span class="p">.</span><span class="n">frame_end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SendFrame</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstFrame</span><span class="p">,</span><span class="w"> </span><span class="mi">3000</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">usleep</span><span class="p">(</span><span class="mi">300000</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetStream</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstStream</span><span class="p">,</span><span class="w"> </span><span class="mi">3000</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">s32Ret</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int32_t</span><span class="p">)</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;i = %d   pstStream.pstPack.size = %d !!!!!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">pstStream</span><span class="p">.</span><span class="n">pstPack</span><span class="p">.</span><span class="n">size</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_ReleaseStream</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstStream</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_StopRecvFrame</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_SYS_Free</span><span class="p">(</span><span class="n">mmz_paddr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s32Ret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;mmzFree paddr = 0x%x, vaddr = 0x%x i = %d </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mmz_paddr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"></span>
<span class="w">                </span><span class="n">mmz_vaddr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VP_Exit</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s32Ret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;vp exit ok!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;GetStream_Test</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inFile</span><span class="p">)</span><span class="w"> </span><span class="n">fclose</span><span class="p">(</span><span class="n">inFile</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-releasestream">
<h3><span class="section-number">5.8.3.9. </span>HB_VENC_ReleaseStream<a class="headerlink" href="#hb-venc-releasestream" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_ReleaseStream</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_STREAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstStream</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>释放码流缓存。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstStream</td>
<td align="left">码流结构体指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-sendframe">
<h3><span class="section-number">5.8.3.10. </span>HB_VENC_SendFrame<a class="headerlink" href="#hb-venc-sendframe" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SendFrame</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_FRAME_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstFrame</span><span class="w"> </span><span class="p">,</span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32MilliSec</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>支持用户发送原始图像进行编码。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstFrame</td>
<td align="left">原始图像信息结构指针。</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">s32MilliSec</td>
<td align="left">获取码流超时时间。<br/>取值范围：[-1, + ∞ )<br/> -1：阻塞。<br/> 0：非阻塞。<br/> 大于 0：超时时间。</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetStream参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-requestidr">
<h3><span class="section-number">5.8.3.11. </span>HB_VENC_RequestIDR<a class="headerlink" href="#hb-venc-requestidr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_RequestIDR</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>请求 IDR 帧。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_RequestIDR</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-setroiattr">
<h3><span class="section-number">5.8.3.12. </span>HB_VENC_SetRoiAttr<a class="headerlink" href="#hb-venc-setroiattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetRoiAttr</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_ROI_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRoiAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置编码通道的感兴趣区域编码配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstRoiAttr</td>
<td align="left">ROI区域参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetRoiAttr参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-getroiattr">
<h3><span class="section-number">5.8.3.13. </span>HB_VENC_GetRoiAttr<a class="headerlink" href="#hb-venc-getroiattr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetRoiAttr</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_ROI_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRoiAttr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取编码通道的感兴趣区域编码配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstRoiAttr</td>
<td align="left">对应ROI区域的配置</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_ROI_ATTR_S</span><span class="w"> </span><span class="n">pstRoiAttrTest1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstRoiAttrTest1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_ROI_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">stroi_map_array1</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRoiAttrTest1</span><span class="p">.</span><span class="n">roi_map_array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stroi_map_array1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_ROI_ATTR_S</span><span class="w"> </span><span class="n">pstRoiAttrTest2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstRoiAttrTest1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_ROI_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">stroi_map_array</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRoiAttrTest2</span><span class="p">.</span><span class="n">roi_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRoiAttrTest2</span><span class="p">.</span><span class="n">roi_map_array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stroi_map_array</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRoiAttrTest2</span><span class="p">.</span><span class="n">roi_map_array_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetRoiAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstRoiAttrTest2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRoiAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstRoiAttrTest1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-seth264slicesplit">
<h3><span class="section-number">5.8.3.14. </span>HB_VENC_SetH264SliceSplit<a class="headerlink" href="#hb-venc-seth264slicesplit" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH264SliceSplit</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H264_SLICE_SPLIT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSliceSplit</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 H.264 编码的 slice 分割配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstSliceSplit</td>
<td align="left">H.264 码流 slice 分割参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetH264SliceSplit参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-geth264slicesplit">
<h3><span class="section-number">5.8.3.15. </span>HB_VENC_GetH264SliceSplit<a class="headerlink" href="#hb-venc-geth264slicesplit" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH264SliceSplit</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H264_SLICE_SPLIT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSliceSplit</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.264 编码的 slice 分割配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstSliceSplit</td>
<td align="left">H.264 码流 slice 分割参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_SLICE_SPLIT_S</span><span class="w"> </span><span class="n">pstSliceSplit1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstSliceSplit1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_SLICE_SPLIT_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w">  </span><span class="c1">// config</span>

<span class="w">    </span><span class="n">pstSliceSplit1</span><span class="p">.</span><span class="n">h264_slice_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstSliceSplit1</span><span class="p">.</span><span class="n">h264_slice_arg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstSliceSplit1</span><span class="p">.</span><span class="n">slice_loop_filter_across_slices_enabled_flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH264SliceSplit</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstSliceSplit1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_SLICE_SPLIT_S</span><span class="w"> </span><span class="n">pstSliceSplit2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstSliceSplit2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_SLICE_SPLIT_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH264SliceSplit</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstSliceSplit2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-seth264intrapred">
<h3><span class="section-number">5.8.3.16. </span>HB_VENC_SetH264IntraPred<a class="headerlink" href="#hb-venc-seth264intrapred" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH264IntraPred</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H264_INTRA_PRED_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264IntraPred</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置H.264 编码的帧内预测配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264IntraPred</td>
<td align="left">H.264 协议编码通道的帧内预测配置</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetH264IntraPred参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-geth264intrapred">
<h3><span class="section-number">5.8.3.17. </span>HB_VENC_GetH264IntraPred<a class="headerlink" href="#hb-venc-geth264intrapred" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH264IntraPred</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H264_INTRA_PRED_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264IntraPred</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.264 编码的帧内预测配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264IntraPred</td>
<td align="left">H.264 协议编码通道的帧内预测配置</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_INTRA_PRED_S</span><span class="w"> </span><span class="n">pstH264IntraPred1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264IntraPred1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_INTRA_PRED_S</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">pstH264IntraPred1</span><span class="p">.</span><span class="n">constrained_intra_pred_flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH264IntraPred</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264IntraPred1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_INTRA_PRED_S</span><span class="w"> </span><span class="n">pstH264IntraPred2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264IntraPred2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_INTRA_PRED_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH264IntraPred</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264IntraPred2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-seth264trans">
<h3><span class="section-number">5.8.3.18. </span>HB_VENC_SetH264Trans<a class="headerlink" href="#hb-venc-seth264trans" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH264Trans</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H264_TRANS_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264Trans</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置H.264 编码的变换、量化配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264Trans</td>
<td align="left">H.264 协议编码通道的变换、量化属性</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_TRANS_S</span><span class="w"> </span><span class="n">pstH264Trans1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264Trans1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_TRANS_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Trans1</span><span class="p">.</span><span class="n">chroma_cb_qp_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Trans1</span><span class="p">.</span><span class="n">chroma_cr_qp_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Trans1</span><span class="p">.</span><span class="n">transform_8x8_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Trans1</span><span class="p">.</span><span class="n">user_scaling_list_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH264Trans</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264Trans1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_H264_TRANS_S</span><span class="w"> </span><span class="n">pstH264Trans2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264Trans2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_TRANS_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH264Trans</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264Trans2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth264trans">
<h3><span class="section-number">5.8.3.19. </span>HB_VENC_GetH264Trans<a class="headerlink" href="#hb-venc-geth264trans" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH264Trans</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H264_TRANS_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264Trans</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.264 编码的变换、量化配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264Trans</td>
<td align="left">H.264 协议编码通道的变换、量化属性</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH264Trans参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-seth264entropy">
<h3><span class="section-number">5.8.3.20. </span>HB_VENC_SetH264Entropy<a class="headerlink" href="#hb-venc-seth264entropy" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH264Entropy</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H264_ENTROPY_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264EntropyEnc</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 H.264 编码的熵编码配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264EntropyEnc</td>
<td align="left">H.264 协议编码通道的熵编码模式</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_ENTROPY_S</span><span class="w"> </span><span class="n">pstH264EntropyEnc1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264EntropyEnc1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_ENTROPY_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264EntropyEnc1</span><span class="p">.</span><span class="n">u32EntropyEncMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH264Entropy</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264EntropyEnc1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_H264_ENTROPY_S</span><span class="w"> </span><span class="n">pstH264EntropyEnc2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264EntropyEnc2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_ENTROPY_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH264Entropy</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264EntropyEnc2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth264entropy">
<h3><span class="section-number">5.8.3.21. </span>HB_VENC_GetH264Entropy<a class="headerlink" href="#hb-venc-geth264entropy" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH264Entropy</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H264_ENTROPY_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264EntropyEnc</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.264 编码的熵编码配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264EntropyEnc</td>
<td align="left">H.264 协议编码通道的熵编码模式</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH264Entropy参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-seth264dblk">
<h3><span class="section-number">5.8.3.22. </span>HB_VENC_SetH264Dblk<a class="headerlink" href="#hb-venc-seth264dblk" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH264Dblk</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H264_DBLK_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264Dblk</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置获H.264 编码的 deblocking 配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264Dblk</td>
<td align="left">H.264 协议编码通道的 Deblocking 参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_DBLK_S</span><span class="w"> </span><span class="n">pstH264Dblk1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264Dblk1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_DBLK_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Dblk1</span><span class="p">.</span><span class="n">disable_deblocking_filter_idc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Dblk1</span><span class="p">.</span><span class="n">slice_alpha_c0_offset_div2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Dblk1</span><span class="p">.</span><span class="n">slice_beta_offset_div2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH264Dblk</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264Dblk1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_DBLK_S</span><span class="w"> </span><span class="n">pstH264Dblk2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264Dblk2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_DBLK_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH264Dblk</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264Dblk2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth264dblk">
<h3><span class="section-number">5.8.3.23. </span>HB_VENC_GetH264Dblk<a class="headerlink" href="#hb-venc-geth264dblk" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH264Dblk</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H264_DBLK_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264Dblk</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.264 编码的 deblocking 配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264Dblk</td>
<td align="left">H.264 协议编码通道的 Deblocking 参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetH264Dblk参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-seth264vui">
<h3><span class="section-number">5.8.3.24. </span>HB_VENC_SetH264Vui<a class="headerlink" href="#hb-venc-seth264vui" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH264Vui</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H264_VUI_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264Vui</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 H.264 编码的 VUI 配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264Vui</td>
<td align="left">H.264 协议编码通道的 Vui 参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>Vui参数为静态参数，只能在HB_VENC_SetChnAttr之前调用。</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_VUI_S</span><span class="w"> </span><span class="n">pstH264Vui1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264Vui1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_VUI_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">pstH264Vui1</span><span class="p">.</span><span class="n">stVuiTimeInfo</span><span class="p">.</span><span class="n">fixed_frame_rate_flag</span><span class="w"> </span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Vui1</span><span class="p">.</span><span class="n">stVuiTimeInfo</span><span class="p">.</span><span class="n">num_units_in_tick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH264Vui1</span><span class="p">.</span><span class="n">stVuiTimeInfo</span><span class="p">.</span><span class="n">time_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH264Vui</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264Vui1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H264_VUI_S</span><span class="w"> </span><span class="n">pstH264Vui2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH264Vui2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H264_VUI_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH264Vui</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH264Vui2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth264vui">
<h3><span class="section-number">5.8.3.25. </span>HB_VENC_GetH264Vui<a class="headerlink" href="#hb-venc-geth264vui" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH264Vui</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H264_VUI_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH264Vui</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.264 编码的 VUI 配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH264Vui</td>
<td align="left">H.264 协议编码通道的 Vui 参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH264Vui参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-seth265vui">
<h3><span class="section-number">5.8.3.26. </span>HB_VENC_SetH265Vui<a class="headerlink" href="#hb-venc-seth265vui" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH265Vui</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H265_VUI_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH265Vui</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 H.265 协议编码通道的 VUI 配置</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH265Vui</td>
<td align="left">H.265 协议编码通道的 Vui 参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_VUI_S</span><span class="w"> </span><span class="n">pstH265Vui1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH265Vui1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_VUI_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H265</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H265CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Vui1</span><span class="p">.</span><span class="n">stVuiTimeInfo</span><span class="p">.</span><span class="n">num_ticks_poc_diff_one_minus1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Vui1</span><span class="p">.</span><span class="n">stVuiTimeInfo</span><span class="p">.</span><span class="n">num_units_in_tick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Vui1</span><span class="p">.</span><span class="n">stVuiTimeInfo</span><span class="p">.</span><span class="n">time_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH265Vui</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH265Vui1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_VUI_S</span><span class="w"> </span><span class="n">pstH265Vui2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH265Vui2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_VUI_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH265Vui</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH265Vui2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth265vui">
<h3><span class="section-number">5.8.3.27. </span>HB_VENC_GetH265Vui<a class="headerlink" href="#hb-venc-geth265vui" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH265Vui</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H265_VUI_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH265Vui</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.265 协议编码通道的 VUI 配置</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH265Vui</td>
<td align="left">H.265 协议编码通道的 Vui 参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH265Vui参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-setrcparam">
<h3><span class="section-number">5.8.3.28. </span>HB_VENC_SetRcParam<a class="headerlink" href="#hb-venc-setrcparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetRcParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置通道码率控制高级参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstRcParam</td>
<td align="left">编码通道码率控制器的高级参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-getrcparam">
<h3><span class="section-number">5.8.3.29. </span>HB_VENC_GetRcParam<a class="headerlink" href="#hb-venc-getrcparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取通道码率控制高级参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstRcParam</td>
<td align="left">编码通道码率控制器的高级参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-setrefparam">
<h3><span class="section-number">5.8.3.30. </span>HB_VENC_SetRefParam<a class="headerlink" href="#hb-venc-setrefparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetRefParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_REF_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRefParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 H.264/H.265 编码通道高级跳帧参考参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstRefParam</td>
<td align="left">H.264/H.265 编码通道高级跳帧参考参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_REF_PARAM_S</span><span class="w"> </span><span class="n">pstRefParam_test1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstRefParam_test1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_REF_PARAM_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">pstRefParam_test1</span><span class="p">.</span><span class="n">use_longterm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRefParam_test1</span><span class="p">.</span><span class="n">longterm_pic_period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRefParam_test1</span><span class="p">.</span><span class="n">longterm_pic_using_period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetRefParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstRefParam_test1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_REF_PARAM_S</span><span class="w"> </span><span class="n">pstRefParam_test2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstRefParam_test2</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_REF_PARAM_S</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRefParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstRefParam_test2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-getrefparam">
<h3><span class="section-number">5.8.3.31. </span>HB_VENC_GetRefParam<a class="headerlink" href="#hb-venc-getrefparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetRefParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_REF_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRefParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.264/H.265 编码通道高级跳帧参考参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstRefParam</td>
<td align="left">H.264/H.265 编码通道高级跳帧参考参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetRefParam参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-enableidr">
<h3><span class="section-number">5.8.3.32. </span>HB_VENC_EnableIDR<a class="headerlink" href="#hb-venc-enableidr" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_EnableIDR</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bEnableIDR</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>使能 IDR 帧。</p>
</div></blockquote>
<p>【参数描述】</p>
<p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
</section>
<section id="hb-venc-seth265slicesplit">
<h3><span class="section-number">5.8.3.33. </span>HB_VENC_SetH265SliceSplit<a class="headerlink" href="#hb-venc-seth265slicesplit" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH265SliceSplit</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H265_SLICE_SPLIT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSliceSplit</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 H.265 编码的 slice 分割配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstSliceSplit</td>
<td align="left">H.265 码流 slice 分割参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_SLICE_SPLIT_S</span><span class="w"> </span><span class="n">pstSliceSplit1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstSliceSplit1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_SLICE_SPLIT_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H265</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H265CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstSliceSplit1</span><span class="p">.</span><span class="n">h265_dependent_slice_arg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstSliceSplit1</span><span class="p">.</span><span class="n">h265_dependent_slice_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstSliceSplit1</span><span class="p">.</span><span class="n">h265_independent_slice_arg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstSliceSplit1</span><span class="p">.</span><span class="n">h265_independent_slice_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH265SliceSplit</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstSliceSplit1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_SLICE_SPLIT_S</span><span class="w"> </span><span class="n">pstSliceSplit2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstSliceSplit2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_SLICE_SPLIT_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH265SliceSplit</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstSliceSplit2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth265slicesplit">
<h3><span class="section-number">5.8.3.34. </span>HB_VENC_GetH265SliceSplit<a class="headerlink" href="#hb-venc-geth265slicesplit" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH265SliceSplit</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H265_SLICE_SPLIT_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstSliceSplit</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.265 编码的 slice 分割配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstSliceSplit</td>
<td align="left">H.265 码流 slice 分割参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH265SliceSplit参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-seth265predunit">
<h3><span class="section-number">5.8.3.35. </span>HB_VENC_SetH265PredUnit<a class="headerlink" href="#hb-venc-seth265predunit" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH265PredUnit</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H265_PU_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstPredUnit</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置H.265 编码的 PU 配置</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstPredUnit</td>
<td align="left">H.265 协议编码通道的 PU 配置</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_PU_S</span><span class="w"> </span><span class="n">pstPredUnit1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstPredUnit1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_PU_S</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H265</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H265CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">pstPredUnit1</span><span class="p">.</span><span class="n">constrained_intra_pred_flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstPredUnit1</span><span class="p">.</span><span class="n">intra_nxn_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstPredUnit1</span><span class="p">.</span><span class="n">max_num_merge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstPredUnit1</span><span class="p">.</span><span class="n">strong_intra_smoothing_enabled_flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH265PredUnit</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstPredUnit1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_PU_S</span><span class="w"> </span><span class="n">pstPredUnit2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstPredUnit2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_PU_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH265PredUnit</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstPredUnit2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth265predunit">
<h3><span class="section-number">5.8.3.36. </span>HB_VENC_GetH265PredUnit<a class="headerlink" href="#hb-venc-geth265predunit" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH265PredUnit</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H265_PU_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstPredUnit</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.265 编码的 PU 配置</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstPredUnit</td>
<td align="left">H.265 协议编码通道的 PU 配置</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH265PredUnit参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-seth265trans">
<h3><span class="section-number">5.8.3.37. </span>HB_VENC_SetH265Trans<a class="headerlink" href="#hb-venc-seth265trans" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH265Trans</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H265_TRANS_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH265Trans</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置H.265编码的变换、量化配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH265Trans</td>
<td align="left">H.265 协议编码通道的变换量化配置</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_TRANS_S</span><span class="w"> </span><span class="n">pstH265Trans1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH265Trans1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_TRANS_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H265</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H265CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Trans1</span><span class="p">.</span><span class="n">chroma_cb_qp_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Trans1</span><span class="p">.</span><span class="n">chroma_cr_qp_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Trans1</span><span class="p">.</span><span class="n">user_scaling_list_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH265Trans</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH265Trans1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_H265_TRANS_S</span><span class="w"> </span><span class="n">pstH265Trans2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH265Trans2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_TRANS_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH265Trans</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH265Trans2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth265trans">
<h3><span class="section-number">5.8.3.38. </span>HB_VENC_GetH265Trans<a class="headerlink" href="#hb-venc-geth265trans" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH265Trans</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H265_TRANS_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH265Trans</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.265 编码的变换、量化配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH265Trans</td>
<td align="left">H.265 协议编码通道的变换量化配置</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH265Trans参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-seth265dblk">
<h3><span class="section-number">5.8.3.39. </span>HB_VENC_SetH265Dblk<a class="headerlink" href="#hb-venc-seth265dblk" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH265Dblk</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H265_DBLK_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH265Dblk</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 H.265 编码的 deblocking 配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH265Dblk</td>
<td align="left">H.265 协议编码通道的 Deblocking 配置</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_DBLK_S</span><span class="w"> </span><span class="n">pstH265Dblk1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH265Dblk1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_DBLK_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H265</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H265CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Dblk1</span><span class="p">.</span><span class="n">slice_beta_offset_div2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Dblk1</span><span class="p">.</span><span class="n">slice_tc_offset_div2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Dblk1</span><span class="p">.</span><span class="n">slice_deblocking_filter_disabled_flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH265Dblk</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH265Dblk1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_H265_DBLK_S</span><span class="w"> </span><span class="n">pstH265Dblk2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH265Dblk2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_DBLK_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH265Dblk</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH265Dblk2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth265dblk">
<h3><span class="section-number">5.8.3.40. </span>HB_VENC_GetH265Dblk<a class="headerlink" href="#hb-venc-geth265dblk" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH265Dblk</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H265_DBLK_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH265Dblk</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.265 编码的 deblocking 配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH265Dblk</td>
<td align="left">H.265 协议编码通道的 Deblocking 配置</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH265Dblk参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-seth265sao">
<h3><span class="section-number">5.8.3.41. </span>HB_VENC_SetH265Sao<a class="headerlink" href="#hb-venc-seth265sao" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetH265Sao</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_H265_SAO_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH265Sao</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 H.265 编码的 SAO 配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH265Sao</td>
<td align="left">H.265 协议编码通道的 Sao 配置</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_SAO_S</span><span class="w"> </span><span class="n">pstH265Sao1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH265Sao1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_SAO_S</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H265</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H265CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstH265Sao1</span><span class="p">.</span><span class="n">sample_adaptive_offset_enabled_flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetH265Sao</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH265Sao1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_H265_SAO_S</span><span class="w"> </span><span class="n">pstH265Sao2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstH265Sao2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_H265_SAO_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetH265Sao</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstH265Sao2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-geth265sao">
<h3><span class="section-number">5.8.3.42. </span>HB_VENC_GetH265Sao<a class="headerlink" href="#hb-venc-geth265sao" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetH265Sao</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_H265_SAO_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstH265Sao</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 H.265 编码的 SAO 配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstH265Sao</td>
<td align="left">H.265 协议编码通道的 Sao 配置</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetH265Sao参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-setintrarefresh">
<h3><span class="section-number">5.8.3.43. </span>HB_VENC_SetIntraRefresh<a class="headerlink" href="#hb-venc-setintrarefresh" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetIntraRefresh</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">HB_VENC_INTRA_REFRESH_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstIntraRefresh</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 P 帧刷 Islice 的设置参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstIntraRefresh</td>
<td align="left">刷 Islice 参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_INTRA_REFRESH_S</span><span class="w"> </span><span class="n">pstIntraRefresh1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstIntraRefresh1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_INTRA_REFRESH_S</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstIntraRefresh1</span><span class="p">.</span><span class="n">bRefreshEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstIntraRefresh1</span><span class="p">.</span><span class="n">enIntraRefreshMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">INTRA_REFRESH_COLUMN</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstIntraRefresh1</span><span class="p">.</span><span class="n">u32RefreshNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetIntraRefresh</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstIntraRefresh1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_INTRA_REFRESH_S</span><span class="w"> </span><span class="n">pstIntraRefresh2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstIntraRefresh2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_INTRA_REFRESH_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetIntraRefresh</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstIntraRefresh2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-getintrarefresh">
<h3><span class="section-number">5.8.3.44. </span>HB_VENC_GetIntraRefresh<a class="headerlink" href="#hb-venc-getintrarefresh" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetIntraRefresh</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_INTRA_REFRESH_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstIntraRefresh</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 P 帧刷 Islice 的参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstIntraRefresh</td>
<td align="left">刷 Islice 参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetIntraRefresh参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-setcuprediction">
<h3><span class="section-number">5.8.3.45. </span>HB_VENC_SetCuPrediction<a class="headerlink" href="#hb-venc-setcuprediction" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetCuPrediction</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_CU_PREDICTION_S</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pstCuPrediction</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置 CU 模式的倾向性。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstCuPrediction</td>
<td align="left">CU 模式选择的倾向性参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CU_PREDICTION_S</span><span class="w"> </span><span class="n">pstCuPrediction1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstCuPrediction1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CU_PREDICTION_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H265</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H265CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH265Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstCuPrediction1</span><span class="p">.</span><span class="n">mode_decision_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstCuPrediction1</span><span class="p">.</span><span class="n">pu04_delta_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstCuPrediction1</span><span class="p">.</span><span class="n">cu32_merge_delta_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_SetCuPrediction</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstCuPrediction1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CU_PREDICTION_S</span><span class="w"> </span><span class="n">pstCuPrediction2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstCuPrediction2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CU_PREDICTION_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetCuPrediction</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstCuPrediction2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-getcuprediction">
<h3><span class="section-number">5.8.3.46. </span>HB_VENC_GetCuPrediction<a class="headerlink" href="#hb-venc-getcuprediction" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetCuPrediction</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_CU_PREDICTION_S</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pstCuPrediction</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取 CU 模式的倾向性配置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstCuPrediction</td>
<td align="left">CU 模式选择的倾向性参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetCuPrediction参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-setjpegparam">
<h3><span class="section-number">5.8.3.47. </span>HB_VENC_SetJpegParam<a class="headerlink" href="#hb-venc-setjpegparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetJpegParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_JPEG_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pstJpegParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置JPEG协议编码通道的高级参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstJpegParam</td>
<td align="left">编码通道属性指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetJpegParam参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-getjpegparam">
<h3><span class="section-number">5.8.3.48. </span>HB_VENC_GetJpegParam<a class="headerlink" href="#hb-venc-getjpegparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetJpegParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_JPEG_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pstJpegParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取JPEG协议编码通道的高级参数设置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstJpegParam</td>
<td align="left">编码通道属性指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetJpegParam参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-setmjpegparam">
<h3><span class="section-number">5.8.3.49. </span>HB_VENC_SetMjpegParam<a class="headerlink" href="#hb-venc-setmjpegparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_SetJpegParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_MJPEG_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pstMjpegParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置MJPEG协议编码通道的高级参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstMjpegParam</td>
<td align="left">编码通道属性指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_JPEG_PARAM_S</span><span class="w"> </span><span class="n">pstJpegParam</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_MJPEG_PARAM_S</span><span class="w"> </span><span class="n">pstMjpegParam</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstJpegParam</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_JPEG_PARAM_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstMjpegParam</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_MJPEG_PARAM_S</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m0_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m0_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_JPEG</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enPixelFormat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pixFmt</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32BitStreamBufferCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32FrameBufferCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">bExternalFreamBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrJpeg</span><span class="p">.</span><span class="n">dcf_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrJpeg</span><span class="p">.</span><span class="n">quality_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrJpeg</span><span class="p">.</span><span class="n">restart_interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m0_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32BitStreamBufSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4096</span><span class="o">*</span><span class="mi">1096</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m1_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m1_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_MJPEG</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enPixelFormat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pixFmt</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32BitStreamBufferCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32FrameBufferCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">bExternalFreamBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_TRUE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrJpeg</span><span class="p">.</span><span class="n">dcf_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrJpeg</span><span class="p">.</span><span class="n">quality_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrJpeg</span><span class="p">.</span><span class="n">restart_interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m1_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32BitStreamBufSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4096</span><span class="o">*</span><span class="mi">1096</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m0_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m1_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetJpegParam</span><span class="p">(</span><span class="n">VeChn0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstJpegParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_GetJpegParam</span><span class="p">(</span><span class="n">VeChn0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstJpegParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetMjpegParam</span><span class="p">(</span><span class="n">VeChn1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstMjpegParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_GetMjpegParam</span><span class="p">(</span><span class="n">VeChn1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pstMjpegParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn1</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-getmjpegparam">
<h3><span class="section-number">5.8.3.50. </span>HB_VENC_GetMjpegParam<a class="headerlink" href="#hb-venc-getmjpegparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">HB_VENC_GetMjpegParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_MJPEG_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pstMjpegParam</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取MJPEG协议编码通道的高级参数设置。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstMjpegParam</td>
<td align="left">编码通道属性指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_SetMjpegParam参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-getfd">
<h3><span class="section-number">5.8.3.51. </span>HB_VENC_GetFd<a class="headerlink" href="#hb-venc-getfd" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_GetFd</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="o">*</span><span class="n">fd</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取编码通道对应的设备文件句柄。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">fd</td>
<td align="left">返回编码通道文件句柄</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1920</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Test_fd1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">Test_fd2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">VENC_CU_PREDICTION_S</span><span class="w"> </span><span class="n">pstCuPrediction1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pstCuPrediction1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CU_PREDICTION_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_CHN_ATTR_S</span><span class="w"> </span><span class="n">m_VencChnAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">VENC_CHN_ATTR_S</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_H264</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">u32PicHeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enMirrorFlip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DIRECTION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">enRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CODEC_ROTATION_0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stCropCfg</span><span class="p">.</span><span class="n">bEnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_FALSE</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stVencAttr</span><span class="p">.</span><span class="n">stAttrH264</span><span class="p">.</span><span class="n">h264_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">u32GopPresetIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stGopAttr</span><span class="p">.</span><span class="n">s32DecodingRefreshType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">.</span><span class="n">enRcMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstRcParam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">m_VencChnAttr</span><span class="p">.</span><span class="n">stRcAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetRcParam</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">pstRcParam</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32BitRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32FrameRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32IntraPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pstRcParam</span><span class="o">-&gt;</span><span class="n">stH264Cbr</span><span class="p">.</span><span class="n">u32VbvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CreateChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_VENC_SetChnAttr</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_VencChnAttr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetFd</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Test_fd1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_GetFd</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Test_fd2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CloseFd</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">Test_fd1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_CloseFd</span><span class="p">(</span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">Test_fd2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">s32Ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HB_VENC_DestroyChn</span><span class="p">(</span><span class="n">VeChn</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-closefd">
<h3><span class="section-number">5.8.3.52. </span>HB_VENC_CloseFd<a class="headerlink" href="#hb-venc-closefd" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_GetFd</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">fd</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>关闭编码通道对应的设备文件句柄。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">fd</td>
<td align="left">输入编码通道文件句柄</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>HB_VENC_GetFd参考代码</p>
</div></blockquote>
</section>
<section id="hb-venc-querystatus">
<h3><span class="section-number">5.8.3.53. </span>HB_VENC_QueryStatus<a class="headerlink" href="#hb-venc-querystatus" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_QueryStatus</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">VENC_CHN_STATUS_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstStatus</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取编码通道状态。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstStatus</td>
<td align="left">编码通道的状态指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-inseruserdata">
<h3><span class="section-number">5.8.3.54. </span>HB_VENC_InserUserData<a class="headerlink" href="#hb-venc-inseruserdata" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_InserUserData</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">pu8Data</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Len</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>编码通道插入用户数据。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pu8Data</td>
<td align="left">用户数据指针</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">u32Len</td>
<td align="left">用户数据长度</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-setchnparam">
<h3><span class="section-number">5.8.3.55. </span>HB_VENC_SetChnParam<a class="headerlink" href="#hb-venc-setchnparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_SetChnParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_CHN_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstChnParam</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置编码通道帧率控制参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstChnParam</td>
<td align="left">帧率控制参数</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
</section>
<section id="hb-venc-getchnparam">
<h3><span class="section-number">5.8.3.56. </span>HB_VENC_GetChnParam<a class="headerlink" href="#hb-venc-getchnparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_GetChnParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_CHN_PARAM_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstChnParam</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取编码通道帧率控制参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstChnParam</td>
<td align="left">帧率控制参数</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
</section>
<section id="hb-venc-setmodparam">
<h3><span class="section-number">5.8.3.57. </span>HB_VENC_SetModParam<a class="headerlink" href="#hb-venc-setmodparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_SetModParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">VENC_PARAM_MOD_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstModParam</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置编码通道VPS、SPS、PPS、IDR是否一帧输出。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstModParam</td>
<td align="left">ModParam指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-getmodparam">
<h3><span class="section-number">5.8.3.58. </span>HB_VENC_GetModParam<a class="headerlink" href="#hb-venc-getmodparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_GetModParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_PARAM_MOD_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstModParam</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取编码通道VPS、SPS、PPS、IDR是否一帧输出。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstModParam</td>
<td align="left">ModParam指针</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-sendframeex">
<h3><span class="section-number">5.8.3.59. </span>HB_VENC_SendFrameEx<a class="headerlink" href="#hb-venc-sendframeex" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_SendFrameEx</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">USER_FRAME_INFO_S</span><span class="w"> </span><span class="o">*</span><span class="n">pstFrame</span><span class="p">,</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32MilliSec</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>用户发送原始图像及该图的QpMap表进行编码。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">pstFrame</td>
<td align="left">原始图像信息结构指针。</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">s32MilliSec</td>
<td align="left">超时时间</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-setaverageqp">
<h3><span class="section-number">5.8.3.60. </span>HB_VENC_SetAverageQp<a class="headerlink" href="#hb-venc-setaverageqp" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_SetAverageQp</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">averageQp</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置相对Qpmap averageQp。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">averageQp</td>
<td align="left">相对QPMAP averageqp</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-getaverageqp">
<h3><span class="section-number">5.8.3.61. </span>HB_VENC_GetAverageQp<a class="headerlink" href="#hb-venc-getaverageqp" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_GetAverageQp</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">averageQp</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取相对Qpmap averageQp。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">averageQp</td>
<td align="left">相对QPMAP averageqp</td>
<td align="center">输出</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-set3dnrparam">
<h3><span class="section-number">5.8.3.62. </span>HB_VENC_Set3DNRParam<a class="headerlink" href="#hb-venc-set3dnrparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_Set3DNRParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_3DNR_PARAMS</span><span class="w"> </span><span class="o">*</span><span class="n">param</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>设置H265 3DNR 参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">param</td>
<td align="left">3DNR 参数指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
<section id="hb-venc-get3dnrparam">
<h3><span class="section-number">5.8.3.63. </span>HB_VENC_Get3DNRParam<a class="headerlink" href="#hb-venc-get3dnrparam" title="永久链接至标题"></a></h3>
<p>【函数声明】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">HB_VENC_Get3DNRParam</span><span class="p">(</span><span class="n">VENC_CHN</span><span class="w"> </span><span class="n">VeChn</span><span class="p">,</span><span class="w"> </span><span class="n">VENC_3DNR_PARAMS</span><span class="w"> </span><span class="o">*</span><span class="n">param</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>【功能描述】</p>
<blockquote>
<div><p>获取H265 3DNR 参数。</p>
</div></blockquote>
<p>【参数描述】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">描述</th>
<th align="center">输入/输出</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VeChn</td>
<td align="left">编码通道号。<br/>取值范围：[0, VENC_MAX_CHN_NUM)</td>
<td align="center">输入</td>
</tr>
<tr>
<td align="center">param</td>
<td align="left">3DNR 参数指针</td>
<td align="center">输入</td>
</tr>
</tbody>
</table><p>【返回值】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="left">成功</td>
</tr>
<tr>
<td align="center">非0</td>
<td align="left">失败，参见错误码。</td>
</tr>
</tbody>
</table><p>【注意事项】</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>【参考代码】</p>
</section>
</section>
<section id="id9">
<h2><span class="section-number">5.8.4. </span>数据结构<a class="headerlink" href="#id9" title="永久链接至标题"></a></h2>
<p>结构中不可动态调整变量，需要在HB_VENC_SetChnAttr前设置，可动态设置变量可以随时设置。</p>
<section id="hb-pixel-format-e">
<h3><span class="section-number">5.8.4.1. </span>HB_PIXEL_FORMAT_E<a class="headerlink" href="#hb-pixel-format-e" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码器输入图像类型枚举。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_PIXEL_FORMAT_E</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_NONE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_YUV420P</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_NV12</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_NV21</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_YUV422P</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_NV16</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_NV61</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_YUYV422</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_YVYU422</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_UYVY422</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_VYUY422</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_YUV444</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_YUV444P</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_NV24</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_NV42</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_YUV440P</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_YUV400</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_PIXEL_FORMAT_TOTAL</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">PIXEL_FORMAT_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="payload-type-e">
<h3><span class="section-number">5.8.4.2. </span>PAYLOAD_TYPE_E<a class="headerlink" href="#payload-type-e" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码器类型枚举。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_PCMU</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_1016</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G721</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_GSM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G723</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_DVI4_8K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_DVI4_16K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_LPC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_PCMA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G722</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_S16BE_STEREO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_S16BE_MONO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_QCELP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_CN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MPEGAUDIO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G728</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_DVI4_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_DVI4_4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G729</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G711A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G711U</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G726</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_G729A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_LPCM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_CelB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_JPEG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_CUSM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_NV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_PICW</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_CPV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_H261</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MPEGVIDEO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MPEG2TS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_H263</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_SPEG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MPEG2VIDEO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_AAC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_WMA9STD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_HEAAC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_PCM_VOICE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_PCM_AUDIO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">41</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_AACLC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MP3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_ADPCMA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_AEC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_X_LD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_H264</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">96</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_GSM_HR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_GSM_EFR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_L8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_RED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_VDVI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_BT656</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_H263_1998</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">221</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_MP1S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">222</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_MP2P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_BMPEG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">224</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MP4VIDEO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">230</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MP4AUDIO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">237</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_VC1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">238</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_JVC_ASF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_D_AVI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_DIVX3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">257</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_AVS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">258</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_REAL8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">259</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_REAL9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_VP6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">261</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_VP6F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">262</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_VP6A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">263</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_SORENSON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">264</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_H265</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">265</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MAX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">266</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_AMR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_MJPEG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1002</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_AMRWB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1003</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">PT_BUTT</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">PAYLOAD_TYPE_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
</section>
<section id="hb-rotation-e">
<h3><span class="section-number">5.8.4.3. </span>HB_ROTATION_E<a class="headerlink" href="#hb-rotation-e" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义旋转角度枚举。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_CODEC_ROTATION_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">CODEC_ROTATION_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">CODEC_ROTATION_90</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">CODEC_ROTATION_180</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">CODEC_ROTATION_270</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">ROTATION_BUTT</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">CODEC_ROTATION_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">CODEC_ROTATION_0</td>
<td align="center">不旋转，旋转 0 度。</td>
</tr>
<tr>
<td align="center">CODEC_ROTATION_90</td>
<td align="center">旋转90度。</td>
</tr>
<tr>
<td align="center">CODEC_ROTATION_180</td>
<td align="center">旋转180度。</td>
</tr>
<tr>
<td align="center">CODEC_ROTATION_270</td>
<td align="center">旋转270度。</td>
</tr>
</tbody>
</table></section>
<section id="mirror-flip-e">
<h3><span class="section-number">5.8.4.4. </span>MIRROR_FLIP_E<a class="headerlink" href="#mirror-flip-e" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义镜像方式枚举。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_MIRROR_FLIP_E</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">DIRECTION_NONE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VERTICAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HORIZONTAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">HOR_VER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">DIRECTION_BUTT</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">MIRROR_FLIP_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">DIRECTION_NONE</td>
<td align="center">不进行镜像操作</td>
</tr>
<tr>
<td align="center">HORIZONTAL</td>
<td align="center">沿着水平方向镜像操作</td>
</tr>
<tr>
<td align="center">VERTICAL</td>
<td align="center">沿着垂直方向镜像操作</td>
</tr>
<tr>
<td align="center">HOR_VER</td>
<td align="center">沿着水平和垂直方向同时镜像操作</td>
</tr>
</tbody>
</table></section>
<section id="hb-venc-h264-profile-e">
<h3><span class="section-number">5.8.4.5. </span>HB_VENC_H264_PROFILE_E<a class="headerlink" href="#hb-venc-h264-profile-e" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H264 profile枚举。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_VENC_H264_PROFILE_E</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_PROFILE_UNSPECIFIED</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_PROFILE_BP</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_PROFILE_MP</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_PROFILE_EXTENDED</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_PROFILE_HP</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_PROFILE_HIGH10</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_PROFILE_HIGH422</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_PROFILE_HIGHT444</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_PROFILE_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-h264-level">
<h3><span class="section-number">5.8.4.6. </span>HB_VENC_H264_LEVEL<a class="headerlink" href="#hb-venc-h264-level" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H264级别枚举。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_VENC_H264_LEVEL</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL_UNSPECIFIED</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL1b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL1_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL1_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL1_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL2_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL2_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL3_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL3_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL4_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">41</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL4_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL5_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">51</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H264_LEVEL5_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">52</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">HB_H264_LEVEL_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hb-venc-h265-level">
<h3><span class="section-number">5.8.4.7. </span>HB_VENC_H265_LEVEL<a class="headerlink" href="#hb-venc-h265-level" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H265 级别枚举。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_VENC_H265_LEVEL</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL_UNSPECIFIED</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL2_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">63</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL3_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">93</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL4_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL5_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">153</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">HB_H265_LEVEL_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="codec-rect-s">
<h3><span class="section-number">5.8.4.8. </span>CODEC_RECT_S<a class="headerlink" href="#codec-rect-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义矩形区域信息结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_CODEC_RECT_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32X</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32Y</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Height</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">CODEC_RECT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">s32X</td>
<td align="center">横坐标</td>
</tr>
<tr>
<td align="center">s32Y</td>
<td align="center">纵坐标</td>
</tr>
<tr>
<td align="center">u32Width</td>
<td align="center">宽度</td>
</tr>
<tr>
<td align="center">u32Height</td>
<td align="center">高度</td>
</tr>
</tbody>
</table></section>
<section id="venc-attr-h264-s">
<h3><span class="section-number">5.8.4.9. </span>VENC_ATTR_H264_S<a class="headerlink" href="#venc-attr-h264-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 编码属性结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_ATTR_H264_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_H264_PROFILE_E</span><span class="w"> </span><span class="n">h264_profile</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_H264_LEVEL_E</span><span class="w"> </span><span class="n">h264_level</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_ATTR_H264_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">h264_profile</td>
<td align="center">H264 profile，不可动态配置。</td>
</tr>
<tr>
<td align="center">h264_level</td>
<td align="center">H264 level，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-attr-h265-s">
<h3><span class="section-number">5.8.4.10. </span>VENC_ATTR_H265_S<a class="headerlink" href="#venc-attr-h265-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 编码属性结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_ATTR_H265_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">main_still_picture_profile_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32h265_tier</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">transform_skip_enabled_flag</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">lossless_mode</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">tmvp_Enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">wpp_Enable</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_H265_LEVEL_E</span><span class="w"> </span><span class="n">h265_level</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_ATTR_H265_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">main_still_picture_profile_enable</td>
<td align="center">使能H265 main still picture profile，不可动态配置。</td>
</tr>
<tr>
<td align="center">s32h265_tier</td>
<td align="center">设置H265 tier信息，不可动态配置。</td>
</tr>
<tr>
<td align="center">transform_skip_enabled_flag</td>
<td align="center">是否使能 transform skip for intra CU，不可动态配置。</td>
</tr>
<tr>
<td align="center">lossless_mode</td>
<td align="center">开启无损编码模式，不可动态配置。</td>
</tr>
<tr>
<td align="center">tmvp_Enable</td>
<td align="center">使能temporal motion vector prediction，不可动态配置。</td>
</tr>
<tr>
<td align="center">wpp_Enable</td>
<td align="center">使能wpp，不可动态配置。</td>
</tr>
<tr>
<td align="center">h265_level</td>
<td align="center">H265 级别，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-attr-mjpeg-s">
<h3><span class="section-number">5.8.4.11. </span>VENC_ATTR_MJPEG_S<a class="headerlink" href="#venc-attr-mjpeg-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 MJPEG 编码属性结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_ATTR_MJPEG_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">restart_interval</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">huff_table_valid</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_luma_dc_bits</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_luma_dc_val</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_luma_ac_bits</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_luma_ac_val</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_chroma_dc_bits</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_chroma_ac_bits</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_chroma_dc_val</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_chroma_ac_val</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">extended_sequential</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_ATTR_MJPEG_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">restart_interval</td>
<td align="center">指定在一个独立的扫描序列中包含的MCU的个数，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_table_valid</td>
<td align="center">是否使能huffman表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_luma_dc_bits</td>
<td align="center">uffman 亮度DC bit length 表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_luma_dc_val</td>
<td align="center">Huffman 亮度DC huffvalue表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_luma_ac_bits</td>
<td align="center">Huffman 亮度AC bit length 表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_luma_ac_val</td>
<td align="center">Huffman 亮度AC huffvalue表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_chroma_dc_bits</td>
<td align="center">Huffman 色度DC bit length 表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_chroma_ac_bits</td>
<td align="center">Huffman 色度AC bit length表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_chroma_dc_val</td>
<td align="center">Huffman 亮度DC huffvalue表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_chroma_ac_val</td>
<td align="center">Huffman 亮度AC huffvalue表，不可动态配置。</td>
</tr>
<tr>
<td align="center">extended_sequential</td>
<td align="center">12 bit 模式，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-attr-jpeg-s">
<h3><span class="section-number">5.8.4.12. </span>VENC_ATTR_JPEG_S<a class="headerlink" href="#venc-attr-jpeg-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 JPEG 编码属性结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_ATTR_JPEG_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">dcf_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">restart_interval</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">quality_factor</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">huff_table_valid</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_luma_dc_bits</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_luma_dc_val</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_luma_ac_bits</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_luma_ac_val</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_chroma_dc_bits</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_chroma_ac_bits</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_chroma_dc_val</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">huff_chroma_ac_val</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<span class="w">	</span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">extended_sequential</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_ATTR_JPEG_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">dcf_enable</td>
<td align="center">是否使能dcf，不可动态配置。</td>
</tr>
<tr>
<td align="center">restart_interval</td>
<td align="center">指定在一个独立的扫描序列中包含的MCU的个数，不可动态配置。</td>
</tr>
<tr>
<td align="center">quality_factor</td>
<td align="center">质量系数，该值越大，压缩率越低，编码质量损失越小，可动态配置。</td>
</tr>
<tr>
<td align="center">huff_table_valid</td>
<td align="center">是否使能huffman表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_luma_dc_bits</td>
<td align="center">uffman 亮度DC bit length 表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_luma_dc_val</td>
<td align="center">Huffman 亮度DC huffvalue表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_luma_ac_bits</td>
<td align="center">Huffman 亮度AC bit length 表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_luma_ac_val</td>
<td align="center">Huffman 亮度AC huffvalue表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_chroma_dc_bits</td>
<td align="center">Huffman 色度DC bit length 表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_chroma_ac_bits</td>
<td align="center">Huffman 色度AC bit length表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_chroma_dc_val</td>
<td align="center">Huffman 亮度DC huffvalue表，不可动态配置。</td>
</tr>
<tr>
<td align="center">huff_chroma_ac_val</td>
<td align="center">Huffman 亮度AC huffvalue表，不可动态配置。</td>
</tr>
<tr>
<td align="center">extended_sequential</td>
<td align="center">12 bit 模式，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-attr-s">
<h3><span class="section-number">5.8.4.13. </span>VENC_ATTR_S<a class="headerlink" href="#venc-attr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码器属性结构体</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">PAYLOAD_TYPE_E</span><span class="w"> </span><span class="n">enType</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32PicWidth</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32PicHeight</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">PIXEL_FORMAT_E</span><span class="w"> </span><span class="n">enPixelFormat</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameBufferCount</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BitStreamBufferCount</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bExternalFreamBuffer</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BitStreamBufSize</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">CODEC_ROTATION_E</span><span class="w"> </span><span class="n">enRotation</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">MIRROR_FLIP_E</span><span class="w"> </span><span class="n">enMirrorFlip</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VIDEO_CROP_INFO_S</span><span class="w"> </span><span class="n">stCropCfg</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bEnableUserPts</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">vlc_buf_size</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32BufJoint</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32BufJointSize</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">union</span> <span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_ATTR_H264_S</span><span class="w"> </span><span class="n">stAttrH264</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_ATTR_H265_S</span><span class="w"> </span><span class="n">stAttrH265</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_ATTR_MJPEG_S</span><span class="w"> </span><span class="n">stAttrMjpeg</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_ATTR_JPEG_S</span><span class="w"> </span><span class="n">stAttrJpeg</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">enType</td>
<td align="center">编码协议类型，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32PicWidth</td>
<td align="center">编码图像宽度，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32PicHeight</td>
<td align="center">编码图像高度，不可动态配置。</td>
</tr>
<tr>
<td align="center">enPixelFormat</td>
<td align="center">像素格式，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameBufferCount</td>
<td align="center">输入的Framebuffer缓存的个数，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32BitStreamBufferCount;</td>
<td align="center">输出的bitstream缓存区个数，不可动态配置。</td>
</tr>
<tr>
<td align="center">HB_BOOL</td>
<td align="center">bExternalFreamBuffer; 使用用户分配的输入buffer，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32BitStreamBufSize</td>
<td align="center">输出的bitstream缓存大小，不可动态配置。</td>
</tr>
<tr>
<td align="center">enRotation</td>
<td align="center">旋转属性，不可动态配置。</td>
</tr>
<tr>
<td align="center">enMirrorFlip</td>
<td align="center">镜像属性，不可动态配置。</td>
</tr>
<tr>
<td align="center">stCropCfg</td>
<td align="center">裁剪配置，不可动态配置。</td>
</tr>
<tr>
<td align="center">bEnableUserPts</td>
<td align="center">是否使用用户pts，不可动态配置。</td>
</tr>
<tr>
<td align="center">vlc_buf_size</td>
<td align="center">设置编码task vlc buffer大小，不可动态配置。</td>
</tr>
<tr>
<td align="center">s32BufJoint</td>
<td align="center">是否使用连续内存缓存多帧，不可动态配置。</td>
</tr>
<tr>
<td align="center">s32BufJointSize</td>
<td align="center">使用连续内存大小，范围4M-50M</td>
</tr>
<tr>
<td align="center">stAttrH264/stAttrMjpeg/<br/>stAttrJpeg/stAttrH265</td>
<td align="center">某种协议的编码器属性，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-rc-mode-e">
<h3><span class="section-number">5.8.4.14. </span>VENC_RC_MODE_E<a class="headerlink" href="#venc-rc-mode-e" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>RC 模式枚举。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_VENC_RC_MODE_E</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_NONE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H264CBR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H264VBR</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H264AVBR</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H264FIXQP</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H264QPMAP</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H265CBR</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H265VBR</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H265AVBR</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H265FIXQP</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_H265QPMAP</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_MJPEGFIXQP</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_BUTT</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_RC_MODE_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">VENC_RC_MODE_H264CBR</td>
<td align="center">H264 CBR方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H264VBR</td>
<td align="center">H264 VBR方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H264AVBR</td>
<td align="center">H264 AVBR方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H264FIXQP</td>
<td align="center">H264 Fixqp方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H264QPMAP</td>
<td align="center">H.264 QPMAP 方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_MJPEGFIXQP</td>
<td align="center">MJPEG Fixqp 方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H265CBR</td>
<td align="center">H265 CBR方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H265VBR</td>
<td align="center">H265 VBR方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H265AVBR</td>
<td align="center">H265 VBR方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H265FIXQP</td>
<td align="center">H265 Fixqp方式。</td>
</tr>
<tr>
<td align="center">VENC_RC_MODE_H265QPMAP</td>
<td align="center">H265 QPMAP方式。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-cbr-s">
<h3><span class="section-number">5.8.4.15. </span>VENC_H264_CBR_S<a class="headerlink" href="#venc-h264-cbr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 编码通道 CBR 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_CBR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BitRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32InitialRcQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32VbvBufferSize</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bMbLevelRcEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxIQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinIQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxPQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinPQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxBQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinBQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bHvsQpEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32HvsQpScale</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxDeltaQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bQpMapEnable</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_CBR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32IntraQp</td>
<td align="center">I帧的QP值，可动态配置，值越小反应的图像质量越好。</td>
</tr>
<tr>
<td align="center">u32BitRate</td>
<td align="center">目标平均比特率，单位是kbps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32InitialRcQp</td>
<td align="center">指定码率控制时的初始QP值，当该值不在[0,51]范围内,编码器内部会决定初始值，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32VbvBufferSize</td>
<td align="center">实际的VBV buffer的空间大小为bit_rate * vbv_buffer_size / 1000（kb），该buffer的大小会影响编码图像质量和码率控制精度。当该buffer比较小时，码率控制精确度高，但图像编码质量较差；当该buffer比较大时，图像编码质量高，但是码率波动大。可动态配置。</td>
</tr>
<tr>
<td align="center">bMbLevelRcEnable</td>
<td align="center">H264的码率控制可以工作在宏块级别的控制，该模式可以达到更高精度的码率控制，但是会损失编码图像质量，该模式不可以和ROI编码一起工作，当使能ROI编码时，该功能自动失效。不可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxIQp</td>
<td align="center">I帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinIQp</td>
<td align="center">I帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxPQp</td>
<td align="center">P帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinPQp</td>
<td align="center">P帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxBQp</td>
<td align="center">B帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinBQp</td>
<td align="center">B帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">bHvsQpEnable</td>
<td align="center">H264的码率控制可以工作在子宏块级别的控制，该模式会调整子宏块的QP值，进而提高主观图像质量。可动态配置。</td>
</tr>
<tr>
<td align="center">s32HvsQpScale</td>
<td align="center">当hvs_qp_enable使能后有效，该值表示QP缩放因子。可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxDeltaQp</td>
<td align="center">当hvs_qp_enable使能后有效，指定HVS qp值的最大偏差范围。可动态配置。</td>
</tr>
<tr>
<td align="center">bQpMapEnable</td>
<td align="center">是否使能Qp map，可动态配置。</td>
</tr>
</tbody>
</table><p>注意：rc模块会计算码率，小于设置的码率，会调小qp值，如果qp小于qpmin，就调整不了，导致图像达不到预期；大于设置的码率，会调大qp值，如果qp大于qpmax，调整不了，码率会一直大于设置的码率，达不到设置的码率。</p>
</section>
<section id="venc-h264-vbr-s">
<h3><span class="section-number">5.8.4.16. </span>VENC_H264_VBR_S<a class="headerlink" href="#venc-h264-vbr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 编码通道 VBR 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_VBR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bQpMapEnable</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_VBR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32IntraQp</td>
<td align="center">I帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">帧率，可动态配置。</td>
</tr>
<tr>
<td align="center">bQpMapEnable</td>
<td align="center">是否使能Qp map，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-avbr-s">
<h3><span class="section-number">5.8.4.17. </span>VENC_H264_AVBR_S<a class="headerlink" href="#venc-h264-avbr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 编码通道 AVBR 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_AVBR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BitRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32InitialRcQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32VbvBufferSize</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bMbLevelRcEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxIQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinIQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxPQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinPQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxBQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinBQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bHvsQpEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32HvsQpScale</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxDeltaQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bQpMapEnable</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_AVBR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32IntraQp</td>
<td align="center">I帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32BitRate</td>
<td align="center">目标平均比特率，单位是kbps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32InitialRcQp</td>
<td align="center">指定码率控制时的初始QP值，当该值不在[0,51]范围内,编码器内部会决定初始值，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32VbvBufferSize</td>
<td align="center">实际的VBV buffer的空间大小为bit_rate * vbv_buffer_size / 1000（kb），该buffer的大小会影响编码图像质量和码率控制精度。当该buffer比较小时，码率控制精确度高，但图像编码质量较差；当该buffer比较大时，图像编码质量高，但是码率波动大，可动态配置。</td>
</tr>
<tr>
<td align="center">bMbLevelRcEnable</td>
<td align="center">H264的码率控制可以工作在宏块级别的控制，该模式可以达到更高精度的码率控制，但是会损失编码图像质量，该模式不可以和ROI编码一起工作，当使能ROI编码时，该功能自动失效。不可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxIQp</td>
<td align="center">I帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinIQp</td>
<td align="center">I帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxPQp</td>
<td align="center">P帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinPQp</td>
<td align="center">P帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxBQp</td>
<td align="center">B帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinBQp</td>
<td align="center">B帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">bHvsQpEnable</td>
<td align="center">H264的码率控制可以工作在子宏块级别的控制，该模式会调整子宏块的QP值，进而提高主观图像质量，可动态配置。</td>
</tr>
<tr>
<td align="center">s32HvsQpScale</td>
<td align="center">当hvs_qp_enable使能后有效，该值表示QP缩放因子，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxDeltaQp</td>
<td align="center">当hvs_qp_enable使能后有效，指定HVS qp值的最大偏差范围，可动态配置。</td>
</tr>
<tr>
<td align="center">bQpMapEnable</td>
<td align="center">是否使能Qp map，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-fixqp-s">
<h3><span class="section-number">5.8.4.18. </span>VENC_H264_FIXQP_S<a class="headerlink" href="#venc-h264-fixqp-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 编码通道 FIXQP 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_FIXQP_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32PQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BQp</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_FIXQP_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32IQp</td>
<td align="center">强制I帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32PQp</td>
<td align="center">强制P帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32BQp</td>
<td align="center">强制B帧的QP值，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-qpmap-s">
<h3><span class="section-number">5.8.4.19. </span>VENC_H264_QPMAP_S<a class="headerlink" href="#venc-h264-qpmap-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 编码通道 QPMAP 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_QPMAP_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w">  </span><span class="n">u32QpMapArray</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32QpMapArrayCount</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_QPMAP_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32QpMapArray</td>
<td align="center">指定QP map表，H264的宏块大小为16x16，需要为每一个宏块指定一个QP值，每个QP值占一个字节，并且按照光栅扫描方向排序，可动态配置。</td>
</tr>
<tr>
<td align="center">u32QpMapArrayCount</td>
<td align="center">指定QP map表的大小，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-cbr-s">
<h3><span class="section-number">5.8.4.20. </span>VENC_H265_CBR_S<a class="headerlink" href="#venc-h265-cbr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 编码通道 CBR 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_CBR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BitRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32InitialRcQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32VbvBufferSize</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bCtuLevelRcEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxIQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinIQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxPQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinPQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxBQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinBQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bHvsQpEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32HvsQpScale</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxDeltaQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bQpMapEnable</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_CBR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32IntraQp</td>
<td align="center">I帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32BitRate</td>
<td align="center">目标平均比特率，单位是kbps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32InitialRcQp</td>
<td align="center">指定码率控制时的初始QP值，当该值不在[0,51]范围内,编码器内部会决定初始值，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32VbvBufferSize</td>
<td align="center">实际的VBV buffer的空间大小为bit_rate * vbv_buffer_size / 1000（kb），该buffer的大小会影响编码图像质量和码率控制精度。当该buffer比较小时，码率控制精确度高，但图像编码质量较差；当该buffer比较大时，图像编码质量高，但是码率波动大，可动态配置。</td>
</tr>
<tr>
<td align="center">bMbLevelRcEnable</td>
<td align="center">H264的码率控制可以工作在宏块级别的控制，该模式可以达到更高精度的码率控制，但是会损失编码图像质量，该模式不可以和ROI编码一起工作，当使能ROI编码时，该功能自动失效，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxIQp</td>
<td align="center">I帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinIQp</td>
<td align="center">I帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxPQp</td>
<td align="center">P帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinPQp</td>
<td align="center">P帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxBQp</td>
<td align="center">B帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinBQp</td>
<td align="center">B帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">bHvsQpEnable</td>
<td align="center">H264的码率控制可以工作在子宏块级别的控制，该模式会调整子宏块的QP值，进而提高主观图像质量，可动态配置。</td>
</tr>
<tr>
<td align="center">s32HvsQpScale</td>
<td align="center">当hvs_qp_enable使能后有效，该值表示QP缩放因子，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxDeltaQp</td>
<td align="center">当hvs_qp_enable使能后有效，指定HVS qp值的最大偏差范围，可动态配置。</td>
</tr>
<tr>
<td align="center">bQpMapEnable</td>
<td align="center">是否使能Qp map，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-vbr-s">
<h3><span class="section-number">5.8.4.21. </span>VENC_H265_VBR_S<a class="headerlink" href="#venc-h265-vbr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 编码通道 VBR 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_VBR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bQpMapEnable</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_VBR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32IntraQp</td>
<td align="center">I帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">帧率，可动态配置。</td>
</tr>
<tr>
<td align="center">bQpMapEnable</td>
<td align="center">是否使能Qp map，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-avbr-s">
<h3><span class="section-number">5.8.4.22. </span>VENC_H265_AVBR_S<a class="headerlink" href="#venc-h265-avbr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 编码通道 AVBR 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_AVBR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BitRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32InitialRcQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32VbvBufferSize</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bCtuLevelRcEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxIQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinIQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxPQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinPQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxBQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MinBQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bHvsQpEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32HvsQpScale</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32MaxDeltaQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bQpMapEnable</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_AVBR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32IntraQp</td>
<td align="center">I帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32BitRate</td>
<td align="center">目标平均比特率，单位是kbps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32InitialRcQp</td>
<td align="center">指定码率控制时的初始QP值，当该值不在[0,51]范围内,编码器内部会决定初始值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32VbvBufferSize</td>
<td align="center">实际的VBV buffer的空间大小为bit_rate * vbv_buffer_size / 1000（kb），该buffer的大小会影响编码图像质量和码率控制精度。当该buffer比较小时，码率控制精确度高，但图像编码质量较差；当该buffer比较大时，图像编码质量高，但是码率波动大，可动态配置。</td>
</tr>
<tr>
<td align="center">bMbLevelRcEnable</td>
<td align="center">H264的码率控制可以工作在宏块级别的控制，该模式可以达到更高精度的码率控制，但是会损失编码图像质量，该模式不可以和ROI编码一起工作，当使能ROI编码时，该功能自动失效，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxIQp</td>
<td align="center">I帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinIQp</td>
<td align="center">I帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxPQp</td>
<td align="center">P帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinPQp</td>
<td align="center">P帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxBQp</td>
<td align="center">B帧的最大QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MinBQp</td>
<td align="center">B帧的最小QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">bHvsQpEnable</td>
<td align="center">H264的码率控制可以工作在子宏块级别的控制，该模式会调整子宏块的QP值，进而提高主观图像质量，可动态配置。</td>
</tr>
<tr>
<td align="center">s32HvsQpScale</td>
<td align="center">当hvs_qp_enable使能后有效，该值表示QP缩放因子，可动态配置。</td>
</tr>
<tr>
<td align="center">u32MaxDeltaQp</td>
<td align="center">当hvs_qp_enable使能后有效，指定HVS qp值的最大偏差范围，可动态配置。</td>
</tr>
<tr>
<td align="center">bQpMapEnable</td>
<td align="center">是否使能Qp map，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-fixqp-s">
<h3><span class="section-number">5.8.4.23. </span>VENC_H265_FIXQP_S<a class="headerlink" href="#venc-h265-fixqp-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 编码通道 Fixqp 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_FIXQP_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32PQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32BQp</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_FIXQP_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32IQp</td>
<td align="center">强制I帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32PQp</td>
<td align="center">强制P帧的QP值，可动态配置。</td>
</tr>
<tr>
<td align="center">u32BQp</td>
<td align="center">强制B帧的QP值，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-qpmap-s">
<h3><span class="section-number">5.8.4.24. </span>VENC_H265_QPMAP_S<a class="headerlink" href="#venc-h265-qpmap-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 编码通道 QPMAP 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_QPMAP_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32IntraPeriod</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">u32QpMapArray</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32QpMapArrayCount</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_QPMAP_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32IntraPeriod</td>
<td align="center">I帧间隔，可动态配置。</td>
</tr>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32QpMapArray</td>
<td align="center">指定QP map表，H264的宏块大小为16x16，需要为每一个宏块指定一个QP值，每个QP值占一个字节，并且按照光栅扫描方向排序，可动态配置。</td>
</tr>
<tr>
<td align="center">u32QpMapArrayCount</td>
<td align="center">指定QP map表的大小，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-mjpeg-fixqp-s">
<h3><span class="section-number">5.8.4.25. </span>VENC_MJPEG_FIXQP_S<a class="headerlink" href="#venc-mjpeg-fixqp-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 MJPEG 编码通道 Fixqp 属性结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_MJPEG_FIXQP_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32FrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32QualityFactort</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_MJPEG_FIXQP_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32FrameRate</td>
<td align="center">目标帧率，单位是fps，可动态配置。</td>
</tr>
<tr>
<td align="center">u32QualityFactort</td>
<td align="center">量化因子，当该值为100时，编码的图像质量损失最小但是压缩率很低；当该值为1时，编码的图像质量损失较大，但压缩率高，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-rc-attr-s">
<h3><span class="section-number">5.8.4.26. </span>VENC_RC_ATTR_S<a class="headerlink" href="#venc-rc-attr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码通道码率控制器属性。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_RC_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_MODE_E</span><span class="w"> </span><span class="n">enRcMode</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">union</span> <span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H264_CBR_S</span><span class="w"> </span><span class="n">stH264Cbr</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H264_VBR_S</span><span class="w"> </span><span class="n">stH264Vbr</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H264_AVBR_S</span><span class="w"> </span><span class="n">stH264AVbr</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H264_FIXQP_S</span><span class="w"> </span><span class="n">stH264FixQp</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H264_QPMAP_S</span><span class="w"> </span><span class="n">stH264QpMap</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_MJPEG_FIXQP_S</span><span class="w"> </span><span class="n">stMjpegFixQp</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H265_CBR_S</span><span class="w"> </span><span class="n">stH265Cbr</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H265_VBR_S</span><span class="w"> </span><span class="n">stH265Vbr</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H265_AVBR_S</span><span class="w"> </span><span class="n">stH265AVbr</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H265_FIXQP_S</span><span class="w"> </span><span class="n">stH265FixQp</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VENC_H265_QPMAP_S</span><span class="w"> </span><span class="n">stH265QpMap</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_RC_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">enRcMode</td>
<td align="center">RC 模式，不可动态配置。</td>
</tr>
<tr>
<td align="center">stH264Cbr</td>
<td align="center">H.264 协议编码通道 Cbr 模式属性。</td>
</tr>
<tr>
<td align="center">stH264Vbr</td>
<td align="center">H.264 协议编码通道 Vbr 模式属性。</td>
</tr>
<tr>
<td align="center">stH264AVbr</td>
<td align="center">H.264 协议编码通道 AVbr 模式属性。</td>
</tr>
<tr>
<td align="center">stH264FixQp</td>
<td align="center">H.264 协议编码通道 Fixqp 模式属性。</td>
</tr>
<tr>
<td align="center">stH264QpMap</td>
<td align="center">H.264 协议编码通道 QpMap 模式属性。</td>
</tr>
<tr>
<td align="center">stMjpegFixQp</td>
<td align="center">Mjpeg 协议编码通道 Fixqp 模式属性。</td>
</tr>
<tr>
<td align="center">stH265Cbr</td>
<td align="center">.265 协议编码通道 Cbr 模式属性。</td>
</tr>
<tr>
<td align="center">stH265Vbr</td>
<td align="center">H.265 协议编码通道 Vbr 模式属性。</td>
</tr>
<tr>
<td align="center">stH265AVbr</td>
<td align="center">H.265 协议编码通道 AVbr 模式属性。</td>
</tr>
<tr>
<td align="center">stH265FixQp</td>
<td align="center">H.265 协议编码通道 Fixqp 模式属性。</td>
</tr>
<tr>
<td align="center">stH265QpMap</td>
<td align="center">H.265 协议编码通道 QpMap 模式属性。</td>
</tr>
</tbody>
</table></section>
<section id="venc-gop-picture-custom-s">
<h3><span class="section-number">5.8.4.27. </span>VENC_GOP_PICTURE_CUSTOM_S<a class="headerlink" href="#venc-gop-picture-custom-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义自定义的GOP结构表的数据结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_GOP_PICTURE_CUSTOM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32PictureType</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32PocOffset</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32PictureQp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32NumRefPictureL0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32RefPocL0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32RefPocL1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32TemporalId</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_GOP_PICTURE_CUSTOM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32PictureType</td>
<td align="center">图像的帧类型，不可动态配置。</td>
</tr>
<tr>
<td align="center">s32PocOffset</td>
<td align="center">图像的POC值，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32PictureQp</td>
<td align="center">图像的QP值，不可动态配置。</td>
</tr>
<tr>
<td align="center">s32NumRefPictureL0</td>
<td align="center">当前图像参考的L0的帧数量，只有当pic_type=1时，该值有效，不可动态配置。</td>
</tr>
<tr>
<td align="center">s32RefPocL0</td>
<td align="center">当前图像的L0参考帧的POC值，不可动态配置。</td>
</tr>
<tr>
<td align="center">s32RefPocL1</td>
<td align="center">当pic_type=2，表示当前图像的L1参考帧的POC值；当pic_type=1，表示当前图像的L0参考帧的POC值，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32TemporalId</td>
<td align="center">图像的temporal id，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-gop-custom-s">
<h3><span class="section-number">5.8.4.28. </span>VENC_GOP_CUSTOM_S<a class="headerlink" href="#venc-gop-custom-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义自定义的GOP结构的参数集。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_GOP_CUSTOM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32CustomGopSize</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_GOP_PICTURE_CUSTOM_S</span><span class="w"> </span><span class="n">stCustomGopPicture</span><span class="p">[</span><span class="n">CUSTOM_MAX_GOP_NUM</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_GOP_CUSTOM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32CustomGopSize</td>
<td align="center">自定义的GOP的大小【0，8】，不可动态配置。</td>
</tr>
<tr>
<td align="center">stCustomGopPicture</td>
<td align="center">自定义的GOP结构表数组，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-gop-attr-s">
<h3><span class="section-number">5.8.4.29. </span>VENC_GOP_ATTR_S<a class="headerlink" href="#venc-gop-attr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义GOP参数，用户可选择预置的GOP结构和自定义GOP结构。
【结构定义】</p>
</div></blockquote>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_GOP_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32DecodingRefreshType</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32GopPresetIdx</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_GOP_CUSTOM_S</span><span class="w"> </span><span class="n">stCustomGopParam</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_GOP_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">s32DecodingRefreshType</td>
<td align="center">设置IDR帧的具体类型，该项只对H265 codec有效，不可动态配置。</td>
</tr>
<tr>
<td align="center">u32GopPresetIdx</td>
<td align="center">选择预置的GOP结构，当该值为0时，表示需要自定义GOP结构，不可动态配置。</td>
</tr>
<tr>
<td align="center">stCustomGopParam</td>
<td align="center">自定义的GOP结构，只有当u32GopPresetIdx=0才有效，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-chn-attr-s">
<h3><span class="section-number">5.8.4.30. </span>VENC_CHN_ATTR_S<a class="headerlink" href="#venc-chn-attr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码通道属性结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_CHN_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_ATTR_S</span><span class="w"> </span><span class="n">stVencAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_RC_ATTR_S</span><span class="w"> </span><span class="n">stRcAttr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_GOP_ATTR_S</span><span class="w"> </span><span class="n">stGopAttr</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_CHN_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">stVencAttr</td>
<td align="center">编码器属性。</td>
</tr>
<tr>
<td align="center">stRcAttr</td>
<td align="center">码率控制器属性。</td>
</tr>
<tr>
<td align="center">stGopAttr</td>
<td align="center">Gop Mode 类型的结构体。</td>
</tr>
</tbody>
</table></section>
<section id="venc-jpeg-param-s">
<h3><span class="section-number">5.8.4.31. </span>VENC_JPEG_PARAM_S<a class="headerlink" href="#venc-jpeg-param-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义JPEG协议编码通道高级参数结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_JPEG_PARAM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32Qfactor</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">u8LumaQuantTable</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">u8ChromaQuantTable</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16LumaQuantEsTable</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16ChromaQuantEsTable</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RestartInterval</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VIDEO_CROP_INFO_S</span><span class="w"> </span><span class="n">stCropCfg</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_JPEG_PARAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32Qfactor</td>
<td align="center">具体含义请参考RFC2435协议, 系统默认为90。取值范围: [1, 99]。</td>
</tr>
<tr>
<td align="center">u8LumaQuantTable</td>
<td align="center">8bit Y量化表<br/>取值范围: [0, 255]。</td>
</tr>
<tr>
<td align="center">u8ChromaQuantTable</td>
<td align="center">8bit CbCr量化表<br/>取值范围: [0, 255]。</td>
</tr>
<tr>
<td align="center">u16LumaQuantEsTable</td>
<td align="center">12bit Y量化表<br/>取值范围: [0, 255]。</td>
</tr>
<tr>
<td align="center">u16ChromaQuantEsTable</td>
<td align="center">12bit CbCr量化表<br/>取值范围: [0, 255]。</td>
</tr>
<tr>
<td align="center">u32RestartInterval</td>
<td align="center">u32RestartInterval: [0, (picwidth+15)&gt;&gt;4 x(picheight+15)&gt;&gt;4 x 2]</td>
</tr>
<tr>
<td align="center">stCropCfg</td>
<td align="center">crop配置参数</td>
</tr>
</tbody>
</table></section>
<section id="venc-mjpeg-param-s">
<h3><span class="section-number">5.8.4.32. </span>VENC_MJPEG_PARAM_S<a class="headerlink" href="#venc-mjpeg-param-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义MJPEG协议编码通道高级参数结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_MJPEG_PARAM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">u8LumaQuantTable</span><span class="w"> </span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">u8ChromaQuantTable</span><span class="w"> </span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w">  </span><span class="n">u16LumaQuantEsTable</span><span class="w"> </span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">u16ChromaQuantEsTable</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RestartInterval</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_MJPEG_PARAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u8LumaQuantTable</td>
<td align="center">8bit Y量化表<br/>取值范围: [0, 255]。</td>
</tr>
<tr>
<td align="center">u8ChromaQuantTable</td>
<td align="center">8bit CbCr量化表<br/>取值范围: [0, 255]。</td>
</tr>
<tr>
<td align="center">u16LumaQuantEsTable</td>
<td align="center">12bit Y量化表<br/>取值范围: [0, 255]。</td>
</tr>
<tr>
<td align="center">u16ChromaQuantEsTable</td>
<td align="center">12bit CbCr量化表<br/>取值范围: [0, 255]。</td>
</tr>
<tr>
<td align="center">u32RestartInterval</td>
<td align="center">u32RestartInterval: [0, (picwidth+15)&gt;&gt;4 x(picheight+15)&gt;&gt;4 x 2]</td>
</tr>
</tbody>
</table></section>
<section id="venc-intra-refresh-mode-e">
<h3><span class="section-number">5.8.4.33. </span>VENC_INTRA_REFRESH_MODE_E<a class="headerlink" href="#venc-intra-refresh-mode-e" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>P 帧刷 Islice 模式定义。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">HB_VENC_INTRA_REFRESH_MODE_E</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">INTRA_REFRESH_ROW</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">INTRA_REFRESH_COLUMN</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">INTRA_REFRESH_STEP_SIZE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">INTRA_REFRESH_ADAPTIVE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">INTRA_REFRESH_BUTT</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_INTRA_REFRESH_MODE_E</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">INTRA_REFRESH_ROW</td>
<td align="center">按行刷新</td>
</tr>
<tr>
<td align="center">INTRA_REFRESH_COLUMN</td>
<td align="center">按列刷新</td>
</tr>
<tr>
<td align="center">INTRA_REFRESH_STEP_SIZE</td>
<td align="center">MB/CTU步长</td>
</tr>
<tr>
<td align="center">INTRA_REFRESH_ADAPTIVE</td>
<td align="center">一帧编码多少个帧内MB/CTU</td>
</tr>
</tbody>
</table></section>
<section id="venc-intra-refresh-s">
<h3><span class="section-number">5.8.4.34. </span>VENC_INTRA_REFRESH_S<a class="headerlink" href="#venc-intra-refresh-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>P 帧刷 Islice 控制参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_INTRA_REFRESH_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bRefreshEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_INTRA_REFRESH_MODE_E</span><span class="w"> </span><span class="n">enIntraRefreshMode</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32RefreshNum</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_INTRA_REFRESH_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">bRefreshEnable</td>
<td align="center">是否使能刷 Islice 功能。默认为 0<br/>0：不使能<br/>1：使能</td>
</tr>
<tr>
<td align="center">enIntraRefreshMode</td>
<td align="center">I 宏块刷新模式，分为按行刷新和按列刷新。</td>
</tr>
<tr>
<td align="center">u32RefreshNum</td>
<td align="center">每次 I 宏块刷新行数或者列数</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-entropy-s">
<h3><span class="section-number">5.8.4.35. </span>VENC_H264_ENTROPY_S<a class="headerlink" href="#venc-h264-entropy-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H264熵编码参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_ENTROPY_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32EntropyEncMode</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VENC_H264_ENTROPY_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32EntropyEncMode</td>
<td align="center">熵编码模式，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-dblk-s">
<h3><span class="section-number">5.8.4.36. </span>VENC_H264_DBLK_S<a class="headerlink" href="#venc-h264-dblk-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H264去块滤波参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_DBLK_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">disable_deblocking_filter_idc</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">slice_alpha_c0_offset_div2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">slice_beta_offset_div2</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_DBLK_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">disable_deblocking_filter_idc</td>
<td align="center">取值范围：[0, 2], 默认值 0，具体含义请参见 H.264 协议，可动态配置。</td>
</tr>
<tr>
<td align="center">slice_alpha_c0_offset_div2</td>
<td align="center">取值范围：[-6, 6], 默认值 0，具体含义请参见 H.264协议，可动态配置。</td>
</tr>
<tr>
<td align="center">slice_beta_offset_div2</td>
<td align="center">取值范围：[-6, 6], 默认值 0，具体含义请参见 H.264协议，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-dblk-s">
<h3><span class="section-number">5.8.4.37. </span>VENC_H265_DBLK_S<a class="headerlink" href="#venc-h265-dblk-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H265去块滤波参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_DBLK_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">slice_deblocking_filter_disabled_flag</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">slice_beta_offset_div2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">slice_tc_offset_div2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">slice_loop_filter_across_slices_enabled_flag</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_DBLK_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">slice_deblocking_filter_disabled_flag</td>
<td align="center">默认为 0。<br/>取值范围：0 或 1。可动态配置。</td>
</tr>
<tr>
<td align="center">slice_tc_offset_div2</td>
<td align="center">默认为 0。<br/>取值范围：[-6，6]。<br/>可动态配置。</td>
</tr>
<tr>
<td align="center">slice_beta_offset_div2</td>
<td align="center">默认为 0。<br/>取值范围：[-6，6]。<br/>可动态配置。</td>
</tr>
<tr>
<td align="center">slice_loop_filter_across_slices_enabled_flag</td>
<td align="center">使能slice边界滤波，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-vui-h264-time-info-s">
<h3><span class="section-number">5.8.4.38. </span>VENC_VUI_H264_TIME_INFO_S<a class="headerlink" href="#venc-vui-h264-time-info-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H264 Timing参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_VUI_TIME_INFO_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">fixed_frame_rate_flag</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">num_units_in_tick</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">time_scale</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VENC_VUI_H264_TIME_INFO_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">fixed_frame_rate_flag</td>
<td align="center">具体含义请参见 H.264 协议，系统默认为 0。取值范围：0 或 1。</td>
</tr>
<tr>
<td align="center">num_units_in_tick</td>
<td align="center">参考H264规范，不可动态设置参数。</td>
</tr>
<tr>
<td align="center">time_scale</td>
<td align="center">参考H264规范，不可动态设置参数。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-vui-s">
<h3><span class="section-number">5.8.4.39. </span>VENC_H264_VUI_S<a class="headerlink" href="#venc-h264-vui-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 协议编码通道 Vui 结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_VUI_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_VUI_H264_TIME_INFO_S</span><span class="w"> </span><span class="n">stVuiTimeInfo</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VENC_H264_VUI_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">stVuiTimeInfo</td>
<td align="center">H264</td>
</tr>
</tbody>
</table></section>
<section id="venc-vui-h265-time-info-s">
<h3><span class="section-number">5.8.4.40. </span>VENC_VUI_H265_TIME_INFO_S<a class="headerlink" href="#venc-vui-h265-time-info-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H265 Timing参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_VUI_H265_TIME_INFO_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">num_units_in_tick</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">time_scale</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">num_ticks_poc_diff_one_minus1</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VENC_VUI_H265_TIME_INFO_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">num_units_in_tick</td>
<td align="center">参考H265规范，不可动态设置参数。</td>
</tr>
<tr>
<td align="center">time_scale</td>
<td align="center">参考H265规范，不可动态设置参数。</td>
</tr>
<tr>
<td align="center">num_ticks_poc_diff_one_minus1</td>
<td align="center">参考H265规范，不可动态设置参数。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-vui-s">
<h3><span class="section-number">5.8.4.41. </span>VENC_H265_VUI_S<a class="headerlink" href="#venc-h265-vui-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 协议编码通道 Vui 结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_VUI_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_VUI_H265_TIME_INFO_S</span><span class="w"> </span><span class="n">stVuiTimeInfo</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VENC_H265_VUI_S</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">stVuiTimeInfo</td>
<td align="center">H265 Timing参数</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-sao-s">
<h3><span class="section-number">5.8.4.42. </span>VENC_H265_SAO_S<a class="headerlink" href="#venc-h265-sao-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 协议编码通道 Sao 的结构体</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_SAO_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sample_adaptive_offset_enabled_flag</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_SAO_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sample_adaptive_offset_enabled_flag</td>
<td align="center">SAO参数</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-slice-split-s">
<h3><span class="section-number">5.8.4.43. </span>VENC_H264_SLICE_SPLIT_S<a class="headerlink" href="#venc-h264-slice-split-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 协议编码通道 SLICE 分割结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_SLICE_SPLIT_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">h264_slice_mode</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">h264_slice_arg</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_SLICE_SPLIT_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">h264_slice_mode</td>
<td align="center">Slice 分割模式，可动态配置</td>
</tr>
<tr>
<td align="center">h264_slice_arg</td>
<td align="center">slice参数，可动态配置，代表一个slice 宏块个数，从左上开始，16x16的像素，定义一个宏块，图像被划分成一个个宏块，进行编码，宏块最大值(h+15)/16 <em>（w+15）/16，同理h265得时候宏块得最大值是(h+63)/64</em>（w+63）/64</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-slice-split-s">
<h3><span class="section-number">5.8.4.44. </span>VENC_H265_SLICE_SPLIT_S<a class="headerlink" href="#venc-h265-slice-split-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 协议编码通道 SLICE 分割结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_SLICE_SPLIT_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">h265_independent_slice_mode</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">h265_independent_slice_arg</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">h265_dependent_slice_mode</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">h265_dependent_slice_arg</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_SLICE_SPLIT_S</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">h265_independent_slice_mode</td>
<td align="center">独立slice编码模<br/>0：不使能   1：使能, 可动态配置。</td>
</tr>
<tr>
<td align="center">h265_independent_slice_arg</td>
<td align="center">独立slice的大小，单位是编码CTU，取值范围[0, 2^16-1]，</td>
</tr>
<tr>
<td align="center">h265_dependent_slice_mode</td>
<td align="center">非独立slice编码模式<br/>0: 不使能  1：slice单位是编码CTU<br/>2: slice单位是byte, 可动态配置。</td>
</tr>
<tr>
<td align="center">h265_dependent_slice_arg</td>
<td align="center">独立slice大小，范围是[0, 2^16-1]，, 可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-intra-pred-s">
<h3><span class="section-number">5.8.4.45. </span>VENC_H264_INTRA_PRED_S<a class="headerlink" href="#venc-h264-intra-pred-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.264 协议编码通道帧内预测结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_INTRA_PRED_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">constrained_intra_pred_flag</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VENC_H264_INTRA_PRED_S</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">constrained_intra_pred_flag</td>
<td align="center">默认为 0。<br/>取值范围：0 或 1。可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-pu-s">
<h3><span class="section-number">5.8.4.46. </span>VENC_H265_PU_S<a class="headerlink" href="#venc-h265-pu-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义 H.265 协议编码通道 PU 参数结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_PU_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">intra_nxn_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">max_num_merge</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">constrained_intra_pred_flag</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">strong_intra_smoothing_enabled_flag</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VENC_H265_PU_S</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">intra_nxn_enable</td>
<td align="center">是否使能intra NxN PUs in intra Cus，可动态配置</td>
</tr>
<tr>
<td align="center">max_num_merge</td>
<td align="center">指定num of merge candidates in RDO，可动态配置</td>
</tr>
<tr>
<td align="center">constrained_intra_pred_flag</td>
<td align="center">默认为 0<br/>取值范围：0 或 1。<br/>可动态配置</td>
</tr>
<tr>
<td align="center">strong_intra_smoothing_enabled_flag<br/>默认为 0。<br/>取值范围：0 或 1。<br/>可动态配置  。</td>
<td align="center"></td>
</tr>
</tbody>
</table></section>
<section id="venc-h264-trans-s">
<h3><span class="section-number">5.8.4.47. </span>VENC_H264_TRANS_S<a class="headerlink" href="#venc-h264-trans-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H264 Transform参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H264_TRANS_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">transform_8x8_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">chroma_cb_qp_offset</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">chroma_cr_qp_offset</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">user_scaling_list_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">scaling_list_4x4</span><span class="p">[</span><span class="n">HB_VENC_SL_MATRIX_NUM</span><span class="w"> </span><span class="p">][</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">scaling_list_8x8</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H264_TRANS_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">transform_8x8_enable</td>
<td align="center">使能8x8 transform，可动态配置。</td>
</tr>
<tr>
<td align="center">chroma_cb_qp_offset</td>
<td align="center">指定cb分量的QP偏差，可动态配置。</td>
</tr>
<tr>
<td align="center">chroma_cr_qp_offset</td>
<td align="center">指定cr分量的QP偏差，可动态配置。</td>
</tr>
<tr>
<td align="center">user_scaling_list_enable</td>
<td align="center">使能用户指定的scaling list，不可动态配置。</td>
</tr>
<tr>
<td align="center">scaling_list_4x4</td>
<td align="center">指定4x4块的相关系数，每个元素有16个系数，不可动态配置。</td>
</tr>
<tr>
<td align="center">scaling_list_8x8</td>
<td align="center">指定8x8块的相关系数，每个元素有64个系数，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-h265-trans-s">
<h3><span class="section-number">5.8.4.48. </span>VENC_H265_TRANS_S<a class="headerlink" href="#venc-h265-trans-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H265 Transform参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_H265_TRANSFORM_PARAMS</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">chroma_cb_qp_offset</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">chroma_cr_qp_offset</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">user_scaling_list_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">scaling_list_4x4</span><span class="p">[</span><span class="n">HB_VENC_SL_MATRIX_NUM</span><span class="w"> </span><span class="p">][</span><span class="mi">16</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">scaling_list_8x8</span><span class="p">[</span><span class="n">HB_VENC_SL_MATRIX_NUM</span><span class="w"> </span><span class="p">][</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">scaling_list_16x16</span><span class="p">[</span><span class="n">HB_VENC_SL_MATRIX_NUM</span><span class="p">][</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">scaling_list_32x32</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">scaling_list_dc_16x16</span><span class="p">[</span><span class="n">HB_VENC_SL_MATRIX_NUM</span><span class="w"> </span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">scaling_list_dc_32x32</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_H265_TRANS_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">chroma_cb_qp_offset</td>
<td align="center">指定cb分量的QP偏差，可动态配置。</td>
</tr>
<tr>
<td align="center">chroma_cr_qp_offset</td>
<td align="center">指定cr分量的QP偏差，可动态配置。</td>
</tr>
<tr>
<td align="center">user_scaling_list_enable</td>
<td align="center">使能用户指定的scaling list，不可动态配置。</td>
</tr>
<tr>
<td align="center">scaling_list_4x4</td>
<td align="center">指定4x4块的相关系数，每个元素有16个系数，不可动态配置。</td>
</tr>
<tr>
<td align="center">scaling_list_8x8</td>
<td align="center">指定8x8块的相关系数，每个元素有64个系数，不可动态配置。</td>
</tr>
<tr>
<td align="center">scaling_list_16x16</td>
<td align="center">指定16x16块的相关系数，每个元素有64个系数，不可动态配置。</td>
</tr>
<tr>
<td align="center">scaling_list_32x32</td>
<td align="center">指定32x32块的相关系数，每个元素有64个系数，不可动态配置。</td>
</tr>
<tr>
<td align="center">scaling_list_dc_16x16</td>
<td align="center">指定16x16的DC系数，不可动态配置。</td>
</tr>
<tr>
<td align="center">scaling_list_dc_32x32</td>
<td align="center">指定32x32的DC系数，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-cu-prediction-s">
<h3><span class="section-number">5.8.4.49. </span>VENC_CU_PREDICTION_S<a class="headerlink" href="#venc-cu-prediction-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H264/H265内部编码模式决策参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_CU_PREDICTION_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="kt">int32_t</span><span class="w"> </span><span class="n">mode_decision_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu04_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu08_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu16_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu32_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu04_intra_planar_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu04_intra_dc_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu04_intra_angle_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu08_intra_planar_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu08_intra_dc_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu08_intra_angle_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu16_intra_planar_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu16_intra_dc_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu16_intra_angle_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu32_intra_planar_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu32_intra_dc_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pu32_intra_angle_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu08_intra_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu08_inter_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu08_merge_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu16_intra_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu16_inter_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu16_merge_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu32_intra_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu32_inter_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">cu32_merge_delta_rate</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_CU_PREDICTION_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">mode_decision_enable;</td>
<td align="center">使能模式选择，可动态配置。</td>
</tr>
<tr>
<td align="center">pu04_delta_rate;</td>
<td align="center">4x4块cost delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu08_delta_rate;</td>
<td align="center">8x8块cost delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu16_delta_rate;</td>
<td align="center">16x16块cost delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu32_delta_rate;</td>
<td align="center">32x32块cost delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu04_intra_planar_delta_rate;</td>
<td align="center">帧内预测模式下4x4 intra planar rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu04_intra_dc_delta_rate;</td>
<td align="center">帧内预测模式下4x4 intra dc rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu04_intra_angle_delta_rate;</td>
<td align="center">帧内预测模式下4x4 intra angle rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu08_intra_planar_delta_rate;</td>
<td align="center">帧内预测模式下8x8 intra planar rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu08_intra_dc_delta_rate;</td>
<td align="center">帧内预测模式下8x8 intra dc rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu08_intra_angle_delta_rate;</td>
<td align="center">帧内预测模式下8x8 intra angle rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu16_intra_planar_delta_rate;</td>
<td align="center">帧内预测模式下16x16 intra planar rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu16_intra_dc_delta_rate;</td>
<td align="center">帧内预测模式下16x16 intra dc rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu16_intra_angle_delta_rate;</td>
<td align="center">帧内预测模式下16x16 intra angle rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu32_intra_planar_delta_rate;</td>
<td align="center">帧内预测模式下32x32 intra planar rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu32_intra_dc_delta_rate;</td>
<td align="center">帧内预测模式下32x32 intra dc rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">pu32_intra_angle_delta_rate;</td>
<td align="center">帧内预测模式下32x32 intra angle rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu08_intra_delta_rate;</td>
<td align="center">帧间CU8x8 intra rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu08_inter_delta_rate;</td>
<td align="center">帧间CU8x8 inter rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu08_merge_delta_rate;</td>
<td align="center">帧间CU8x8 merge rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu16_intra_delta_rate;</td>
<td align="center">帧间CU16x16 intra rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu16_inter_delta_rate;</td>
<td align="center">帧间CU16x16 inter rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu16_merge_delta_rate;</td>
<td align="center">帧间CU16x16 merge rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu32_intra_delta_rate;</td>
<td align="center">帧间CU32x32 intra rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu32_inter_delta_rate;</td>
<td align="center">帧间CU32x32 inter rate delta，可动态配置。</td>
</tr>
<tr>
<td align="center">cu32_merge_delta_rate;</td>
<td align="center">帧间CU32x32 merge rate delta，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="video-crop-info-s">
<h3><span class="section-number">5.8.4.50. </span>VIDEO_CROP_INFO_S<a class="headerlink" href="#video-crop-info-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义通道截取（Crop）参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VIDEO_CROP_INFO_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">bEnable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">CODEC_RECT_S</span><span class="w"> </span><span class="n">stRect</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VIDEO_CROP_INFO_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">bEnable</td>
<td align="center">是否进行裁剪。<br/>取值范围：[HB_FALSE, HB_TRUE]</td>
</tr>
<tr>
<td align="center">stRect</td>
<td align="center">裁剪的区域，其中s32X，s32Y是8字节对齐，H.264/H.265对应的u32Width，u32Height是2字节对齐，mjpeg、jpeg对应的u32Width，u32Height是1字节对齐</td>
</tr>
</tbody>
</table></section>
<section id="video-frame-pack-s">
<h3><span class="section-number">5.8.4.51. </span>VIDEO_FRAME_PACK_S<a class="headerlink" href="#video-frame-pack-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义图像帧结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VIDEO_FRAME_PACK_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">hb_char</span><span class="o">*</span><span class="w"> </span><span class="n">vir_ptr</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">phy_ptr</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">PIXEL_FORMAT_E</span><span class="w"> </span><span class="n">pix_format</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">stride</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">vstride</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">fd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">pts</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">frame_end</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">src_idx</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VIDEO_FRAME_PACK_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">vir_ptr[3]</td>
<td align="center">图像帧虚拟地址指针</td>
</tr>
<tr>
<td align="center">phy_ptr[3]</td>
<td align="center">图像帧物理地址</td>
</tr>
<tr>
<td align="center">size</td>
<td align="center">图像帧大小</td>
</tr>
<tr>
<td align="center">width</td>
<td align="center">图像宽度</td>
</tr>
<tr>
<td align="center">height</td>
<td align="center">图像高度</td>
</tr>
<tr>
<td align="center">pix_format</td>
<td align="center">图像像素格式</td>
</tr>
<tr>
<td align="center">stride</td>
<td align="center">图像横向跨度</td>
</tr>
<tr>
<td align="center">vstride</td>
<td align="center">图像垂直跨度</td>
</tr>
<tr>
<td align="center">fd[3]</td>
<td align="center">图像ion内存句柄</td>
</tr>
<tr>
<td align="center">pts</td>
<td align="center">图像pts</td>
</tr>
<tr>
<td align="center">frame_end</td>
<td align="center">图像是否最后一帧</td>
</tr>
<tr>
<td align="center">flags</td>
<td align="center">图像标志</td>
</tr>
<tr>
<td align="center">src_idx</td>
<td align="center">内部buffer序号</td>
</tr>
</tbody>
</table></section>
<section id="video-frame-s">
<h3><span class="section-number">5.8.4.52. </span>VIDEO_FRAME_S<a class="headerlink" href="#video-frame-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义视频原始图像帧结构。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VIDEO_FRAME_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VIDEO_FRAME_PACK_S</span><span class="w"> </span><span class="n">stVFrame</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">union</span> <span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">VIDEO_FRAME_INFO_S</span><span class="w"> </span><span class="n">stFrameInfo</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VIDEO_FRAME_INFO_JPEG_S</span><span class="w"> </span><span class="n">stJpegInfo</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VIDEO_FRAME_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">stVFrame</td>
<td align="center">视频帧</td>
</tr>
<tr>
<td align="center">stFrameInfo</td>
<td align="center">视频帧信息</td>
</tr>
<tr>
<td align="center">stJpegInfo</td>
<td align="center">Jpeg帧信息</td>
</tr>
</tbody>
</table></section>
<section id="video-frame-info-s">
<h3><span class="section-number">5.8.4.53. </span>VIDEO_FRAME_INFO_S<a class="headerlink" href="#video-frame-info-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义视频图像帧信息结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VIDEO_FRAME_INFO_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">decode_result</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">frame_display_index</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">frame_decoded_index</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">stream_start_addr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">stream_size</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">nalu_type</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">err_mb_in_frame_decoded</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">total_mb_in_frame_decoded</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">err_mb_in_frame_display</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">total_mb_in_frame_display</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">CODEC_RECT_S</span><span class="w"> </span><span class="n">display_rect</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">display_width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">display_height</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">CODEC_RECT_S</span><span class="w"> </span><span class="n">decoded_rect</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">aspect_rate_info</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">frame_rate_numerator</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">frame_rate_denominator</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">display_poc</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">decoded_poc</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">error_reason</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">warn_info</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">sequence_no</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">temporal_id</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">output_flag</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">ctu_size</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VIDEO_FRAME_INFO_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">decode_result</td>
<td align="center">解码结果</td>
</tr>
<tr>
<td align="center">frame_display_index</td>
<td align="center">帧显示序号</td>
</tr>
<tr>
<td align="center">frame_decoded_index</td>
<td align="center">帧解码序号</td>
</tr>
<tr>
<td align="center">stream_start_addr;</td>
<td align="center">码流起始地址</td>
</tr>
<tr>
<td align="center">stream_size;</td>
<td align="center">码流大小</td>
</tr>
<tr>
<td align="center">nalu_type</td>
<td align="center">码流帧类型</td>
</tr>
<tr>
<td align="center">err_mb_in_frame_decoded</td>
<td align="center">解码帧错误MB块数量</td>
</tr>
<tr>
<td align="center">total_mb_in_frame_decoded</td>
<td align="center">解码帧总MB块数量</td>
</tr>
<tr>
<td align="center">err_mb_in_frame_display</td>
<td align="center">显示帧错误MB块数量</td>
</tr>
<tr>
<td align="center">total_mb_in_frame_display</td>
<td align="center">显示帧总MB块数量</td>
</tr>
<tr>
<td align="center">display_rect</td>
<td align="center">显示区域</td>
</tr>
<tr>
<td align="center">display_width</td>
<td align="center">显示宽度</td>
</tr>
<tr>
<td align="center">display_height</td>
<td align="center">显示高度</td>
</tr>
<tr>
<td align="center">decoded_rect</td>
<td align="center">解码区域</td>
</tr>
<tr>
<td align="center">aspect_rate_info</td>
<td align="center">纵横比信息</td>
</tr>
<tr>
<td align="center">frame_rate_numerator</td>
<td align="center">帧速率分数的分子部分</td>
</tr>
<tr>
<td align="center">frame_rate_denominator</td>
<td align="center">帧速率分数的分母部分</td>
</tr>
<tr>
<td align="center">display_poc</td>
<td align="center">图像显示序号</td>
</tr>
<tr>
<td align="center">decoded_poc</td>
<td align="center">图像解码序号</td>
</tr>
<tr>
<td align="center">error_reason</td>
<td align="center">解码错误信息</td>
</tr>
<tr>
<td align="center">warn_info</td>
<td align="center">解码告警信息</td>
</tr>
<tr>
<td align="center">sequence_no</td>
<td align="center">图像序号，每帧加1</td>
</tr>
<tr>
<td align="center">temporal_id</td>
<td align="center">custom gop中的tempeoral id</td>
</tr>
<tr>
<td align="center">output_flag</td>
<td align="center">是否输出标志</td>
</tr>
<tr>
<td align="center">ctu_size</td>
<td align="center">ctu size</td>
</tr>
</tbody>
</table></section>
<section id="video-frame-info-jpeg-s">
<h3><span class="section-number">5.8.4.54. </span>VIDEO_FRAME_INFO_JPEG_S<a class="headerlink" href="#video-frame-info-jpeg-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义视频图像帧信息结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VIDEO_FRAME_INFO_JPEG_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">decode_result</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">frame_display_index</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">stream_start_addr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">stream_size</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">err_rst_idx</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">err_pos_x</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">err_pos_y</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">display_width</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">display_height</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VIDEO_FRAME_INFO_JPEG_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">decode_result;</td>
<td align="center">解码结果</td>
</tr>
<tr>
<td align="center">frame_display_index;</td>
<td align="center">帧显示序号</td>
</tr>
<tr>
<td align="center">stream_start_addr;</td>
<td align="center">码流起始地址</td>
</tr>
<tr>
<td align="center">stream_size;</td>
<td align="center">码流大小</td>
</tr>
<tr>
<td align="center">err_rst_idx;</td>
<td align="center">JPEG error restart index decode_result 返回成功后可用。</td>
</tr>
<tr>
<td align="center">err_pos_x;</td>
<td align="center">JPEG error MCU position X decode_result 返回成功后可用。</td>
</tr>
<tr>
<td align="center">err_pos_y;</td>
<td align="center">JPEG error MCU position Y decode_result 返回成功后可用。</td>
</tr>
<tr>
<td align="center">display_width;</td>
<td align="center">显示宽度</td>
</tr>
<tr>
<td align="center">display_height;</td>
<td align="center">显示高度</td>
</tr>
</tbody>
</table></section>
<section id="video-stream-pack-s">
<h3><span class="section-number">5.8.4.55. </span>VIDEO_STREAM_PACK_S<a class="headerlink" href="#video-stream-pack-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义视频流的stream buffer信息。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VIDEO_PACK_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">hb_char</span><span class="o">*</span><span class="w"> </span><span class="n">vir_ptr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">phy_ptr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">pts</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">fd</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">src_idx</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">stream_end</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VIDEO_STREAM_PACK_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">vir_ptr</td>
<td align="center">帧buffer虚拟地址指针</td>
</tr>
<tr>
<td align="center">phy_ptr</td>
<td align="center">帧buffer物理地址</td>
</tr>
<tr>
<td align="center">size</td>
<td align="center">帧buffer总的大小</td>
</tr>
<tr>
<td align="center">pts</td>
<td align="center">帧时间戳</td>
</tr>
<tr>
<td align="center">fd</td>
<td align="center">buffer文件句柄</td>
</tr>
<tr>
<td align="center">src_idx</td>
<td align="center">索引号</td>
</tr>
<tr>
<td align="center">stream_end</td>
<td align="center">最后一段数据数据流</td>
</tr>
</tbody>
</table></section>
<section id="video-stream-info-s">
<h3><span class="section-number">5.8.4.56. </span>VIDEO_STREAM_INFO_S<a class="headerlink" href="#video-stream-info-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义H264/H265输出码流的额外信息。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VIDEO_STREAM_INFO_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOLframe_index</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">frame_start_addr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">frame_size</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">nalu_type</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">slice_idx</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">slice_num</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">dependent_slice_num</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">independent_slice_num</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pic_skipped</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">intra_block_num</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">skip_block_num</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">avg_mb_qp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">enc_pic_byte</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">enc_gop_pic_idx</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">enc_pic_poc</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">enc_src_idx</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">enc_pic_cnt</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">enc_error_reason</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">enc_warn_info</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame_cycle</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">temporal_id</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">longterm_ref_type</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VIDEO_STREAM_INFO_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">frame_start_addr</td>
<td align="center">码流起始地址</td>
</tr>
<tr>
<td align="center">frame_size</td>
<td align="center">码流大小</td>
</tr>
<tr>
<td align="center">frame_index</td>
<td align="center">重构帧的序号</td>
</tr>
<tr>
<td align="center">nalu_type</td>
<td align="center">nalu类型</td>
</tr>
<tr>
<td align="center">slice_idx</td>
<td align="center">slice 序号</td>
</tr>
<tr>
<td align="center">slice_num</td>
<td align="center">slice数量，H264有效</td>
</tr>
<tr>
<td align="center">dependent_slice_num</td>
<td align="center">非独立slice数量，H265有效</td>
</tr>
<tr>
<td align="center">independent_slice_num</td>
<td align="center">独立slice数量，H265有效</td>
</tr>
<tr>
<td align="center">pic_skipped</td>
<td align="center">标记该帧是否被忽略</td>
</tr>
<tr>
<td align="center">intra_block_num</td>
<td align="center">帧内块数量</td>
</tr>
<tr>
<td align="center">skip_block_num</td>
<td align="center">忽略块数量</td>
</tr>
<tr>
<td align="center">avg_mb_qp</td>
<td align="center">平均宏块QP</td>
</tr>
<tr>
<td align="center">enc_pic_byte</td>
<td align="center">编码图像的大小，单位是byte</td>
</tr>
<tr>
<td align="center">enc_gop_pic_idx</td>
<td align="center">编码图像的gop索引</td>
</tr>
<tr>
<td align="center">enc_pic_poc</td>
<td align="center">编码图像的POC值</td>
</tr>
<tr>
<td align="center">enc_src_idx</td>
<td align="center">编码图像的buffer索引</td>
</tr>
<tr>
<td align="center">enc_pic_cnt</td>
<td align="center">编码图像的数量</td>
</tr>
<tr>
<td align="center">enc_error_reason</td>
<td align="center">编码错误信息</td>
</tr>
<tr>
<td align="center">enc_warn_info</td>
<td align="center">编码警告信息</td>
</tr>
<tr>
<td align="center">frame_cycle</td>
<td align="center">编码一帧的周期</td>
</tr>
<tr>
<td align="center">temporal_id</td>
<td align="center">输出码流时域层号</td>
</tr>
<tr>
<td align="center">longterm_ref_type</td>
<td align="center">输出码流帧类型，bit1 bit0有效<br/>bit1 为1 表示为长期参考帧<br/>bit0位1表示为参考长期参考帧。</td>
</tr>
</tbody>
</table></section>
<section id="video-stream-info-jpeg-s">
<h3><span class="section-number">5.8.4.57. </span>VIDEO_STREAM_INFO_JPEG_S<a class="headerlink" href="#video-stream-info-jpeg-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义MJPEG/JPEG输出码流的额外信息。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">VIDEO_STREAM_INFO_JPEG_S</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">frame_start_addr</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">frame_size</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">slice_idx</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">slice_num</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">frame_cycle</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VIDEO_STREAM_INFO_JPEG_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">frame_start_addr</td>
<td align="center">码流起始地址</td>
</tr>
<tr>
<td align="center">frame_size</td>
<td align="center">码流大小</td>
</tr>
<tr>
<td align="center">slice_idx</td>
<td align="center">slice 索引</td>
</tr>
<tr>
<td align="center">slice_num</td>
<td align="center">slice 个数</td>
</tr>
<tr>
<td align="center">frame_cycle</td>
<td align="center">编码一帧的周期</td>
</tr>
</tbody>
</table></section>
<section id="video-stream-s">
<h3><span class="section-number">5.8.4.58. </span>VIDEO_STREAM_S<a class="headerlink" href="#video-stream-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义帧码流类型结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VIDEO_STREAM_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VIDEO_STREAM_PACK_S</span><span class="w"> </span><span class="n">pstPack</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">union</span>
    <span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">VIDEO_STREAM_INFO_S</span><span class="w"> </span><span class="n">stStreamInfo</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">VIDEO_STREAM_INFO_JPEG_S</span><span class="w"> </span><span class="n">stJpegInfo</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="n">VIDEO_STREAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">pstPack</td>
<td align="center">帧码流包结构。</td>
</tr>
<tr>
<td align="center">stStreamInfo</td>
<td align="center">码流特征信息。</td>
</tr>
<tr>
<td align="center">stJpegInfo</td>
<td align="center">码流特征信息。</td>
</tr>
</tbody>
</table></section>
<section id="venc-recv-pic-param-s">
<h3><span class="section-number">5.8.4.59. </span>VENC_RECV_PIC_PARAM_S<a class="headerlink" href="#venc-recv-pic-param-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码通道连续接收并编码的帧数结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_RECV_PIC_PARAM_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32RecvPicNum</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="n">VENC_RECV_PIC_PARAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">s32RecvPicNum</td>
<td align="center">编码通道连续接收并编码的帧数。范围：[-1,0)∪(0 ∞]</td>
</tr>
</tbody>
</table></section>
<section id="venc-ref-param-s">
<h3><span class="section-number">5.8.4.60. </span>VENC_REF_PARAM_S<a class="headerlink" href="#venc-ref-param-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码器参考参数结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">HB_VENC_REF_PARAM_S</span>
<span class="p">{</span>
    <span class="n">uint32_t</span> <span class="n">use_longterm</span><span class="p">;</span>
    <span class="n">uint32_t</span> <span class="n">longterm_pic_period</span><span class="p">;</span>
    <span class="n">uint32_t</span> <span class="n">longterm_pic_using_period</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VENC_REF_PARAM_S</span><span class="p">;</span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">use_longterm</td>
<td align="center">启用长帧参考模式，不可动态配置。</td>
</tr>
<tr>
<td align="center">longterm_pic_period</td>
<td align="center">长帧参考图片周期，可动态配置。</td>
</tr>
<tr>
<td align="center">longterm_pic_using_period</td>
<td align="center">长帧参考图片使用周期，可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-user-rc-attr-s">
<h3><span class="section-number">5.8.4.61. </span>VENC_USER_RC_ATTR_S<a class="headerlink" href="#venc-user-rc-attr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义用户图像帧信息。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_USER_RC_ATTR_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">HB_BOOL</span><span class="w"> </span><span class="n">qp_map_valid</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">qp_map_array</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">qp_map_array_count</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_USER_RC_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">qp_map_valid</td>
<td align="center">是否使能qp map。</td>
</tr>
<tr>
<td align="center">qp_map_array qp</td>
<td align="center">map表指针。</td>
</tr>
<tr>
<td align="center">qp_map_array_count</td>
<td align="center">qp map 表长度。</td>
</tr>
</tbody>
</table></section>
<section id="user-frame-info-s">
<h3><span class="section-number">5.8.4.62. </span>USER_FRAME_INFO_S<a class="headerlink" href="#user-frame-info-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义用户图像帧信息。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_USER_FRAME_INFO_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VIDEO_FRAME_S</span><span class="w"> </span><span class="n">stUserFrame</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_USER_RC_ATTR_S</span><span class="w"> </span><span class="n">stUserRcInfo</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">USER_FRAME_INFO_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">stUserFrame</td>
<td align="center">图像帧</td>
</tr>
<tr>
<td align="center">stUserRcInfo</td>
<td align="center">用户RC信息。</td>
</tr>
</tbody>
</table></section>
<section id="venc-param-mod-s">
<h3><span class="section-number">5.8.4.63. </span>VENC_PARAM_MOD_S<a class="headerlink" href="#venc-param-mod-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码通道帧率控制参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_PARAM_MOD_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">u32OneStreamBuffer</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_PARAM_MOD_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u32OneStreamBuffer</td>
<td align="center">VPS、SPS、PPS、IDR是否一帧输出<br/>默认一帧输出。</td>
</tr>
</tbody>
</table></section>
<section id="venc-frame-rate-s">
<h3><span class="section-number">5.8.4.64. </span>VENC_FRAME_RATE_S<a class="headerlink" href="#venc-frame-rate-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码通道帧率控制参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_FRAME_RATE_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32InputFrameRate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">s32OutputFrameRate</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_FRAME_RATE_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">s32InputFrameRate</td>
<td align="center">输入帧率</td>
</tr>
<tr>
<td align="center">s32OutputFrameRate</td>
<td align="center">输出帧率，范围[1- s32InputFrameRate）</td>
</tr>
</tbody>
</table></section>
<section id="venc-chn-param-s">
<h3><span class="section-number">5.8.4.65. </span>VENC_CHN_PARAM_S<a class="headerlink" href="#venc-chn-param-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码通道参数。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_CHN_PARAM_S</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">VENC_FRAME_RATE_S</span><span class="w"> </span><span class="n">stFrameRate</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_CHN_PARAM_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">stFrameRate</td>
<td align="center">帧率控制参数，可动态设置</td>
</tr>
</tbody>
</table></section>
<section id="venc-roi-attr-s">
<h3><span class="section-number">5.8.4.66. </span>VENC_ROI_ATTR_S<a class="headerlink" href="#venc-roi-attr-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码感兴趣区域信息。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_ROI_ATTR_S</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">roi_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">roi_map_array</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">roi_map_array_count</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_ROI_ATTR_S</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">roi_enable</td>
<td align="center">使能roi区域，不可动态配置。</td>
</tr>
<tr>
<td align="center">roi_map_array</td>
<td align="center">roi区域Qp数组，可动态配置。</td>
</tr>
<tr>
<td align="center">roi_map_array_count</td>
<td align="center">roi区域Qp数组个数，不可动态配置。</td>
</tr>
</tbody>
</table></section>
<section id="venc-chn-status-s">
<h3><span class="section-number">5.8.4.67. </span>VENC_CHN_STATUS_S<a class="headerlink" href="#venc-chn-status-s" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码通道状态结构体。</p>
</div></blockquote>
<p>【结构定义】
typedef struct HB_VENC_CHN_STATUS_S {
uint32_t cur_input_buf_cnt;
uint64_t cur_input_buf_size;
uint64_t cur_output_buf_cnt;
uint64_t cur_output_buf_size;
uint32_t left_recv_frame;
uint32_t left_enc_frame;
uint32_t total_input_buf_cnt;
uint32_t total_output_buf_cnt;
int32_t pipeline;
int32_t channel_port_id;
} VENC_CHN_STATUS_S;
【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">cur_input_buf_cnt</td>
<td align="center">当前输入未编码图像帧个数</td>
</tr>
<tr>
<td align="center">cur_input_buf_size</td>
<td align="center">当前输入帧buffer size</td>
</tr>
<tr>
<td align="center">cur_output_buf_cnt</td>
<td align="center">当前已完成编码图像帧个数</td>
</tr>
<tr>
<td align="center">cur_output_buf_size</td>
<td align="center">当前已编码buffer size</td>
</tr>
<tr>
<td align="center">left_recv_frame</td>
<td align="center">剩余需要接收图像帧数</td>
</tr>
<tr>
<td align="center">left_enc_frame</td>
<td align="center">剩余需要编码图像帧数</td>
</tr>
<tr>
<td align="center">total_input_buf_cnt</td>
<td align="center">总计输入图像帧个数</td>
</tr>
<tr>
<td align="center">total_output_buf_cnt</td>
<td align="center">总计编码图像帧个数</td>
</tr>
<tr>
<td align="center">pipeline</td>
<td align="center">pipeline</td>
</tr>
<tr>
<td align="center">channel_port_id</td>
<td align="center">channel id</td>
</tr>
</tbody>
</table></section>
<section id="venc-3dnr-params">
<h3><span class="section-number">5.8.4.68. </span>VENC_3DNR_PARAMS<a class="headerlink" href="#venc-3dnr-params" title="永久链接至标题"></a></h3>
<p>【描述】</p>
<blockquote>
<div><p>定义编码通道状态结构体。</p>
</div></blockquote>
<p>【结构定义】</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HB_VENC_3DNR_PARAMS</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_y_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_cb_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_cr_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_est_enable</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_intra_weightY</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_intra_weightCb</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_intra_weightCr</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_inter_weightY</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_inter_weightCb</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_inter_weightCr</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_noise_sigmaY</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_noise_sigmaCb</span><span class="p">;</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nr_noise_sigmaCr</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">VENC_3DNR_PARAMS</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>【成员说明】</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">成员</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">```C</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">nr_y_enable</td>
<td align="center">Y分量是否使能去噪</td>
</tr>
<tr>
<td align="center">nr_cb_enable</td>
<td align="center">Cb分量是否使能去噪</td>
</tr>
<tr>
<td align="center">nr_cr_enable</td>
<td align="center">Cr分量是否使能去噪</td>
</tr>
<tr>
<td align="center">nr_est_enable</td>
<td align="center">是否使能噪声估计</td>
</tr>
<tr>
<td align="center">nr_intra_weightY</td>
<td align="center">帧内图像Y分量加权系数</td>
</tr>
<tr>
<td align="center">nr_intra_weightCb</td>
<td align="center">帧内图像Cb分量加权系数</td>
</tr>
<tr>
<td align="center">nr_intra_weightCr</td>
<td align="center">帧内图像Cr分量加权系数</td>
</tr>
<tr>
<td align="center">nr_inter_weightY</td>
<td align="center">帧间图像Y分量加权系数</td>
</tr>
<tr>
<td align="center">nr_inter_weightCb</td>
<td align="center">帧间图像Cb分量加权系数</td>
</tr>
<tr>
<td align="center">nr_inter_weightCr</td>
<td align="center">帧间图像Cr分量加权系数</td>
</tr>
<tr>
<td align="center">nr_noise_sigmaY</td>
<td align="center">Y分量噪声标准偏差</td>
</tr>
<tr>
<td align="center">nr_noise_sigmaCb</td>
<td align="center">Cb分量噪声标准偏差</td>
</tr>
<tr>
<td align="center">nr_noise_sigmaCr</td>
<td align="center">Cr分量噪声标准偏差</td>
</tr>
<tr>
<td align="center">```</td>
<td align="center"></td>
</tr>
</tbody>
</table></section>
</section>
<section id="id10">
<h2><span class="section-number">5.8.5. </span>错误码<a class="headerlink" href="#id10" title="永久链接至标题"></a></h2>
<p>VENC错误码如下表：</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">错误码</th>
<th align="right">宏定义</th>
<th align="right">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">-268958720</td>
<td align="right">HB_ERR_VENC_UNKNOWN</td>
<td align="right">未知错误</td>
</tr>
<tr>
<td align="center">-268958721</td>
<td align="right">HB_ERR_VENC_NOT_FOUND</td>
<td align="right">VENC通道未找到</td>
</tr>
<tr>
<td align="center">-268958722</td>
<td align="right">HB_ERR_VENC_OPEN_FAIL</td>
<td align="right">打开VENC通道失败</td>
</tr>
<tr>
<td align="center">-268958723</td>
<td align="right">HB_ERR_VENC_RESPONSE_TIMEOUT</td>
<td align="right">操作VENC通道无响应</td>
</tr>
<tr>
<td align="center">-268958724</td>
<td align="right">HB_ERR_VENC_INIT_FAIL</td>
<td align="right">初始化VENC模块失败</td>
</tr>
<tr>
<td align="center">-268958725</td>
<td align="right">HB_ERR_VENC_OPERATION_NOT_ALLOWDED</td>
<td align="right">操作不允许</td>
</tr>
<tr>
<td align="center">-268958726</td>
<td align="right">HB_ERR_VENC_NOMEM</td>
<td align="right">VENC内存不够</td>
</tr>
<tr>
<td align="center">-268958727</td>
<td align="right">HB_ERR_VENC_NO_FREE_CHANNEL</td>
<td align="right">没有空的VENC通道</td>
</tr>
<tr>
<td align="center">-268958728</td>
<td align="right">HB_ERR_VENC_ILLEGAL_PARAM</td>
<td align="right">参数错误</td>
</tr>
<tr>
<td align="center">-268958729</td>
<td align="right">HB_ERR_VENC_INVALID_CHNID</td>
<td align="right">错误的通道号</td>
</tr>
<tr>
<td align="center">-268958730</td>
<td align="right">HB_ERR_VENC_INVALID_BUF</td>
<td align="right">错误的buffer块</td>
</tr>
<tr>
<td align="center">-268958731</td>
<td align="right">HB_ERR_VENC_INVALID_CMD</td>
<td align="right">错误的命令</td>
</tr>
<tr>
<td align="center">-268958732</td>
<td align="right">HB_ERR_VENC_WAIT_TIMEOUT</td>
<td align="right">等待超时</td>
</tr>
<tr>
<td align="center">-268958733</td>
<td align="right">HB_ERR_VENC_FILE_OPERATION_FAIL</td>
<td align="right">操作失败</td>
</tr>
<tr>
<td align="center">-268958734</td>
<td align="right">HB_ERR_VENC_PARAMS_SET_FAIL</td>
<td align="right">设置参数失败</td>
</tr>
<tr>
<td align="center">-268958735</td>
<td align="right">HB_ERR_VENC_PARAMS_GET_FAIL</td>
<td align="right">获取参数失败</td>
</tr>
<tr>
<td align="center">-268958736</td>
<td align="right">HB_ERR_VENC_EXIST</td>
<td align="right">VENC 通道已存在</td>
</tr>
<tr>
<td align="center">-268958737</td>
<td align="right">HB_ERR_VENC_UNEXIST</td>
<td align="right">VENC 通道不存在</td>
</tr>
<tr>
<td align="center">-268958738</td>
<td align="right">HB_ERR_VENC_NULL_PTR</td>
<td align="right">空指针</td>
</tr>
<tr>
<td align="center">-268958739</td>
<td align="right">HB_ERR_VENC_UNSUPPORT</td>
<td align="right">不支持</td>
</tr>
</tbody>
</table></section>
<section id="id11">
<h2><span class="section-number">5.8.6. </span>参考代码<a class="headerlink" href="#id11" title="永久链接至标题"></a></h2>
<p>VENC部分示例代码可以参考，<a class="reference external" href="../samples/Mpp_Usage_Guidelines/sample_video_codec.html">sample_video_codec</a>。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="7-Video_Output_zh_CN.html" class="btn btn-neutral float-left" title="5.7. 视频输出" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="9-Video_Decode_zh_CN.html" class="btn btn-neutral float-right" title="5.9. 视频解码" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, Horizon Robotics.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>